//app-directives.modules.js
(function() {

    angular.module('app.directives', []).directive('stSubmitSearch', ['stConfig', '$timeout', '$parse', function (stConfig, $timeout, $parse) {
        return {
            require: '^stTable',
            link: function (scope, element, attr, ctrl) {
                return element.bind('click',
                    function () {
                        var tableCtrl = ctrl;
                        tableCtrl.pipe();
                    });

            }
        };
    }]);


})();
//app.module.js
(function() {
    'use strict';

    var module = angular.module('media',
    [
        'app.service',
        'app.directives', 
        'ngComponentRouter',
        'ui.bootstrap',
        'smart-table'
    ]);

    //module.config(function () {//$locationProvider.html5Mode(true); });

    module.component('mediaApp',
    {
        templateUrl: '/app/media/media-app.component.html',
        $routeConfig: [
            { path: '/', name: 'List', component: 'list', useAsDefault: true }
            //{ path: '/:id', name: 'Details', component: 'detail' },
            //{ path: '/edit/:id', name: 'Edit', component: 'edit' },
            //{ path: '/create', name: 'Create', component: 'create' }
        ]
    });

    module.value('$routerRootComponent', 'mediaApp');

})();
//media-list.component.js
(function () {
    'use strict';

    var module = angular.module('media');

    function controller($uibModal, service) {
        var $ctrl = this;
        var pageSizeDefault = 10;
        var tableStateRef;

        $ctrl.searchModel = {
            page: 1,
            pageSize: pageSizeDefault
        };

        $ctrl.$onInit = function () {
        }

        $ctrl.search = function (tableState) {
            tableStateRef = tableState;

            service.getAllMedia($ctrl.searchModel).then(function (r) {
                $ctrl.media = r.results;
                $ctrl.searchModel = r;
                delete $ctrl.searchModel.results;
            });
        }

        $ctrl.paged = function () {
            $ctrl.search(tableStateRef);
        }

        $ctrl.showDetails = function (id) {
            $uibModal.open({
                component: 'mediaSummary',
                bindings: {
                    modalInstance: "<"
                },
                resolve: {
                    id: id,
                    asModal: true
                },
                size: 'lg'
            }).result.then(function (result) {
                console.info("I was closed, so do what I need to do myContent's controller now.  Result was->");
                console.info(result);
            }, function (reason) {
                console.info("I was dimissed, so do what I need to do myContent's controller now.  Reason was->" + reason);
            });
        }
    }

    module.component('list',
    {
        templateUrl: 'app/media/media-list.component.html',
        controller: ['$uibModal', 'MediaService', controller]
    });

}
)();
//media-summary.component.js
(function () {
    var module = angular.module('media');

    function controller(service) {
        var $ctrl = this;

        $ctrl.$onInit = function () {
            console.log('summary active');
            if ($ctrl.resolve) {
                $ctrl.id = $ctrl.resolve.id;
                $ctrl.asModal = $ctrl.resolve.asModal;
            }

            service.getMedia($ctrl.id).then(function (r) {
                $ctrl.media = r;
            });
        }

        $ctrl.cancel = function () {
            $ctrl.dismiss();
        };
    }

    module.component('mediaSummary',
    {
        bindings: {
            id: '<',
            asModal: '<',
            resolve: '<',
            close: '&',
            dismiss: '&'
        },
        templateUrl: 'app/media/media-summary.component.html',
        controller: ['MediaService', controller]
    });

}
)();
//app.service.js
(function() {
        var module = angular.module('app.service', []);
    }
)();
//media.service.js
(function () {
    'use strict';
    mediaService.$inject = ["$http"];
    var module = angular.module('app.service').factory('MediaService', mediaService);

    function mediaService($http) {

        return {
            getMedia: getMedia, 
            getAllMedia: getAllMedia
        };

        function getMedia(id) {
            return $http.get('api/media/' + id).then(function (r) {
                console.log('data', r.data);
                return r.data;
            }).catch(function (err) {
                console.log(err.message);
            });
        }

        function getAllMedia(searchModel) {
            return $http.get('api/media', { params: searchModel }).then(function (r) {
                return r.data;
            }).catch(function (err) {
                console.log(err.message);
            });
        }
    }

}
)();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRpcmVjdGl2ZXMvYXBwLWRpcmVjdGl2ZXMubW9kdWxlcy5qcyIsIm1lZGlhL21lZGlhLWFwcC5tb2R1bGUuanMiLCJtZWRpYS9tZWRpYS1saXN0LmNvbXBvbmVudC5qcyIsIm1lZGlhL21lZGlhLXN1bW1hcnkuY29tcG9uZW50LmpzIiwic2VydmljZXMvYXBwLXNlcnZpY2UubW9kdWxlLmpzIiwic2VydmljZXMvbWVkaWEuc2VydmljZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBLENBQUMsV0FBVzs7SUFFUixRQUFRLE9BQU8sa0JBQWtCLElBQUksVUFBVSxrQkFBa0IsQ0FBQyxZQUFZLFlBQVksVUFBVSxVQUFVLFVBQVUsVUFBVSxRQUFRO1FBQ3RJLE9BQU87WUFDSCxTQUFTO1lBQ1QsTUFBTSxVQUFVLE9BQU8sU0FBUyxNQUFNLE1BQU07Z0JBQ3hDLE9BQU8sUUFBUSxLQUFLO29CQUNoQixZQUFZO3dCQUNSLElBQUksWUFBWTt3QkFDaEIsVUFBVTs7Ozs7Ozs7S0FRN0I7QUNsQkw7QUFDQSxDQUFDLFdBQVc7SUFDUjs7SUFFQSxJQUFJLFNBQVMsUUFBUSxPQUFPO0lBQzVCO1FBQ0k7UUFDQTtRQUNBO1FBQ0E7UUFDQTs7Ozs7SUFLSixPQUFPLFVBQVU7SUFDakI7UUFDSSxhQUFhO1FBQ2IsY0FBYztZQUNWLEVBQUUsTUFBTSxLQUFLLE1BQU0sUUFBUSxXQUFXLFFBQVEsY0FBYzs7Ozs7OztJQU9wRSxPQUFPLE1BQU0sd0JBQXdCOztLQUVwQztBQzVCTDtBQUNBLENBQUMsWUFBWTtJQUNUOztJQUVBLElBQUksU0FBUyxRQUFRLE9BQU87O0lBRTVCLFNBQVMsV0FBVyxXQUFXLFNBQVM7UUFDcEMsSUFBSSxRQUFRO1FBQ1osSUFBSSxrQkFBa0I7UUFDdEIsSUFBSTs7UUFFSixNQUFNLGNBQWM7WUFDaEIsTUFBTTtZQUNOLFVBQVU7OztRQUdkLE1BQU0sVUFBVSxZQUFZOzs7UUFHNUIsTUFBTSxTQUFTLFVBQVUsWUFBWTtZQUNqQyxnQkFBZ0I7O1lBRWhCLFFBQVEsWUFBWSxNQUFNLGFBQWEsS0FBSyxVQUFVLEdBQUc7Z0JBQ3JELE1BQU0sUUFBUSxFQUFFO2dCQUNoQixNQUFNLGNBQWM7Z0JBQ3BCLE9BQU8sTUFBTSxZQUFZOzs7O1FBSWpDLE1BQU0sUUFBUSxZQUFZO1lBQ3RCLE1BQU0sT0FBTzs7O1FBR2pCLE1BQU0sY0FBYyxVQUFVLElBQUk7WUFDOUIsVUFBVSxLQUFLO2dCQUNYLFdBQVc7Z0JBQ1gsVUFBVTtvQkFDTixlQUFlOztnQkFFbkIsU0FBUztvQkFDTCxJQUFJO29CQUNKLFNBQVM7O2dCQUViLE1BQU07ZUFDUCxPQUFPLEtBQUssVUFBVSxRQUFRO2dCQUM3QixRQUFRLEtBQUs7Z0JBQ2IsUUFBUSxLQUFLO2VBQ2QsVUFBVSxRQUFRO2dCQUNqQixRQUFRLEtBQUssc0ZBQXNGOzs7OztJQUsvRyxPQUFPLFVBQVU7SUFDakI7UUFDSSxhQUFhO1FBQ2IsWUFBWSxDQUFDLGFBQWEsZ0JBQWdCOzs7O0lBSTlDO0FDNURKO0FBQ0EsQ0FBQyxZQUFZO0lBQ1QsSUFBSSxTQUFTLFFBQVEsT0FBTzs7SUFFNUIsU0FBUyxXQUFXLFNBQVM7UUFDekIsSUFBSSxRQUFROztRQUVaLE1BQU0sVUFBVSxZQUFZO1lBQ3hCLFFBQVEsSUFBSTtZQUNaLElBQUksTUFBTSxTQUFTO2dCQUNmLE1BQU0sS0FBSyxNQUFNLFFBQVE7Z0JBQ3pCLE1BQU0sVUFBVSxNQUFNLFFBQVE7OztZQUdsQyxRQUFRLFNBQVMsTUFBTSxJQUFJLEtBQUssVUFBVSxHQUFHO2dCQUN6QyxNQUFNLFFBQVE7Ozs7UUFJdEIsTUFBTSxTQUFTLFlBQVk7WUFDdkIsTUFBTTs7OztJQUlkLE9BQU8sVUFBVTtJQUNqQjtRQUNJLFVBQVU7WUFDTixJQUFJO1lBQ0osU0FBUztZQUNULFNBQVM7WUFDVCxPQUFPO1lBQ1AsU0FBUzs7UUFFYixhQUFhO1FBQ2IsWUFBWSxDQUFDLGdCQUFnQjs7OztJQUlqQztBQ3RDSjtBQUNBLENBQUMsV0FBVztRQUNKLElBQUksU0FBUyxRQUFRLE9BQU8sZUFBZTs7SUFFL0M7QUNKSjtBQUNBLENBQUMsWUFBWTtJQUNUOztJQUNBLElBQUksU0FBUyxRQUFRLE9BQU8sZUFBZSxRQUFRLGdCQUFnQjs7SUFFbkUsU0FBUyxhQUFhLE9BQU87O1FBRXpCLE9BQU87WUFDSCxVQUFVO1lBQ1YsYUFBYTs7O1FBR2pCLFNBQVMsU0FBUyxJQUFJO1lBQ2xCLE9BQU8sTUFBTSxJQUFJLGVBQWUsSUFBSSxLQUFLLFVBQVUsR0FBRztnQkFDbEQsUUFBUSxJQUFJLFFBQVEsRUFBRTtnQkFDdEIsT0FBTyxFQUFFO2VBQ1YsTUFBTSxVQUFVLEtBQUs7Z0JBQ3BCLFFBQVEsSUFBSSxJQUFJOzs7O1FBSXhCLFNBQVMsWUFBWSxhQUFhO1lBQzlCLE9BQU8sTUFBTSxJQUFJLGFBQWEsRUFBRSxRQUFRLGVBQWUsS0FBSyxVQUFVLEdBQUc7Z0JBQ3JFLE9BQU8sRUFBRTtlQUNWLE1BQU0sVUFBVSxLQUFLO2dCQUNwQixRQUFRLElBQUksSUFBSTs7Ozs7O0lBTTVCIiwiZmlsZSI6Im1vZHVsZXMubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy9hcHAtZGlyZWN0aXZlcy5tb2R1bGVzLmpzXHJcbihmdW5jdGlvbigpIHtcclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwLmRpcmVjdGl2ZXMnLCBbXSkuZGlyZWN0aXZlKCdzdFN1Ym1pdFNlYXJjaCcsIFsnc3RDb25maWcnLCAnJHRpbWVvdXQnLCAnJHBhcnNlJywgZnVuY3Rpb24gKHN0Q29uZmlnLCAkdGltZW91dCwgJHBhcnNlKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgcmVxdWlyZTogJ15zdFRhYmxlJyxcclxuICAgICAgICAgICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBjdHJsKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZWxlbWVudC5iaW5kKCdjbGljaycsXHJcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFibGVDdHJsID0gY3RybDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFibGVDdHJsLnBpcGUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfV0pO1xyXG5cclxuXHJcbn0pKCk7IiwiLy9hcHAubW9kdWxlLmpzXHJcbihmdW5jdGlvbigpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICB2YXIgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ21lZGlhJyxcclxuICAgIFtcclxuICAgICAgICAnYXBwLnNlcnZpY2UnLFxyXG4gICAgICAgICdhcHAuZGlyZWN0aXZlcycsIFxyXG4gICAgICAgICduZ0NvbXBvbmVudFJvdXRlcicsXHJcbiAgICAgICAgJ3VpLmJvb3RzdHJhcCcsXHJcbiAgICAgICAgJ3NtYXJ0LXRhYmxlJ1xyXG4gICAgXSk7XHJcblxyXG4gICAgLy9tb2R1bGUuY29uZmlnKGZ1bmN0aW9uICgpIHsvLyRsb2NhdGlvblByb3ZpZGVyLmh0bWw1TW9kZSh0cnVlKTsgfSk7XHJcblxyXG4gICAgbW9kdWxlLmNvbXBvbmVudCgnbWVkaWFBcHAnLFxyXG4gICAge1xyXG4gICAgICAgIHRlbXBsYXRlVXJsOiAnL2FwcC9tZWRpYS9tZWRpYS1hcHAuY29tcG9uZW50Lmh0bWwnLFxyXG4gICAgICAgICRyb3V0ZUNvbmZpZzogW1xyXG4gICAgICAgICAgICB7IHBhdGg6ICcvJywgbmFtZTogJ0xpc3QnLCBjb21wb25lbnQ6ICdsaXN0JywgdXNlQXNEZWZhdWx0OiB0cnVlIH1cclxuICAgICAgICAgICAgLy97IHBhdGg6ICcvOmlkJywgbmFtZTogJ0RldGFpbHMnLCBjb21wb25lbnQ6ICdkZXRhaWwnIH0sXHJcbiAgICAgICAgICAgIC8veyBwYXRoOiAnL2VkaXQvOmlkJywgbmFtZTogJ0VkaXQnLCBjb21wb25lbnQ6ICdlZGl0JyB9LFxyXG4gICAgICAgICAgICAvL3sgcGF0aDogJy9jcmVhdGUnLCBuYW1lOiAnQ3JlYXRlJywgY29tcG9uZW50OiAnY3JlYXRlJyB9XHJcbiAgICAgICAgXVxyXG4gICAgfSk7XHJcblxyXG4gICAgbW9kdWxlLnZhbHVlKCckcm91dGVyUm9vdENvbXBvbmVudCcsICdtZWRpYUFwcCcpO1xyXG5cclxufSkoKTsiLCIvL21lZGlhLWxpc3QuY29tcG9uZW50LmpzXHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgdmFyIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdtZWRpYScpO1xyXG5cclxuICAgIGZ1bmN0aW9uIGNvbnRyb2xsZXIoJHVpYk1vZGFsLCBzZXJ2aWNlKSB7XHJcbiAgICAgICAgdmFyICRjdHJsID0gdGhpcztcclxuICAgICAgICB2YXIgcGFnZVNpemVEZWZhdWx0ID0gMTA7XHJcbiAgICAgICAgdmFyIHRhYmxlU3RhdGVSZWY7XHJcblxyXG4gICAgICAgICRjdHJsLnNlYXJjaE1vZGVsID0ge1xyXG4gICAgICAgICAgICBwYWdlOiAxLFxyXG4gICAgICAgICAgICBwYWdlU2l6ZTogcGFnZVNpemVEZWZhdWx0XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJGN0cmwuJG9uSW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICRjdHJsLnNlYXJjaCA9IGZ1bmN0aW9uICh0YWJsZVN0YXRlKSB7XHJcbiAgICAgICAgICAgIHRhYmxlU3RhdGVSZWYgPSB0YWJsZVN0YXRlO1xyXG5cclxuICAgICAgICAgICAgc2VydmljZS5nZXRBbGxNZWRpYSgkY3RybC5zZWFyY2hNb2RlbCkudGhlbihmdW5jdGlvbiAocikge1xyXG4gICAgICAgICAgICAgICAgJGN0cmwubWVkaWEgPSByLnJlc3VsdHM7XHJcbiAgICAgICAgICAgICAgICAkY3RybC5zZWFyY2hNb2RlbCA9IHI7XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgJGN0cmwuc2VhcmNoTW9kZWwucmVzdWx0cztcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkY3RybC5wYWdlZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJGN0cmwuc2VhcmNoKHRhYmxlU3RhdGVSZWYpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJGN0cmwuc2hvd0RldGFpbHMgPSBmdW5jdGlvbiAoaWQpIHtcclxuICAgICAgICAgICAgJHVpYk1vZGFsLm9wZW4oe1xyXG4gICAgICAgICAgICAgICAgY29tcG9uZW50OiAnbWVkaWFTdW1tYXJ5JyxcclxuICAgICAgICAgICAgICAgIGJpbmRpbmdzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbW9kYWxJbnN0YW5jZTogXCI8XCJcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICByZXNvbHZlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWQ6IGlkLFxyXG4gICAgICAgICAgICAgICAgICAgIGFzTW9kYWw6IHRydWVcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBzaXplOiAnbGcnXHJcbiAgICAgICAgICAgIH0pLnJlc3VsdC50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuaW5mbyhcIkkgd2FzIGNsb3NlZCwgc28gZG8gd2hhdCBJIG5lZWQgdG8gZG8gbXlDb250ZW50J3MgY29udHJvbGxlciBub3cuICBSZXN1bHQgd2FzLT5cIik7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmluZm8ocmVzdWx0KTtcclxuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5pbmZvKFwiSSB3YXMgZGltaXNzZWQsIHNvIGRvIHdoYXQgSSBuZWVkIHRvIGRvIG15Q29udGVudCdzIGNvbnRyb2xsZXIgbm93LiAgUmVhc29uIHdhcy0+XCIgKyByZWFzb24pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbW9kdWxlLmNvbXBvbmVudCgnbGlzdCcsXHJcbiAgICB7XHJcbiAgICAgICAgdGVtcGxhdGVVcmw6ICdhcHAvbWVkaWEvbWVkaWEtbGlzdC5jb21wb25lbnQuaHRtbCcsXHJcbiAgICAgICAgY29udHJvbGxlcjogWyckdWliTW9kYWwnLCAnTWVkaWFTZXJ2aWNlJywgY29udHJvbGxlcl1cclxuICAgIH0pO1xyXG5cclxufVxyXG4pKCk7IiwiLy9tZWRpYS1zdW1tYXJ5LmNvbXBvbmVudC5qc1xyXG4oZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdtZWRpYScpO1xyXG5cclxuICAgIGZ1bmN0aW9uIGNvbnRyb2xsZXIoc2VydmljZSkge1xyXG4gICAgICAgIHZhciAkY3RybCA9IHRoaXM7XHJcblxyXG4gICAgICAgICRjdHJsLiRvbkluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdzdW1tYXJ5IGFjdGl2ZScpO1xyXG4gICAgICAgICAgICBpZiAoJGN0cmwucmVzb2x2ZSkge1xyXG4gICAgICAgICAgICAgICAgJGN0cmwuaWQgPSAkY3RybC5yZXNvbHZlLmlkO1xyXG4gICAgICAgICAgICAgICAgJGN0cmwuYXNNb2RhbCA9ICRjdHJsLnJlc29sdmUuYXNNb2RhbDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgc2VydmljZS5nZXRNZWRpYSgkY3RybC5pZCkudGhlbihmdW5jdGlvbiAocikge1xyXG4gICAgICAgICAgICAgICAgJGN0cmwubWVkaWEgPSByO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICRjdHJsLmNhbmNlbCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJGN0cmwuZGlzbWlzcygpO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgbW9kdWxlLmNvbXBvbmVudCgnbWVkaWFTdW1tYXJ5JyxcclxuICAgIHtcclxuICAgICAgICBiaW5kaW5nczoge1xyXG4gICAgICAgICAgICBpZDogJzwnLFxyXG4gICAgICAgICAgICBhc01vZGFsOiAnPCcsXHJcbiAgICAgICAgICAgIHJlc29sdmU6ICc8JyxcclxuICAgICAgICAgICAgY2xvc2U6ICcmJyxcclxuICAgICAgICAgICAgZGlzbWlzczogJyYnXHJcbiAgICAgICAgfSxcclxuICAgICAgICB0ZW1wbGF0ZVVybDogJ2FwcC9tZWRpYS9tZWRpYS1zdW1tYXJ5LmNvbXBvbmVudC5odG1sJyxcclxuICAgICAgICBjb250cm9sbGVyOiBbJ01lZGlhU2VydmljZScsIGNvbnRyb2xsZXJdXHJcbiAgICB9KTtcclxuXHJcbn1cclxuKSgpOyIsIi8vYXBwLnNlcnZpY2UuanNcclxuKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnYXBwLnNlcnZpY2UnLCBbXSk7XHJcbiAgICB9XHJcbikoKTsiLCIvL21lZGlhLnNlcnZpY2UuanNcclxuKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuICAgIHZhciBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnYXBwLnNlcnZpY2UnKS5mYWN0b3J5KCdNZWRpYVNlcnZpY2UnLCBtZWRpYVNlcnZpY2UpO1xyXG5cclxuICAgIGZ1bmN0aW9uIG1lZGlhU2VydmljZSgkaHR0cCkge1xyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBnZXRNZWRpYTogZ2V0TWVkaWEsIFxyXG4gICAgICAgICAgICBnZXRBbGxNZWRpYTogZ2V0QWxsTWVkaWFcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBnZXRNZWRpYShpZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KCdhcGkvbWVkaWEvJyArIGlkKS50aGVuKGZ1bmN0aW9uIChyKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZGF0YScsIHIuZGF0YSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gci5kYXRhO1xyXG4gICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIubWVzc2FnZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0QWxsTWVkaWEoc2VhcmNoTW9kZWwpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCgnYXBpL21lZGlhJywgeyBwYXJhbXM6IHNlYXJjaE1vZGVsIH0pLnRoZW4oZnVuY3Rpb24gKHIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByLmRhdGE7XHJcbiAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVyci5tZXNzYWdlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxufVxyXG4pKCk7Il19
