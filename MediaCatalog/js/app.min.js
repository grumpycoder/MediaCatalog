!function(){"use strict";var t=angular.module("app",["ngStorage","app.directives","shared.components","ui.bootstrap","smart-table","cp.ngConfirm","treasure-overlay-spinner","toastr"]);t.config(["toastrConfig",function(t){angular.extend(t,{positionClass:"toast-bottom-right",newestOnTop:!0,allowHtml:!1,closeButton:!1,closeHtml:"<button>&times;</button>",extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},messageClass:"toast-message",onHidden:null,onShown:null,onTap:null,progressBar:!1,tapToDismiss:!0,templates:{toast:"directives/toast/toast.html",progressbar:"directives/progressbar/progressbar.html"},timeOut:5e3,titleClass:"toast-title",toastClass:"toast"})}])}();
!function(){angular.module("shared.components",[])}();
!function(){function n(){var n=this;n.$onInit=function(){console.log("modal",n)}}var o=angular.module("app");o.component("confirmationModal",{bindings:{},template:"yes or no",controller:[n]})}();
!function(){function n(n,o){var e=this;e.$onInit=function(){n.get("api/publisher").then(function(n){e.publishers=n.data}).catch(function(n){console.log(n.message)})},e.create=function(){o.open({component:"publisherEdit",bindings:{modalInstance:"<"},size:"lg"}).result.then(function(n){console.info("I was closed, so do what I need to do myContent's controller now.  Result was->"),console.info("returning result",n),e.publishers.unshift(n),e.id=n.id},function(n){console.info("I was dimissed, so do what I need to do myContent's controller now.  Reason was->"+n)})},e.edit=function(){o.open({component:"publisherEdit",bindings:{modalInstance:"<"},resolve:{id:e.id},size:"lg"}).result.then(function(n){angular.forEach(e.publishers,function(o){o.id===e.id&&(angular.extend(o,n),e.id=o.id)})},function(n){console.info("I was dimissed, so do what I need to do myContent's controller now.  Reason was->"+n)})}}var o=angular.module("shared.components");o.component("publisherSelect",{bindings:{id:"="},templateUrl:"app/common/publisher-select.component.html",controller:["$http","$uibModal",n]})}();
!function(){angular.module("app.directives",[])}();
!function(){var e=angular.module("app.directives");e.directive("stSubmitSearch",["stConfig","$timeout","$parse",function(e,t,r){return{require:"^stTable",link:function(e,t,r,n){return t.bind("click",function(){var e=n;e.pipe()})}}}]),e.directive("clearKey",function(){return{restrict:"EA",require:"ngModel",link:function(e,t,r,n){t.on("keydown",function(t){27===t.which&&(n.$setViewValue(null),n.$render(),e.$apply())})}}}),e.directive("stResetSearch",function(){return{restrict:"EA",require:["^stTable","^ngModel"],link:function(e,t,r,n){return t.bind("click",function(){var t=n[1],r=n[0];return e.$apply(function(){angular.forEach(t.$viewValue,function(e,r){"page"===r.toLowerCase()&&(t.$viewValue[r]=1),Array.isArray(e)||_.includes(r.toLowerCase(),"page")||(t.$viewValue[r]=null)});var e=r.tableState();return e.search.predicateObject={},e.pagination.start=0,r.pipe()})})}}}),e.directive("stClearKey",function(){return{restrict:"EA",require:["^stTable","^ngModel"],link:function(e,t,r,n){t.on("keydown",function(r){var i=n[1],a=n[0];return 13===r.which?a.pipe():27===r.which?void 0!==t.context.attributes["st-search"]?e.$apply(function(){var e=t.context.attributes["st-search"].value,r=a.tableState();return r.search.predicateObject[e]="",a.pipe()}):e.$apply(function(){i.$setViewValue(null),i.$render()}):void 0})}}})}();
!function(){function t(t){var e=this;e.dateOptions={dateDisabled:!1,formatYear:"yy"},e.dateFormat="MM/DD/YYYY",e.$onInit=function(){e.title="New Media",e.resolve&&(e.id=e.resolve.id),e.id&&t.getProduct(e.id).then(function(t){e.product=t,e.title=t.title,e.product.receiptDate=new Date(t.receiptDate)})},e.cancel=function(){e.dismiss()},e.save=function(){return""===e.product.category&&(e.product.category=null),t.save(e.product).then(function(t){angular.extend(e.product,t),e.modalInstance.close(e.product)}).catch(function(t){console.log("Error saving product",t.message)}).finally(function(){})},e.publisherChanged=function(){console.log("publisher changed")}}var e=angular.module("app");e.component("productEdit",{templateUrl:"app/product/product-edit.component.html",bindings:{id:"<",resolve:"<",close:"&",dismiss:"&",modalInstance:"<"},controller:["Product",t]})}();
!function(){"use strict";function n(n,o,t,e){var i,s=this,d=15;s.searchModel={page:1,pageSize:d,filteredCount:0,totalCount:0,totalPages:0},s.$onInit=function(){console.log("product list init"),s.title="Media Library",s.loading=!0},s.search=function(n){s.loading=!0,i=n,e.getAllProducts(s.searchModel).then(function(n){s.products=n.results,s.searchModel=n,delete s.searchModel.results,s.loading=!1}).catch(function(n){s.loading=!1}).finally(function(){})},s.paged=function(){s.search(i)},s.create=function(){n.open({component:"productEdit",bindings:{modalInstance:"<"},size:"md"}).result.then(function(n){s.products.unshift(n),t.info("Created "+n.title)},function(n){console.info("I was dimissed, so do what I need to do myContent's controller now.  Reason was->"+n)})},s.edit=function(o){n.open({component:"productEdit",bindings:{modalInstance:"<"},resolve:{id:o.id},size:"md"}).result.then(function(n){angular.extend(o,n),t.info("Saved "+n.title)},function(n){console.log("reason",n)})},s.delete=function(n){o({title:"Delete",content:"Are you sure you want to delete <br /><strong>"+n.title+"</strong>?",type:"red",buttons:{yes:{keys:["y"],action:function(o,i){e.remove(n.id).then(function(o){var e=s.products.indexOf(n);s.products.splice(e,1),t.warning("Deleted "+n.title)})}},no:{keys:["N"],action:function(n,o){}}}})},s.showDetails=function(o){n.open({component:"productSummary",bindings:{modalInstance:"<"},resolve:{id:o.id,asModal:!0},size:"md"}).result.then(function(n){console.info("I was closed, so do what I need to do myContent's controller now.  Result was->"),angular.extend(o,n)},function(n){console.info("I was dimissed, so do what I need to do myContent's controller now.  Reason was->"+n)})}}var o=angular.module("app");o.component("productList",{templateUrl:"app/product/product-list.component.html",controller:["$uibModal","$ngConfirm","toastr","Product",n]})}();
!function(){function o(o,n){var t=this;t.$onInit=function(){t.loading=!0,t.resolve&&(t.id=t.resolve.id,t.asModal=t.resolve.asModal,t.addStaffVisible=!1),n.getProduct(t.id).then(function(o){t.product=o,t.loading=!1})},t.edit=function(){o.open({component:"productEdit",bindings:{modalInstance:"<"},resolve:{id:t.product.id},size:"md"}).result.then(function(o){angular.extend(t.product,o)},function(o){})},t.showNewStaff=function(){o.open({component:"staffEdit",bindings:{modalInstance:"<"},resolve:{productId:t.id},size:"md"}).result.then(function(o){console.info("I was closed, so do what I need to do myContent's controller now.  Result was->"),t.product.staff.unshift(o)},function(o){console.info("I was dimissed, so do what I need to do myContent's controller now.  Reason was->"+o)})},t.cancel=function(){t.modalInstance.close(t.product)}}var n=angular.module("app");n.component("productSummary",{bindings:{id:"<",asModal:"<",resolve:"<",close:"&",dismiss:"&",modalInstance:"<"},templateUrl:"app/product/product-summary.component.html",controller:["$uibModal","Product",o]})}();
!function(){function e(e){var n,t=[];for(n in e.modelState)if(e.modelState.hasOwnProperty(n))for(var s=0;s<e.modelState[n].length;s++)t.push(e.modelState[n][s]);return t}function n(n,t,s){var i=this;i.$onInit=function(){console.log("publisher edit init",i),i.title="New Publisher",i.publisher={},i.resolve&&(i.id=i.resolve.id),i.id&&n.get(i.id).then(function(e){i.publisher=e,i.title=e.name})},i.cancel=function(){i.dismiss()},i.save=function(){i.publisher.id?s.put("api/publisher",i.publisher).then(function(e){angular.extend(i.publisher,e.data),t.success("Saved Publisher ",i.publisher.name),i.modalInstance.close(i.publisher)}).catch(function(n){console.log("Oops. Something went wrong",n),t.error("Oops. Something happened: "+n.data.message),i.errors=e(n.data)}):s.post("api/publisher",i.publisher).then(function(e){angular.extend(i.publisher,e.data),t.success("Saved ",i.publisher.name),i.modalInstance.close(i.publisher)}).catch(function(n){console.log("Oops. Something went wrong",n),t.error("Oops. Something happened: "+n.data.message),i.errors=e(n.data)})}}var t=angular.module("app");t.component("publisherEdit",{bindings:{id:"<",resolve:"<",close:"&",dismiss:"&",modalInstance:"<"},templateUrl:"app/publishers/publisher-edit.component.html",controller:["Publisher","toastr","$http",n]})}();
!function(){"use strict";function t(t){function n(n){return t.get("api/product/"+n).then(function(t){return t.data}).catch(function(t){console.log(t.message)})}function e(n){return t.get("api/product",{params:n}).then(function(t){return t.data}).catch(function(t){console.log(t.message)})}function u(n){return t.delete("api/product/"+n).then(function(t){return t.data}).catch(function(t){console.log(t.message)})}function c(n){return n.id?t.put("api/product",n).then(function(t){return t.data}).catch(function(t){return t.message}):t.post("api/product",n).then(function(t){return t.data}).catch(function(t){return t.message})}return{getProduct:n,getAllProducts:e,remove:u,save:c}}var n=angular.module("app");n.factory("Product",["$http",t])}();
!function(){"use strict";function t(t,n){function e(e){return t.get("api/publisher/"+e).then(function(t){return t.data}).catch(function(t){console.log("Oops. Something happened getting publisher"),n.error("Oops. Somthing happened getting publisher: "+t.data.message)})}function o(){return t.get("api/publisher").then(function(t){return t.data}).catch(function(t){console.log(t.message)})}function r(n){return t.delete("api/publisher/"+n).then(function(t){return t.data}).catch(function(t){console.log(t.message)})}function u(n){return n.id?t.put("api/publisher",n).then(function(t){return t.data},function(t){return t}):(console.log("posting"),t.post("api/product",n).then(i,a))}function i(t){return console.log("success",t),t.data}function a(t){return console.log("error",t),t.data}return{get:e,getAllPublishers:o,remove:r,save:u}}var n=angular.module("app");n.factory("Publisher",["$http","toastr",t])}();
!function(){function t(t){var a=this;a.$onInit=function(){console.log("staff edit init"),a.title="New Staff",a.resolve&&(a.productId=a.resolve.productId),a.resolve.staff&&(a.staff=a.resolve.staff,a.title=a.staff.firstname+" "+a.staff.lastname)},a.cancel=function(){a.dismiss()},a.save=function(){a.productId?t.post("api/staff/"+a.productId,a.staff).then(function(t){angular.extend(a.staff,t.data),a.modalInstance.close(t.data)}).catch(function(t){console.log("something went wrong",t.message)}):t.post("api/staff",a.staff).then(function(t){angular.extend(a.staff,t.data),a.modalInstance.close(t.data)}).catch(function(t){console.log("something went wrong",t.message)})}}var a=angular.module("app");a.component("staffEdit",{bindings:{resolve:"<",close:"&",dismiss:"&",staff:"<",productId:"<",modalInstance:"<"},templateUrl:"app/staff/staff-edit.component.html",controller:["$http",t]})}();
!function(){function t(t,n,o){var e=this;e.$onInit=function(){console.log("staff list init")},e.edit=function(t){n.open({component:"staffEdit",bindings:{modalInstance:"<",staff:t},resolve:{staff:t},size:"md"}).result.then(function(t){console.info("I was closed, so do what I need to do myContent's controller now.  Result was->")},function(t){console.info("I was dimissed, so do what I need to do myContent's controller now.  Reason was->"+t)})},e.delete=function(n){o({title:"Delete",content:"Are you sure you want to delete <br /><strong>"+n.firstname+n.lastname+"</strong>?",type:"red",buttons:{yes:{keys:["y"],action:function(o,s){t.delete("api/staff/"+n.id).then(function(t){var o=e.staff.indexOf(n);e.staff.splice(o,1)}).catch(function(t){console.log("error",t.message)})}},no:{keys:["N"],action:function(t,n){}}}})}}var n=angular.module("app");n.component("staffList",{bindings:{staff:"<"},templateUrl:"app/staff/staff-list.component.html",controller:["$http","$uibModal","$ngConfirm",t]})}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5tb2R1bGUuanMiLCJjb21tb24vY29tcG9uZW50cy5tb2R1bGUuanMiLCJjb21tb24vY29uZnJtYXRpb24tbW9kYWwuY29tcG9uZW50LmpzIiwiY29tbW9uL3B1Ymxpc2hlci1zZWxlY3QuY29tcG9uZW50LmpzIiwiZGlyZWN0aXZlcy9kaXJlY3RpdmVzLm1vZHVsZXMuanMiLCJkaXJlY3RpdmVzL3N0VGFibGUuZGlyZWN0aXZlLmpzIiwicHJvZHVjdC9wcm9kdWN0LWVkaXQuY29tcG9uZW50LmpzIiwicHJvZHVjdC9wcm9kdWN0LWxpc3QuY29tcG9uZW50LmpzIiwicHJvZHVjdC9wcm9kdWN0LXN1bW1hcnkuY29tcG9uZW50LmpzIiwicHVibGlzaGVycy9wdWJsaXNoZXItZWRpdC5jb21wb25lbnQuanMiLCJzZXJ2aWNlcy9wcm9kdWN0LnNlcnZpY2UuanMiLCJzZXJ2aWNlcy9wdWJsaXNoZXIuc2VydmljZS5qcyIsInN0YWZmL3N0YWZmLWVkaXQuY29tcG9uZW50LmpzIiwic3RhZmYvc3RhZmYtbGlzdC5jb21wb25lbnQuanMiXSwibmFtZXMiOlsibW9kdWxlIiwiYW5ndWxhciIsImNvbmZpZyIsInRvYXN0ckNvbmZpZyIsImV4dGVuZCIsInBvc2l0aW9uQ2xhc3MiLCJuZXdlc3RPblRvcCIsImFsbG93SHRtbCIsImNsb3NlQnV0dG9uIiwiY2xvc2VIdG1sIiwiZXh0ZW5kZWRUaW1lT3V0IiwiaWNvbkNsYXNzZXMiLCJlcnJvciIsImluZm8iLCJzdWNjZXNzIiwid2FybmluZyIsIm1lc3NhZ2VDbGFzcyIsIm9uSGlkZGVuIiwib25TaG93biIsIm9uVGFwIiwicHJvZ3Jlc3NCYXIiLCJ0YXBUb0Rpc21pc3MiLCJ0ZW1wbGF0ZXMiLCJ0b2FzdCIsInByb2dyZXNzYmFyIiwidGltZU91dCIsInRpdGxlQ2xhc3MiLCJ0b2FzdENsYXNzIiwiY29udHJvbGxlciIsIiRjdHJsIiwidGhpcyIsIiRvbkluaXQiLCJjb25zb2xlIiwibG9nIiwiY29tcG9uZW50IiwiYmluZGluZ3MiLCJ0ZW1wbGF0ZSIsIiRodHRwIiwiJHVpYk1vZGFsIiwiZ2V0IiwidGhlbiIsInIiLCJwdWJsaXNoZXJzIiwiZGF0YSIsImNhdGNoIiwiZXJyIiwibWVzc2FnZSIsImNyZWF0ZSIsIm9wZW4iLCJtb2RhbEluc3RhbmNlIiwic2l6ZSIsInJlc3VsdCIsInVuc2hpZnQiLCJpZCIsInJlYXNvbiIsImVkaXQiLCJyZXNvbHZlIiwiZm9yRWFjaCIsIml0ZW0iLCJ0ZW1wbGF0ZVVybCIsImRpcmVjdGl2ZSIsInN0Q29uZmlnIiwiJHRpbWVvdXQiLCIkcGFyc2UiLCJyZXF1aXJlIiwibGluayIsInNjb3BlIiwiZWxlbWVudCIsImF0dHIiLCJjdHJsIiwiYmluZCIsInRhYmxlQ3RybCIsInBpcGUiLCJyZXN0cmljdCIsImVsIiwiYXR0cnMiLCJvbiIsImV2ZW50Iiwid2hpY2giLCIkc2V0Vmlld1ZhbHVlIiwiJHJlbmRlciIsIiRhcHBseSIsImN0cmxzIiwibW9kZWwiLCIkdmlld1ZhbHVlIiwidmFsdWUiLCJrZXkiLCJ0b0xvd2VyQ2FzZSIsIkFycmF5IiwiaXNBcnJheSIsIl8iLCJpbmNsdWRlcyIsInRhYmxlU3RhdGUiLCJzZWFyY2giLCJwcmVkaWNhdGVPYmplY3QiLCJwYWdpbmF0aW9uIiwic3RhcnQiLCJuZ01vZGVsIiwidW5kZWZpbmVkIiwiY29udGV4dCIsImF0dHJpYnV0ZXMiLCJmaWVsZE5hbWUiLCJzZXJ2aWNlIiwiZGF0ZU9wdGlvbnMiLCJkYXRlRGlzYWJsZWQiLCJmb3JtYXRZZWFyIiwiZGF0ZUZvcm1hdCIsInRpdGxlIiwiZ2V0UHJvZHVjdCIsInByb2R1Y3QiLCJyZWNlaXB0RGF0ZSIsIkRhdGUiLCJjYW5jZWwiLCJkaXNtaXNzIiwic2F2ZSIsImNhdGVnb3J5IiwiY2xvc2UiLCJmaW5hbGx5IiwicHVibGlzaGVyQ2hhbmdlZCIsIiRtb2RhbCIsIiRuZ0NvbmZpcm0iLCJ0b2FzdHIiLCJ0YWJsZVN0YXRlUmVmIiwicGFnZVNpemVEZWZhdWx0Iiwic2VhcmNoTW9kZWwiLCJwYWdlIiwicGFnZVNpemUiLCJmaWx0ZXJlZENvdW50IiwidG90YWxDb3VudCIsInRvdGFsUGFnZXMiLCJsb2FkaW5nIiwiZ2V0QWxsUHJvZHVjdHMiLCJwcm9kdWN0cyIsInJlc3VsdHMiLCJwYWdlZCIsImRlbGV0ZSIsImNvbnRlbnQiLCJ0eXBlIiwiYnV0dG9ucyIsInllcyIsImtleXMiLCJhY3Rpb24iLCJidXR0b24iLCJyZW1vdmUiLCJpZHgiLCJpbmRleE9mIiwic3BsaWNlIiwibm8iLCJzaG93RGV0YWlscyIsImFzTW9kYWwiLCJhZGRTdGFmZlZpc2libGUiLCJzaG93TmV3U3RhZmYiLCJwcm9kdWN0SWQiLCJzdGFmZiIsInBhcnNlRXJyb3JzIiwicmVzcG9uc2UiLCJlcnJvcnMiLCJtb2RlbFN0YXRlIiwiaGFzT3duUHJvcGVydHkiLCJpIiwibGVuZ3RoIiwicHVzaCIsInB1Ymxpc2hlciIsIm5hbWUiLCJwdXQiLCJwb3N0Iiwic2VydmljZUNvbnRyb2xsZXIiLCJwYXJhbXMiLCJmYWN0b3J5IiwiZ2V0QWxsUHVibGlzaGVycyIsIl9zdWNjZXNzIiwiX2ZhaWx1cmUiLCJmaXJzdG5hbWUiLCJsYXN0bmFtZSIsIm1lbWJlciJdLCJtYXBwaW5ncyI6IkNBQ0EsV0FDSSxZQUVBLElBQUlBLEdBQVNDLFFBQVFELE9BQU8sT0FFeEIsWUFDQSxpQkFDQSxvQkFDQSxlQUNBLGNBQ0EsZUFDQSwyQkFDQSxVQUdKQSxHQUFPRSxRQUFRLGVBQWdCLFNBQVVDLEdBQ3JDRixRQUFRRyxPQUFPRCxHQUNYRSxjQUFlLHFCQUNmQyxhQUFhLEVBQ2JDLFdBQVcsRUFDWEMsYUFBYSxFQUNiQyxVQUFXLDJCQUNYQyxnQkFBaUIsSUFDakJDLGFBQ0lDLE1BQU8sY0FDUEMsS0FBTSxhQUNOQyxRQUFTLGdCQUNUQyxRQUFTLGlCQUViQyxhQUFjLGdCQUNkQyxTQUFVLEtBQ1ZDLFFBQVMsS0FDVEMsTUFBTyxLQUNQQyxhQUFhLEVBQ2JDLGNBQWMsRUFDZEMsV0FDSUMsTUFBTyw4QkFDUEMsWUFBYSwyQ0FFakJDLFFB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R0FDbEQsR0FBSXVHLEdBQU1uSCxFQUFNNEgsTUFBTVIsUUFBUTZCLEVBQzlCakosR0FBTTRILE1BQU1QLE9BQU9GLEVBQUssS0FDekJwRyxNQUFNLFNBQVVDLEdBQ2ZiLFFBQVFDLElBQUksUUFBU1ksRUFBSUMsYUFJckNxRyxJQUNJUCxNQUFPLEtBQ1BDLE9BQVEsU0FBVTNFLEVBQU80RSxVQS9DN0MsR0FBSTlJLEdBQVNDLFFBQVFELE9BQU8sTUF5RDVCQSxHQUFPa0MsVUFBVSxhQUVUQyxVQUNJc0gsTUFBTyxLQUVYOUYsWUFBYSxzQ0FDYi9CLFlBQWEsUUFBUyxZQUFhLGFBQWNBIiwiZmlsZSI6ImFwcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvL2FwcC5tb2R1bGUuanNcclxuKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICB2YXIgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ2FwcCcsXHJcbiAgICBbXHJcbiAgICAgICAgJ25nU3RvcmFnZScsXHJcbiAgICAgICAgJ2FwcC5kaXJlY3RpdmVzJyxcclxuICAgICAgICAnc2hhcmVkLmNvbXBvbmVudHMnLFxyXG4gICAgICAgICd1aS5ib290c3RyYXAnLFxyXG4gICAgICAgICdzbWFydC10YWJsZScsXHJcbiAgICAgICAgJ2NwLm5nQ29uZmlybScsIFxyXG4gICAgICAgICd0cmVhc3VyZS1vdmVybGF5LXNwaW5uZXInLCBcclxuICAgICAgICAndG9hc3RyJ1xyXG4gICAgICAgIF0pO1xyXG5cclxuICAgIG1vZHVsZS5jb25maWcoWyd0b2FzdHJDb25maWcnLCBmdW5jdGlvbiAodG9hc3RyQ29uZmlnKSB7XHJcbiAgICAgICAgYW5ndWxhci5leHRlbmQodG9hc3RyQ29uZmlnLCB7XHJcbiAgICAgICAgICAgIHBvc2l0aW9uQ2xhc3M6ICd0b2FzdC1ib3R0b20tcmlnaHQnLFxyXG4gICAgICAgICAgICBuZXdlc3RPblRvcDogdHJ1ZSxcclxuICAgICAgICAgICAgYWxsb3dIdG1sOiBmYWxzZSxcclxuICAgICAgICAgICAgY2xvc2VCdXR0b246IGZhbHNlLFxyXG4gICAgICAgICAgICBjbG9zZUh0bWw6ICc8YnV0dG9uPiZ0aW1lczs8L2J1dHRvbj4nLFxyXG4gICAgICAgICAgICBleHRlbmRlZFRpbWVPdXQ6IDEwMDAsXHJcbiAgICAgICAgICAgIGljb25DbGFzc2VzOiB7XHJcbiAgICAgICAgICAgICAgICBlcnJvcjogJ3RvYXN0LWVycm9yJyxcclxuICAgICAgICAgICAgICAgIGluZm86ICd0b2FzdC1pbmZvJyxcclxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6ICd0b2FzdC1zdWNjZXNzJyxcclxuICAgICAgICAgICAgICAgIHdhcm5pbmc6ICd0b2FzdC13YXJuaW5nJ1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBtZXNzYWdlQ2xhc3M6ICd0b2FzdC1tZXNzYWdlJyxcclxuICAgICAgICAgICAgb25IaWRkZW46IG51bGwsXHJcbiAgICAgICAgICAgIG9uU2hvd246IG51bGwsXHJcbiAgICAgICAgICAgIG9uVGFwOiBudWxsLFxyXG4gICAgICAgICAgICBwcm9ncmVzc0JhcjogZmFsc2UsXHJcbiAgICAgICAgICAgIHRhcFRvRGlzbWlzczogdHJ1ZSxcclxuICAgICAgICAgICAgdGVtcGxhdGVzOiB7XHJcbiAgICAgICAgICAgICAgICB0b2FzdDogJ2RpcmVjdGl2ZXMvdG9hc3QvdG9hc3QuaHRtbCcsXHJcbiAgICAgICAgICAgICAgICBwcm9ncmVzc2JhcjogJ2RpcmVjdGl2ZXMvcHJvZ3Jlc3NiYXIvcHJvZ3Jlc3NiYXIuaHRtbCdcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgdGltZU91dDogNTAwMCxcclxuICAgICAgICAgICAgdGl0bGVDbGFzczogJ3RvYXN0LXRpdGxlJyxcclxuICAgICAgICAgICAgdG9hc3RDbGFzczogJ3RvYXN0J1xyXG4gICAgICAgIH0pO1xyXG4gICAgfV0pO1xyXG59KSgpOyIsIi8vc2hhcmVkLWNvbXBvbmVudHMubW9kdWxlLmpzXHJcbihmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ3NoYXJlZC5jb21wb25lbnRzJywgW10pO1xyXG4gICAgfVxyXG4pKCk7IiwiLy9jb25mcm1hdGlvbi1tb2RhbC5jb21wb25lbnQuanNcclxuKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnYXBwJyk7XHJcblxyXG4gICAgZnVuY3Rpb24gY29udHJvbGxlcigpIHtcclxuICAgICAgICB2YXIgJGN0cmwgPSB0aGlzOyBcclxuXHJcbiAgICAgICAgJGN0cmwuJG9uSW5pdCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnbW9kYWwnLCAkY3RybCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICBtb2R1bGUuY29tcG9uZW50KCdjb25maXJtYXRpb25Nb2RhbCcsXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBiaW5kaW5nczoge1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZTogJ3llcyBvciBubycsXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6IFtjb250cm9sbGVyXVxyXG4gICAgICAgIH0pO1xyXG59XHJcbikoKTsiLCIvL3B1Ymxpc2hlci1saXN0LmNvbXBvbmVudC5qc1xyXG4oZnVuY3Rpb24gKCkge1xyXG5cclxuICAgIHZhciBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnc2hhcmVkLmNvbXBvbmVudHMnKTtcclxuXHJcbiAgICBmdW5jdGlvbiBjb250cm9sbGVyKCRodHRwLCAkdWliTW9kYWwpIHtcclxuICAgICAgICB2YXIgJGN0cmwgPSB0aGlzO1xyXG5cclxuICAgICAgICAkY3RybC4kb25Jbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkaHR0cC5nZXQoJ2FwaS9wdWJsaXNoZXInKS50aGVuKGZ1bmN0aW9uIChyKSB7XHJcbiAgICAgICAgICAgICAgICAkY3RybC5wdWJsaXNoZXJzID0gci5kYXRhO1xyXG4gICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIubWVzc2FnZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJGN0cmwuY3JlYXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkdWliTW9kYWwub3Blbih7XHJcbiAgICAgICAgICAgICAgICBjb21wb25lbnQ6ICdwdWJsaXNoZXJFZGl0JyxcclxuICAgICAgICAgICAgICAgIGJpbmRpbmdzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbW9kYWxJbnN0YW5jZTogXCI8XCJcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBzaXplOiAnbGcnXHJcbiAgICAgICAgICAgIH0pLnJlc3VsdC50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuaW5mbyhcIkkgd2FzIGNsb3NlZCwgc28gZG8gd2hhdCBJIG5lZWQgdG8gZG8gbXlDb250ZW50J3MgY29udHJvbGxlciBub3cuICBSZXN1bHQgd2FzLT5cIik7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmluZm8oJ3JldHVybmluZyByZXN1bHQnLCByZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgJGN0cmwucHVibGlzaGVycy51bnNoaWZ0KHJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICAkY3RybC5pZCA9IHJlc3VsdC5pZDtcclxuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5pbmZvKFwiSSB3YXMgZGltaXNzZWQsIHNvIGRvIHdoYXQgSSBuZWVkIHRvIGRvIG15Q29udGVudCdzIGNvbnRyb2xsZXIgbm93LiAgUmVhc29uIHdhcy0+XCIgKyByZWFzb24pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICRjdHJsLmVkaXQgPSBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICAkdWliTW9kYWwub3Blbih7XHJcbiAgICAgICAgICAgICAgICBjb21wb25lbnQ6ICdwdWJsaXNoZXJFZGl0JyxcclxuICAgICAgICAgICAgICAgIGJpbmRpbmdzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbW9kYWxJbnN0YW5jZTogXCI8XCJcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICByZXNvbHZlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWQ6ICRjdHJsLmlkXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgc2l6ZTogJ2xnJ1xyXG4gICAgICAgICAgICB9KS5yZXN1bHQudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBhbmd1bGFyLmZvckVhY2goJGN0cmwucHVibGlzaGVycywgZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbS5pZCA9PT0gJGN0cmwuaWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYW5ndWxhci5leHRlbmQoaXRlbSwgcmVzdWx0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJGN0cmwuaWQgPSBpdGVtLmlkO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5pbmZvKFwiSSB3YXMgZGltaXNzZWQsIHNvIGRvIHdoYXQgSSBuZWVkIHRvIGRvIG15Q29udGVudCdzIGNvbnRyb2xsZXIgbm93LiAgUmVhc29uIHdhcy0+XCIgKyByZWFzb24pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbW9kdWxlLmNvbXBvbmVudCgncHVibGlzaGVyU2VsZWN0JyxcclxuICAgIHtcclxuICAgICAgICBiaW5kaW5nczoge1xyXG4gICAgICAgICAgICBpZDogJz0nXHJcbiAgICAgICAgfSxcclxuICAgICAgICB0ZW1wbGF0ZVVybDogJ2FwcC9jb21tb24vcHVibGlzaGVyLXNlbGVjdC5jb21wb25lbnQuaHRtbCcsXHJcbiAgICAgICAgY29udHJvbGxlcjogWyckaHR0cCcsICckdWliTW9kYWwnLCBjb250cm9sbGVyXVxyXG4gICAgfSk7XHJcblxyXG5cclxufVxyXG4pKCk7IiwiLy9kaXJlY3RpdmVzLm1vZHVsZXMuanNcclxuKGZ1bmN0aW9uKCkge1xyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC5kaXJlY3RpdmVzJywgW10pOyBcclxufSkoKTsiLCIvL3N0VGFibGUuZGlyZWN0aXZlLmpzXHJcbihmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgdmFyIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdhcHAuZGlyZWN0aXZlcycpO1xyXG5cclxuICAgIG1vZHVsZS5kaXJlY3RpdmUoJ3N0U3VibWl0U2VhcmNoJywgWydzdENvbmZpZycsICckdGltZW91dCcsICckcGFyc2UnLCBmdW5jdGlvbiAoc3RDb25maWcsICR0aW1lb3V0LCAkcGFyc2UpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICByZXF1aXJlOiAnXnN0VGFibGUnLFxyXG4gICAgICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsZW1lbnQsIGF0dHIsIGN0cmwpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlbGVtZW50LmJpbmQoJ2NsaWNrJyxcclxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YWJsZUN0cmwgPSBjdHJsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWJsZUN0cmwucGlwZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9XSk7XHJcblxyXG4gICAgbW9kdWxlLmRpcmVjdGl2ZShcImNsZWFyS2V5XCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICByZXN0cmljdDogJ0VBJyxcclxuICAgICAgICAgICAgcmVxdWlyZTogJ25nTW9kZWwnLFxyXG4gICAgICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsLCBhdHRycywgY3RybCkge1xyXG4gICAgICAgICAgICAgICAgZWwub24oJ2tleWRvd24nLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQud2hpY2ggIT09IDI3KSB7IHJldHVybjsgfSAvLyBjaGVjayBrZXkgaG93IHlvdSB3YW50XHJcbiAgICAgICAgICAgICAgICAgICAgY3RybC4kc2V0Vmlld1ZhbHVlKG51bGwpO1xyXG4gICAgICAgICAgICAgICAgICAgIGN0cmwuJHJlbmRlcigpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLiRhcHBseSgpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfSk7XHJcblxyXG5cclxuICAgIG1vZHVsZS5kaXJlY3RpdmUoXCJzdFJlc2V0U2VhcmNoXCIsXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdHJpY3Q6ICdFQScsXHJcbiAgICAgICAgICAgICAgICAgICAgcmVxdWlyZTogWydec3RUYWJsZScsICdebmdNb2RlbCddLFxyXG4gICAgICAgICAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWxlbWVudCwgYXR0cnMsIGN0cmxzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlbGVtZW50LmJpbmQoJ2NsaWNrJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbW9kZWwgPSBjdHJsc1sxXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3RybCA9IGN0cmxzWzBdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2NvcGUuJGFwcGx5KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKG1vZGVsLiR2aWV3VmFsdWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAodmFsdWUsIGtleSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChrZXkudG9Mb3dlckNhc2UoKSA9PT0gJ3BhZ2UnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVsLiR2aWV3VmFsdWVba2V5XSA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSB8fCBfLmluY2x1ZGVzKGtleS50b0xvd2VyQ2FzZSgpLCAncGFnZScpKSByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kZWwuJHZpZXdWYWx1ZVtrZXldID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFibGVTdGF0ZSA9IGN0cmwudGFibGVTdGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJsZVN0YXRlLnNlYXJjaC5wcmVkaWNhdGVPYmplY3QgPSB7fTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGVTdGF0ZS5wYWdpbmF0aW9uLnN0YXJ0ID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGN0cmwucGlwZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgbW9kdWxlLmRpcmVjdGl2ZShcInN0Q2xlYXJLZXlcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnRUEnLFxyXG4gICAgICAgICAgICByZXF1aXJlOiBbJ15zdFRhYmxlJywgJ15uZ01vZGVsJ10sXHJcbiAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWxlbWVudCwgYXR0cnMsIGN0cmxzKSB7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50Lm9uKCdrZXlkb3duJywgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5nTW9kZWwgPSBjdHJsc1sxXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY3RybCA9IGN0cmxzWzBdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQud2hpY2ggPT09IDEzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjdHJsLnBpcGUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50LndoaWNoID09PSAyNykge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQuY29udGV4dC5hdHRyaWJ1dGVzWydzdC1zZWFyY2gnXSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2NvcGUuJGFwcGx5KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZmllbGROYW1lID0gZWxlbWVudC5jb250ZXh0LmF0dHJpYnV0ZXNbJ3N0LXNlYXJjaCddLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YWJsZVN0YXRlID0gY3RybC50YWJsZVN0YXRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGVTdGF0ZS5zZWFyY2gucHJlZGljYXRlT2JqZWN0W2ZpZWxkTmFtZV0gPSAnJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3RybC5waXBlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2NvcGUuJGFwcGx5KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZ01vZGVsLiRzZXRWaWV3VmFsdWUobnVsbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmdNb2RlbC4kcmVuZGVyKCk7IC8vIHdpbGwgdXBkYXRlIHRoZSBpbnB1dCB2YWx1ZSBhcyB3ZWxsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9KTtcclxuXHJcbn1cclxuKSgpOyIsIi8vcHJvZHVjdC1lZGl0LmNvbXBvbmVudC5qc1xyXG4oZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdhcHAnKTtcclxuXHJcbiAgICBmdW5jdGlvbiBjb250cm9sbGVyKHNlcnZpY2UpIHtcclxuICAgICAgICB2YXIgJGN0cmwgPSB0aGlzO1xyXG5cclxuICAgICAgICAkY3RybC5kYXRlT3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgZGF0ZURpc2FibGVkOiBmYWxzZSxcclxuICAgICAgICAgICAgZm9ybWF0WWVhcjogJ3l5J1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgJGN0cmwuZGF0ZUZvcm1hdCA9IFwiTU0vREQvWVlZWVwiO1xyXG5cclxuICAgICAgICAkY3RybC4kb25Jbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkY3RybC50aXRsZSA9ICdOZXcgTWVkaWEnO1xyXG4gICAgICAgICAgICBpZiAoJGN0cmwucmVzb2x2ZSkge1xyXG4gICAgICAgICAgICAgICAgJGN0cmwuaWQgPSAkY3RybC5yZXNvbHZlLmlkO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICgkY3RybC5pZCkge1xyXG4gICAgICAgICAgICAgICAgc2VydmljZS5nZXRQcm9kdWN0KCRjdHJsLmlkKS50aGVuKGZ1bmN0aW9uIChyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJGN0cmwucHJvZHVjdCA9IHI7XHJcbiAgICAgICAgICAgICAgICAgICAgJGN0cmwudGl0bGUgPSByLnRpdGxlO1xyXG4gICAgICAgICAgICAgICAgICAgICRjdHJsLnByb2R1Y3QucmVjZWlwdERhdGUgPSBuZXcgRGF0ZShyLnJlY2VpcHREYXRlKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkY3RybC5jYW5jZWwgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICRjdHJsLmRpc21pc3MoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICRjdHJsLnNhdmUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICgkY3RybC5wcm9kdWN0LmNhdGVnb3J5ID09PSAnJykgJGN0cmwucHJvZHVjdC5jYXRlZ29yeSA9IG51bGw7XHJcbiAgICAgICAgICAgIHJldHVybiBzZXJ2aWNlLnNhdmUoJGN0cmwucHJvZHVjdCkudGhlbihmdW5jdGlvbiAocikge1xyXG4gICAgICAgICAgICAgICAgYW5ndWxhci5leHRlbmQoJGN0cmwucHJvZHVjdCwgcik7XHJcbiAgICAgICAgICAgICAgICAkY3RybC5tb2RhbEluc3RhbmNlLmNsb3NlKCRjdHJsLnByb2R1Y3QpO1xyXG4gICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnRXJyb3Igc2F2aW5nIHByb2R1Y3QnLCBlcnIubWVzc2FnZSk7XHJcbiAgICAgICAgICAgIH0pLmZpbmFsbHkoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICRjdHJsLnB1Ymxpc2hlckNoYW5nZWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdwdWJsaXNoZXIgY2hhbmdlZCcpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBtb2R1bGUuY29tcG9uZW50KCdwcm9kdWN0RWRpdCcsXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2FwcC9wcm9kdWN0L3Byb2R1Y3QtZWRpdC5jb21wb25lbnQuaHRtbCcsXHJcbiAgICAgICAgICAgIGJpbmRpbmdzOiB7XHJcbiAgICAgICAgICAgICAgICBpZDogJzwnLFxyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZTogJzwnLFxyXG4gICAgICAgICAgICAgICAgY2xvc2U6ICcmJyxcclxuICAgICAgICAgICAgICAgIGRpc21pc3M6ICcmJyxcclxuICAgICAgICAgICAgICAgIG1vZGFsSW5zdGFuY2U6ICc8J1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBjb250cm9sbGVyOiBbJ1Byb2R1Y3QnLCBjb250cm9sbGVyXVxyXG4gICAgICAgIH0pO1xyXG59KSgpO1xyXG4iLCIvL3Byb2R1Y3QtbGlzdC5jb21wb25lbnQuanNcclxuKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICB2YXIgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ2FwcCcpO1xyXG5cclxuICAgIGZ1bmN0aW9uIGNvbnRyb2xsZXIoJG1vZGFsLCAkbmdDb25maXJtLCB0b2FzdHIsIHByb2R1Y3QpIHtcclxuICAgICAgICB2YXIgJGN0cmwgPSB0aGlzO1xyXG4gICAgICAgIHZhciBwYWdlU2l6ZURlZmF1bHQgPSAxNTtcclxuICAgICAgICB2YXIgdGFibGVTdGF0ZVJlZjtcclxuXHJcbiAgICAgICAgJGN0cmwuc2VhcmNoTW9kZWwgPSB7XHJcbiAgICAgICAgICAgIHBhZ2U6IDEsXHJcbiAgICAgICAgICAgIHBhZ2VTaXplOiBwYWdlU2l6ZURlZmF1bHQsIFxyXG4gICAgICAgICAgICBmaWx0ZXJlZENvdW50OiAwLCBcclxuICAgICAgICAgICAgdG90YWxDb3VudDogMCwgXHJcbiAgICAgICAgICAgIHRvdGFsUGFnZXM6IDBcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkY3RybC4kb25Jbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygncHJvZHVjdCBsaXN0IGluaXQnKTtcclxuICAgICAgICAgICAgJGN0cmwudGl0bGUgPSAnTWVkaWEgTGlicmFyeSc7XHJcbiAgICAgICAgICAgICRjdHJsLmxvYWRpbmcgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJGN0cmwuc2VhcmNoID0gZnVuY3Rpb24gKHRhYmxlU3RhdGUpIHtcclxuICAgICAgICAgICAgJGN0cmwubG9hZGluZyA9IHRydWU7XHJcbiAgICAgICAgICAgIHRhYmxlU3RhdGVSZWYgPSB0YWJsZVN0YXRlO1xyXG4gICAgICAgICAgICBwcm9kdWN0LmdldEFsbFByb2R1Y3RzKCRjdHJsLnNlYXJjaE1vZGVsKS50aGVuKGZ1bmN0aW9uIChyKSB7XHJcbiAgICAgICAgICAgICAgICAkY3RybC5wcm9kdWN0cyA9IHIucmVzdWx0cztcclxuICAgICAgICAgICAgICAgICRjdHJsLnNlYXJjaE1vZGVsID0gcjtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSAkY3RybC5zZWFyY2hNb2RlbC5yZXN1bHRzO1xyXG4gICAgICAgICAgICAgICAgJGN0cmwubG9hZGluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAkY3RybC5sb2FkaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH0pLmZpbmFsbHkoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICRjdHJsLnBhZ2VkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkY3RybC5zZWFyY2godGFibGVTdGF0ZVJlZik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkY3RybC5jcmVhdGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICRtb2RhbC5vcGVuKHtcclxuICAgICAgICAgICAgICAgIGNvbXBvbmVudDogJ3Byb2R1Y3RFZGl0JyxcclxuICAgICAgICAgICAgICAgIGJpbmRpbmdzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbW9kYWxJbnN0YW5jZTogXCI8XCJcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBzaXplOiAnbWQnXHJcbiAgICAgICAgICAgIH0pLnJlc3VsdC50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICRjdHJsLnByb2R1Y3RzLnVuc2hpZnQocmVzdWx0KTtcclxuICAgICAgICAgICAgICAgIHRvYXN0ci5pbmZvKCdDcmVhdGVkICcgKyByZXN1bHQudGl0bGUpO1xyXG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmluZm8oXCJJIHdhcyBkaW1pc3NlZCwgc28gZG8gd2hhdCBJIG5lZWQgdG8gZG8gbXlDb250ZW50J3MgY29udHJvbGxlciBub3cuICBSZWFzb24gd2FzLT5cIiArIHJlYXNvbik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJGN0cmwuZWRpdCA9IGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgICAgICAgICAgICRtb2RhbC5vcGVuKHtcclxuICAgICAgICAgICAgICAgIGNvbXBvbmVudDogJ3Byb2R1Y3RFZGl0JyxcclxuICAgICAgICAgICAgICAgIGJpbmRpbmdzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbW9kYWxJbnN0YW5jZTogXCI8XCJcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICByZXNvbHZlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWQ6IGl0ZW0uaWRcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBzaXplOiAnbWQnXHJcbiAgICAgICAgICAgIH0pLnJlc3VsdC50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGFuZ3VsYXIuZXh0ZW5kKGl0ZW0sIHJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICB0b2FzdHIuaW5mbygnU2F2ZWQgJyArIHJlc3VsdC50aXRsZSk7XHJcbiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3JlYXNvbicsIHJlYXNvbik7XHJcblxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICRjdHJsLmRlbGV0ZSA9IGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgICAgICAgICAgICRuZ0NvbmZpcm0oe1xyXG4gICAgICAgICAgICAgICAgdGl0bGU6ICdEZWxldGUnLFxyXG4gICAgICAgICAgICAgICAgY29udGVudDogJ0FyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgPGJyIC8+PHN0cm9uZz4nICsgaXRlbS50aXRsZSArICc8L3N0cm9uZz4/JyxcclxuICAgICAgICAgICAgICAgIHR5cGU6ICdyZWQnLFxyXG4gICAgICAgICAgICAgICAgYnV0dG9uczoge1xyXG4gICAgICAgICAgICAgICAgICAgIHllczoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXlzOiBbJ3knXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBmdW5jdGlvbiAoc2NvcGUsIGJ1dHRvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZHVjdC5yZW1vdmUoaXRlbS5pZCkudGhlbihmdW5jdGlvbiAocikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpZHggPSAkY3RybC5wcm9kdWN0cy5pbmRleE9mKGl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRjdHJsLnByb2R1Y3RzLnNwbGljZShpZHgsIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvYXN0ci53YXJuaW5nKCdEZWxldGVkICcgKyBpdGVtLnRpdGxlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBubzoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXlzOiBbJ04nXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBmdW5jdGlvbiAoc2NvcGUsIGJ1dHRvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICRjdHJsLnNob3dEZXRhaWxzID0gZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgICAgICAgJG1vZGFsLm9wZW4oe1xyXG4gICAgICAgICAgICAgICAgY29tcG9uZW50OiAncHJvZHVjdFN1bW1hcnknLFxyXG4gICAgICAgICAgICAgICAgYmluZGluZ3M6IHtcclxuICAgICAgICAgICAgICAgICAgICBtb2RhbEluc3RhbmNlOiBcIjxcIlxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHJlc29sdmU6IHtcclxuICAgICAgICAgICAgICAgICAgICBpZDogaXRlbS5pZCxcclxuICAgICAgICAgICAgICAgICAgICBhc01vZGFsOiB0cnVlXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgc2l6ZTogJ21kJ1xyXG4gICAgICAgICAgICB9KS5yZXN1bHQudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmluZm8oXCJJIHdhcyBjbG9zZWQsIHNvIGRvIHdoYXQgSSBuZWVkIHRvIGRvIG15Q29udGVudCdzIGNvbnRyb2xsZXIgbm93LiAgUmVzdWx0IHdhcy0+XCIpO1xyXG4gICAgICAgICAgICAgICAgYW5ndWxhci5leHRlbmQoaXRlbSwgcmVzdWx0KTtcclxuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5pbmZvKFwiSSB3YXMgZGltaXNzZWQsIHNvIGRvIHdoYXQgSSBuZWVkIHRvIGRvIG15Q29udGVudCdzIGNvbnRyb2xsZXIgbm93LiAgUmVhc29uIHdhcy0+XCIgKyByZWFzb24pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbW9kdWxlLmNvbXBvbmVudCgncHJvZHVjdExpc3QnLFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdhcHAvcHJvZHVjdC9wcm9kdWN0LWxpc3QuY29tcG9uZW50Lmh0bWwnLFxyXG4gICAgICAgICAgICBjb250cm9sbGVyOiBbJyR1aWJNb2RhbCcsICckbmdDb25maXJtJywgJ3RvYXN0cicsICdQcm9kdWN0JywgY29udHJvbGxlcl1cclxuICAgICAgICB9KTtcclxuXHJcbn1cclxuKSgpOyIsIi8vcHJvZHVjdC1zdW1tYXJ5LmNvbXBvbmVudC5qc1xyXG4oZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdhcHAnKTtcclxuXHJcbiAgICBmdW5jdGlvbiBjb250cm9sbGVyKCRtb2RhbCwgc2VydmljZSkge1xyXG4gICAgICAgIHZhciAkY3RybCA9IHRoaXM7XHJcblxyXG4gICAgICAgICRjdHJsLiRvbkluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICRjdHJsLmxvYWRpbmcgPSB0cnVlOyBcclxuICAgICAgICAgICAgaWYgKCRjdHJsLnJlc29sdmUpIHtcclxuICAgICAgICAgICAgICAgICRjdHJsLmlkID0gJGN0cmwucmVzb2x2ZS5pZDtcclxuICAgICAgICAgICAgICAgICRjdHJsLmFzTW9kYWwgPSAkY3RybC5yZXNvbHZlLmFzTW9kYWw7XHJcbiAgICAgICAgICAgICAgICAkY3RybC5hZGRTdGFmZlZpc2libGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgc2VydmljZS5nZXRQcm9kdWN0KCRjdHJsLmlkKS50aGVuKGZ1bmN0aW9uIChyKSB7XHJcbiAgICAgICAgICAgICAgICAkY3RybC5wcm9kdWN0ID0gcjtcclxuICAgICAgICAgICAgICAgICRjdHJsLmxvYWRpbmcgPSBmYWxzZTsgXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJGN0cmwuZWRpdCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAkbW9kYWwub3Blbih7XHJcbiAgICAgICAgICAgICAgICBjb21wb25lbnQ6ICdwcm9kdWN0RWRpdCcsXHJcbiAgICAgICAgICAgICAgICBiaW5kaW5nczoge1xyXG4gICAgICAgICAgICAgICAgICAgIG1vZGFsSW5zdGFuY2U6IFwiPFwiXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZToge1xyXG4gICAgICAgICAgICAgICAgICAgIGlkOiAkY3RybC5wcm9kdWN0LmlkXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgc2l6ZTogJ21kJ1xyXG4gICAgICAgICAgICB9KS5yZXN1bHQudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBhbmd1bGFyLmV4dGVuZCgkY3RybC5wcm9kdWN0LCByZXN1bHQpO1xyXG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJGN0cmwuc2hvd05ld1N0YWZmID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICRtb2RhbC5vcGVuKHtcclxuICAgICAgICAgICAgICAgIGNvbXBvbmVudDogJ3N0YWZmRWRpdCcsXHJcbiAgICAgICAgICAgICAgICBiaW5kaW5nczoge1xyXG4gICAgICAgICAgICAgICAgICAgIG1vZGFsSW5zdGFuY2U6IFwiPFwiXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZToge1xyXG4gICAgICAgICAgICAgICAgICAgIHByb2R1Y3RJZDogJGN0cmwuaWRcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBzaXplOiAnbWQnXHJcbiAgICAgICAgICAgIH0pLnJlc3VsdC50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuaW5mbyhcIkkgd2FzIGNsb3NlZCwgc28gZG8gd2hhdCBJIG5lZWQgdG8gZG8gbXlDb250ZW50J3MgY29udHJvbGxlciBub3cuICBSZXN1bHQgd2FzLT5cIik7XHJcbiAgICAgICAgICAgICAgICAkY3RybC5wcm9kdWN0LnN0YWZmLnVuc2hpZnQocmVzdWx0KTtcclxuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5pbmZvKFwiSSB3YXMgZGltaXNzZWQsIHNvIGRvIHdoYXQgSSBuZWVkIHRvIGRvIG15Q29udGVudCdzIGNvbnRyb2xsZXIgbm93LiAgUmVhc29uIHdhcy0+XCIgKyByZWFzb24pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICRjdHJsLmNhbmNlbCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJGN0cmwubW9kYWxJbnN0YW5jZS5jbG9zZSgkY3RybC5wcm9kdWN0KTtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIG1vZHVsZS5jb21wb25lbnQoJ3Byb2R1Y3RTdW1tYXJ5JyxcclxuICAgIHtcclxuICAgICAgICBiaW5kaW5nczoge1xyXG4gICAgICAgICAgICBpZDogJzwnLFxyXG4gICAgICAgICAgICBhc01vZGFsOiAnPCcsXHJcbiAgICAgICAgICAgIHJlc29sdmU6ICc8JyxcclxuICAgICAgICAgICAgY2xvc2U6ICcmJyxcclxuICAgICAgICAgICAgZGlzbWlzczogJyYnLCBcclxuICAgICAgICAgICAgbW9kYWxJbnN0YW5jZTogJzwnXHJcbiAgICAgICAgfSxcclxuICAgICAgICB0ZW1wbGF0ZVVybDogJ2FwcC9wcm9kdWN0L3Byb2R1Y3Qtc3VtbWFyeS5jb21wb25lbnQuaHRtbCcsXHJcbiAgICAgICAgY29udHJvbGxlcjogWyckdWliTW9kYWwnLCAnUHJvZHVjdCcsIGNvbnRyb2xsZXJdXHJcbiAgICB9KTtcclxuXHJcbn1cclxuKSgpOyIsIi8vcHVibGlzaGVyLWVkaXQuY29tcG9uZW50LmpzXHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ2FwcCcpO1xyXG5cclxuICAgIGZ1bmN0aW9uIHBhcnNlRXJyb3JzKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgdmFyIGVycm9ycyA9IFtdO1xyXG4gICAgICAgIHZhciBrZXk7XHJcblxyXG4gICAgICAgIGZvciAoa2V5IGluIHJlc3BvbnNlLm1vZGVsU3RhdGUpIHtcclxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLm1vZGVsU3RhdGUuaGFzT3duUHJvcGVydHkoa2V5KSkge1xyXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZXNwb25zZS5tb2RlbFN0YXRlW2tleV0ubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBlcnJvcnMucHVzaChyZXNwb25zZS5tb2RlbFN0YXRlW2tleV1baV0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBlcnJvcnM7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gY29udHJvbGxlcihzZXJ2aWNlLCB0b2FzdHIsICRodHRwKSB7XHJcbiAgICAgICAgdmFyICRjdHJsID0gdGhpcztcclxuXHJcbiAgICAgICAgJGN0cmwuJG9uSW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ3B1Ymxpc2hlciBlZGl0IGluaXQnLCAkY3RybCk7XHJcbiAgICAgICAgICAgICRjdHJsLnRpdGxlID0gJ05ldyBQdWJsaXNoZXInO1xyXG4gICAgICAgICAgICAkY3RybC5wdWJsaXNoZXIgPSB7fTtcclxuXHJcbiAgICAgICAgICAgIGlmICgkY3RybC5yZXNvbHZlKSB7XHJcbiAgICAgICAgICAgICAgICAkY3RybC5pZCA9ICRjdHJsLnJlc29sdmUuaWQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCRjdHJsLmlkKSB7XHJcbiAgICAgICAgICAgICAgICBzZXJ2aWNlLmdldCgkY3RybC5pZCkudGhlbihmdW5jdGlvbiAocikge1xyXG4gICAgICAgICAgICAgICAgICAgICRjdHJsLnB1Ymxpc2hlciA9IHI7XHJcbiAgICAgICAgICAgICAgICAgICAgJGN0cmwudGl0bGUgPSByLm5hbWU7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJGN0cmwuY2FuY2VsID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkY3RybC5kaXNtaXNzKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkY3RybC5zYXZlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKCRjdHJsLnB1Ymxpc2hlci5pZCkge1xyXG4gICAgICAgICAgICAgICAgJGh0dHAucHV0KCdhcGkvcHVibGlzaGVyJywgJGN0cmwucHVibGlzaGVyKS50aGVuKGZ1bmN0aW9uIChyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYW5ndWxhci5leHRlbmQoJGN0cmwucHVibGlzaGVyLCByLmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRvYXN0ci5zdWNjZXNzKCdTYXZlZCBQdWJsaXNoZXIgJywgJGN0cmwucHVibGlzaGVyLm5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICRjdHJsLm1vZGFsSW5zdGFuY2UuY2xvc2UoJGN0cmwucHVibGlzaGVyKTtcclxuICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnT29wcy4gU29tZXRoaW5nIHdlbnQgd3JvbmcnLCBlcnIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRvYXN0ci5lcnJvcignT29wcy4gU29tZXRoaW5nIGhhcHBlbmVkOiAnICsgZXJyLmRhdGEubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgJGN0cmwuZXJyb3JzID0gcGFyc2VFcnJvcnMoZXJyLmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkaHR0cC5wb3N0KCdhcGkvcHVibGlzaGVyJywgJGN0cmwucHVibGlzaGVyKS50aGVuKGZ1bmN0aW9uIChyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYW5ndWxhci5leHRlbmQoJGN0cmwucHVibGlzaGVyLCByLmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRvYXN0ci5zdWNjZXNzKCdTYXZlZCAnLCAkY3RybC5wdWJsaXNoZXIubmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgJGN0cmwubW9kYWxJbnN0YW5jZS5jbG9zZSgkY3RybC5wdWJsaXNoZXIpO1xyXG4gICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdPb3BzLiBTb21ldGhpbmcgd2VudCB3cm9uZycsIGVycik7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9hc3RyLmVycm9yKCdPb3BzLiBTb21ldGhpbmcgaGFwcGVuZWQ6ICcgKyBlcnIuZGF0YS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICAkY3RybC5lcnJvcnMgPSBwYXJzZUVycm9ycyhlcnIuZGF0YSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgfTtcclxuXHJcbiAgICBtb2R1bGUuY29tcG9uZW50KCdwdWJsaXNoZXJFZGl0JyxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGJpbmRpbmdzOiB7XHJcbiAgICAgICAgICAgICAgICBpZDogJzwnLFxyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZTogJzwnLFxyXG4gICAgICAgICAgICAgICAgY2xvc2U6ICcmJyxcclxuICAgICAgICAgICAgICAgIGRpc21pc3M6ICcmJyxcclxuICAgICAgICAgICAgICAgIG1vZGFsSW5zdGFuY2U6ICc8J1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2FwcC9wdWJsaXNoZXJzL3B1Ymxpc2hlci1lZGl0LmNvbXBvbmVudC5odG1sJyxcclxuICAgICAgICAgICAgY29udHJvbGxlcjogWydQdWJsaXNoZXInLCAndG9hc3RyJywgJyRodHRwJywgY29udHJvbGxlcl1cclxuICAgICAgICB9KTtcclxuXHJcbn1cclxuKSgpOyIsIi8vcHJvZHVjdC5zZXJ2aWNlLmpzXHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcbiAgICB2YXIgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ2FwcCcpOyBcclxuICAgIFxyXG4gICAgbW9kdWxlLmZhY3RvcnkoJ1Byb2R1Y3QnLCBbJyRodHRwJywgc2VydmljZUNvbnRyb2xsZXJdKTtcclxuXHJcbiAgICBmdW5jdGlvbiBzZXJ2aWNlQ29udHJvbGxlcigkaHR0cCkge1xyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBnZXRQcm9kdWN0OiBnZXRQcm9kdWN0LFxyXG4gICAgICAgICAgICBnZXRBbGxQcm9kdWN0czogZ2V0QWxsUHJvZHVjdHMsXHJcbiAgICAgICAgICAgIHJlbW92ZTogcmVtb3ZlLCBcclxuICAgICAgICAgICAgc2F2ZTogc2F2ZVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGdldFByb2R1Y3QoaWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCgnYXBpL3Byb2R1Y3QvJyArIGlkKS50aGVuKGZ1bmN0aW9uIChyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gci5kYXRhO1xyXG4gICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIubWVzc2FnZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0QWxsUHJvZHVjdHMoc2VhcmNoTW9kZWwpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCgnYXBpL3Byb2R1Y3QnLCB7IHBhcmFtczogc2VhcmNoTW9kZWwgfSkudGhlbihmdW5jdGlvbiAocikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHIuZGF0YTtcclxuICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHJlbW92ZShpZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZGVsZXRlKCdhcGkvcHJvZHVjdC8nICsgaWQpLnRoZW4oZnVuY3Rpb24ocikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHIuZGF0YTtcclxuICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24oZXJyKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIubWVzc2FnZSk7XHJcbiAgICAgICAgICAgIH0pOyBcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHNhdmUocHJvZHVjdCkge1xyXG4gICAgICAgICAgICBpZiAocHJvZHVjdC5pZCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICRodHRwLnB1dCgnYXBpL3Byb2R1Y3QnLCBwcm9kdWN0KS50aGVuKGZ1bmN0aW9uKHIpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gci5kYXRhO1xyXG4gICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24oZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVyci5tZXNzYWdlO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJGh0dHAucG9zdCgnYXBpL3Byb2R1Y3QnLCBwcm9kdWN0KS50aGVuKGZ1bmN0aW9uIChyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIuZGF0YTtcclxuICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZXJyLm1lc3NhZ2U7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcblxyXG59XHJcbikoKTsiLCIvL3Byb2R1Y3Quc2VydmljZS5qc1xyXG4oZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG4gICAgdmFyIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdhcHAnKTsgXHJcbiAgICBcclxuICAgIG1vZHVsZS5mYWN0b3J5KCdQdWJsaXNoZXInLCBbJyRodHRwJywgJ3RvYXN0cicsIHNlcnZpY2VDb250cm9sbGVyXSk7XHJcblxyXG4gICAgZnVuY3Rpb24gc2VydmljZUNvbnRyb2xsZXIoJGh0dHAsIGxvZykge1xyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBnZXQ6IGdldCxcclxuICAgICAgICAgICAgZ2V0QWxsUHVibGlzaGVyczogZ2V0QWxsUHVibGlzaGVycyxcclxuICAgICAgICAgICAgcmVtb3ZlOiByZW1vdmUsIFxyXG4gICAgICAgICAgICBzYXZlOiBzYXZlXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0KGlkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5nZXQoJ2FwaS9wdWJsaXNoZXIvJyArIGlkKS50aGVuKGZ1bmN0aW9uIChyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gci5kYXRhO1xyXG4gICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnT29wcy4gU29tZXRoaW5nIGhhcHBlbmVkIGdldHRpbmcgcHVibGlzaGVyJyk7XHJcbiAgICAgICAgICAgICAgICBsb2cuZXJyb3IoJ09vcHMuIFNvbXRoaW5nIGhhcHBlbmVkIGdldHRpbmcgcHVibGlzaGVyOiAnICsgZXJyLmRhdGEubWVzc2FnZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0QWxsUHVibGlzaGVycygpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCgnYXBpL3B1Ymxpc2hlcicpLnRoZW4oZnVuY3Rpb24gKHIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByLmRhdGE7XHJcbiAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVyci5tZXNzYWdlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiByZW1vdmUoaWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRodHRwLmRlbGV0ZSgnYXBpL3B1Ymxpc2hlci8nICsgaWQpLnRoZW4oZnVuY3Rpb24ocikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHIuZGF0YTtcclxuICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24oZXJyKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIubWVzc2FnZSk7XHJcbiAgICAgICAgICAgIH0pOyBcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHNhdmUocHJvZHVjdCkge1xyXG4gICAgICAgICAgICBpZiAocHJvZHVjdC5pZCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICRodHRwLnB1dCgnYXBpL3B1Ymxpc2hlcicsIHByb2R1Y3QpLnRoZW4oZnVuY3Rpb24ocikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByLmRhdGE7XHJcbiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVycjtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3Bvc3RpbmcnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiAkaHR0cC5wb3N0KCdhcGkvcHJvZHVjdCcsIHByb2R1Y3QpLnRoZW4oX3N1Y2Nlc3MsIF9mYWlsdXJlKTtcclxuICAgICAgICAgICAgICAgIC8vcmV0dXJuICRodHRwLnBvc3QoJ2FwaS9wcm9kdWN0JywgcHJvZHVjdCkudGhlbihmdW5jdGlvbiAocikge1xyXG4gICAgICAgICAgICAgICAgLy8gICAgY29uc29sZS5sb2coJ3N1Y2Nlc3MnLCByKTtcclxuICAgICAgICAgICAgICAgIC8vICAgIHJldHVybiByLmRhdGE7XHJcbiAgICAgICAgICAgICAgICAvL30sIGZ1bmN0aW9uIChlcnIpIHtcclxuICAgICAgICAgICAgICAgIC8vICAgIGNvbnNvbGUubG9nKCdlcnJvcicsIGVycik7XHJcbiAgICAgICAgICAgICAgICAvLyAgICByZXR1cm4gZXJyO1xyXG4gICAgICAgICAgICAgICAgLy99KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIF9zdWNjZXNzKHJlc3VsdCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnc3VjY2VzcycsIHJlc3VsdCk7XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQuZGF0YTsgXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBfZmFpbHVyZShlcnIpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2Vycm9yJywgZXJyKTtcclxuICAgICAgICAgICAgcmV0dXJuIGVyci5kYXRhOyBcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG59XHJcbikoKTsiLCIvL3N0YWZmLWVkaXQuY29tcG9uZW50LmpzXHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ2FwcCcpO1xyXG5cclxuICAgIGZ1bmN0aW9uIGNvbnRyb2xsZXIoJGh0dHApIHtcclxuICAgICAgICB2YXIgJGN0cmwgPSB0aGlzO1xyXG5cclxuICAgICAgICAkY3RybC4kb25Jbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnc3RhZmYgZWRpdCBpbml0Jyk7XHJcbiAgICAgICAgICAgICRjdHJsLnRpdGxlID0gJ05ldyBTdGFmZic7XHJcblxyXG4gICAgICAgICAgICBpZiAoJGN0cmwucmVzb2x2ZSkgJGN0cmwucHJvZHVjdElkID0gJGN0cmwucmVzb2x2ZS5wcm9kdWN0SWQ7XHJcblxyXG4gICAgICAgICAgICBpZiAoJGN0cmwucmVzb2x2ZS5zdGFmZikge1xyXG4gICAgICAgICAgICAgICAgJGN0cmwuc3RhZmYgPSAkY3RybC5yZXNvbHZlLnN0YWZmO1xyXG4gICAgICAgICAgICAgICAgJGN0cmwudGl0bGUgPSAkY3RybC5zdGFmZi5maXJzdG5hbWUgKyAnICcgKyAkY3RybC5zdGFmZi5sYXN0bmFtZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJGN0cmwuY2FuY2VsID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkY3RybC5kaXNtaXNzKCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJGN0cmwuc2F2ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKCRjdHJsLnByb2R1Y3RJZCkge1xyXG4gICAgICAgICAgICAgICAgJGh0dHAucG9zdCgnYXBpL3N0YWZmLycgKyAkY3RybC5wcm9kdWN0SWQsICRjdHJsLnN0YWZmKS50aGVuKGZ1bmN0aW9uIChyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYW5ndWxhci5leHRlbmQoJGN0cmwuc3RhZmYsIHIuZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgJGN0cmwubW9kYWxJbnN0YW5jZS5jbG9zZShyLmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdzb21ldGhpbmcgd2VudCB3cm9uZycsIGVyci5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJGh0dHAucG9zdCgnYXBpL3N0YWZmJywgJGN0cmwuc3RhZmYpLnRoZW4oZnVuY3Rpb24gKHIpIHtcclxuICAgICAgICAgICAgICAgICAgICBhbmd1bGFyLmV4dGVuZCgkY3RybC5zdGFmZiwgci5kYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAkY3RybC5tb2RhbEluc3RhbmNlLmNsb3NlKHIuZGF0YSk7XHJcbiAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3NvbWV0aGluZyB3ZW50IHdyb25nJywgZXJyLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIG1vZHVsZS5jb21wb25lbnQoJ3N0YWZmRWRpdCcsXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBiaW5kaW5nczoge1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZTogJzwnLFxyXG4gICAgICAgICAgICAgICAgY2xvc2U6ICcmJyxcclxuICAgICAgICAgICAgICAgIGRpc21pc3M6ICcmJyxcclxuICAgICAgICAgICAgICAgIHN0YWZmOiAnPCcsXHJcbiAgICAgICAgICAgICAgICBwcm9kdWN0SWQ6ICc8JyxcclxuICAgICAgICAgICAgICAgIG1vZGFsSW5zdGFuY2U6ICc8J1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2FwcC9zdGFmZi9zdGFmZi1lZGl0LmNvbXBvbmVudC5odG1sJyxcclxuICAgICAgICAgICAgY29udHJvbGxlcjogWyckaHR0cCcsIGNvbnRyb2xsZXJdXHJcbiAgICAgICAgfSk7XHJcbn1cclxuKSgpOyIsIi8vc3RhZmYtbGlzdC5jb21wb25lbnQuanNcclxuKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnYXBwJyk7XHJcblxyXG4gICAgZnVuY3Rpb24gY29udHJvbGxlcigkaHR0cCwgJG1vZGFsLCAkbmdDb25maXJtKSB7XHJcbiAgICAgICAgdmFyICRjdHJsID0gdGhpcztcclxuXHJcbiAgICAgICAgJGN0cmwuJG9uSW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ3N0YWZmIGxpc3QgaW5pdCcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJGN0cmwuZWRpdCA9IGZ1bmN0aW9uIChtZW1iZXIpIHtcclxuICAgICAgICAgICAgJG1vZGFsLm9wZW4oe1xyXG4gICAgICAgICAgICAgICAgY29tcG9uZW50OiAnc3RhZmZFZGl0JyxcclxuICAgICAgICAgICAgICAgIGJpbmRpbmdzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbW9kYWxJbnN0YW5jZTogXCI8XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgc3RhZmY6IG1lbWJlclxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHJlc29sdmU6IHtcclxuICAgICAgICAgICAgICAgICAgICBzdGFmZjogbWVtYmVyXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgc2l6ZTogJ21kJ1xyXG4gICAgICAgICAgICB9KS5yZXN1bHQudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmluZm8oXCJJIHdhcyBjbG9zZWQsIHNvIGRvIHdoYXQgSSBuZWVkIHRvIGRvIG15Q29udGVudCdzIGNvbnRyb2xsZXIgbm93LiAgUmVzdWx0IHdhcy0+XCIpO1xyXG5cclxuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5pbmZvKFwiSSB3YXMgZGltaXNzZWQsIHNvIGRvIHdoYXQgSSBuZWVkIHRvIGRvIG15Q29udGVudCdzIGNvbnRyb2xsZXIgbm93LiAgUmVhc29uIHdhcy0+XCIgKyByZWFzb24pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICRjdHJsLmRlbGV0ZSA9IGZ1bmN0aW9uIChtZW1iZXIpIHtcclxuICAgICAgICAgICAgJG5nQ29uZmlybSh7XHJcbiAgICAgICAgICAgICAgICB0aXRsZTogJ0RlbGV0ZScsXHJcbiAgICAgICAgICAgICAgICBjb250ZW50OiAnQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGRlbGV0ZSA8YnIgLz48c3Ryb25nPicgKyBtZW1iZXIuZmlyc3RuYW1lICsgbWVtYmVyLmxhc3RuYW1lICsgJzwvc3Ryb25nPj8nLFxyXG4gICAgICAgICAgICAgICAgdHlwZTogJ3JlZCcsXHJcbiAgICAgICAgICAgICAgICBidXR0b25zOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgeWVzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleXM6IFsneSddLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb246IGZ1bmN0aW9uIChzY29wZSwgYnV0dG9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaHR0cC5kZWxldGUoJ2FwaS9zdGFmZi8nICsgbWVtYmVyLmlkKS50aGVuKGZ1bmN0aW9uIChyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlkeCA9ICRjdHJsLnN0YWZmLmluZGV4T2YobWVtYmVyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkY3RybC5zdGFmZi5zcGxpY2UoaWR4LCAxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZXJyb3InLCBlcnIubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgbm86IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAga2V5czogWydOJ10sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbjogZnVuY3Rpb24gKHNjb3BlLCBidXR0b24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG5cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbW9kdWxlLmNvbXBvbmVudCgnc3RhZmZMaXN0JyxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGJpbmRpbmdzOiB7XHJcbiAgICAgICAgICAgICAgICBzdGFmZjogJzwnXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnYXBwL3N0YWZmL3N0YWZmLWxpc3QuY29tcG9uZW50Lmh0bWwnLFxyXG4gICAgICAgICAgICBjb250cm9sbGVyOiBbJyRodHRwJywgJyR1aWJNb2RhbCcsICckbmdDb25maXJtJywgY29udHJvbGxlcl1cclxuICAgICAgICB9KTtcclxufVxyXG4pKCk7Il19
