!function(){"use strict";var t=angular.module("app",["ngStorage","app.directives","shared.components","ui.bootstrap","smart-table","cp.ngConfirm","treasure-overlay-spinner","toastr"]);t.config(["toastrConfig",function(t){angular.extend(t,{positionClass:"toast-bottom-right",newestOnTop:!0,allowHtml:!1,closeButton:!1,closeHtml:"<button>&times;</button>",extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},messageClass:"toast-message",onHidden:null,onShown:null,onTap:null,progressBar:!1,tapToDismiss:!0,templates:{toast:"directives/toast/toast.html",progressbar:"directives/progressbar/progressbar.html"},timeOut:5e3,titleClass:"toast-title",toastClass:"toast"})}])}();
!function(){angular.module("shared.components",[])}();
!function(){function n(){var n=this;n.$onInit=function(){console.log("modal",n)}}var o=angular.module("app");o.component("confirmationModal",{bindings:{},template:"yes or no",controller:[n]})}();
!function(){function n(n,o){var e=this;e.$onInit=function(){n.get("api/publisher").then(function(n){e.publishers=n.data}).catch(function(n){console.log(n.message)})},e.create=function(){o.open({component:"publisherEdit",bindings:{modalInstance:"<"},size:"lg"}).result.then(function(n){console.info("I was closed, so do what I need to do myContent's controller now.  Result was->"),console.info("returning result",n),e.publishers.unshift(n),e.id=n.id},function(n){console.info("I was dimissed, so do what I need to do myContent's controller now.  Reason was->"+n)})},e.edit=function(){o.open({component:"publisherEdit",bindings:{modalInstance:"<"},resolve:{id:e.id},size:"lg"}).result.then(function(n){angular.forEach(e.publishers,function(o){o.id===e.id&&(angular.extend(o,n),e.id=o.id)})},function(n){console.info("I was dimissed, so do what I need to do myContent's controller now.  Reason was->"+n)})}}var o=angular.module("shared.components");o.component("publisherSelect",{bindings:{id:"="},templateUrl:"app/common/publisher-select.component.html",controller:["$http","$uibModal",n]})}();
!function(){angular.module("app.directives",[])}();
!function(){var e=angular.module("app.directives");e.directive("stSubmitSearch",["stConfig","$timeout","$parse",function(e,t,r){return{require:"^stTable",link:function(e,t,r,n){return t.bind("click",function(){var e=n;e.pipe()})}}}]),e.directive("clearKey",function(){return{restrict:"EA",require:"ngModel",link:function(e,t,r,n){t.on("keydown",function(t){27===t.which&&(n.$setViewValue(null),n.$render(),e.$apply())})}}}),e.directive("stResetSearch",function(){return{restrict:"EA",require:["^stTable","^ngModel"],link:function(e,t,r,n){return t.bind("click",function(){var t=n[1],r=n[0];return e.$apply(function(){angular.forEach(t.$viewValue,function(e,r){"page"===r.toLowerCase()&&(t.$viewValue[r]=1),Array.isArray(e)||_.includes(r.toLowerCase(),"page")||(t.$viewValue[r]=null)});var e=r.tableState();return e.search.predicateObject={},e.pagination.start=0,r.pipe()})})}}}),e.directive("stClearKey",function(){return{restrict:"EA",require:["^stTable","^ngModel"],link:function(e,t,r,n){t.on("keydown",function(r){var i=n[1],a=n[0];return 13===r.which?a.pipe():27===r.which?void 0!==t.context.attributes["st-search"]?e.$apply(function(){var e=t.context.attributes["st-search"].value,r=a.tableState();return r.search.predicateObject[e]="",a.pipe()}):e.$apply(function(){i.$setViewValue(null),i.$render()}):void 0})}}})}();
!function(){function e(e){var n,t=[];for(n in e.modelState)if(e.modelState.hasOwnProperty(n))for(var s=0;s<e.modelState[n].length;s++)t.push(e.modelState[n][s]);return t}function n(n,t,s){var i=this;i.$onInit=function(){console.log("publisher edit init",i),i.title="New Publisher",i.publisher={},i.resolve&&(i.id=i.resolve.id),i.id&&n.get(i.id).then(function(e){i.publisher=e,i.title=e.name})},i.cancel=function(){i.dismiss()},i.save=function(){i.publisher.id?s.put("api/publisher",i.publisher).then(function(e){angular.extend(i.publisher,e.data),t.success("Saved Publisher ",i.publisher.name),i.modalInstance.close(i.publisher)}).catch(function(n){console.log("Oops. Something went wrong",n),t.error("Oops. Something happened: "+n.data.message),i.errors=e(n.data)}):s.post("api/publisher",i.publisher).then(function(e){angular.extend(i.publisher,e.data),t.success("Saved ",i.publisher.name),i.modalInstance.close(i.publisher)}).catch(function(n){console.log("Oops. Something went wrong",n),t.error("Oops. Something happened: "+n.data.message),i.errors=e(n.data)})}}var t=angular.module("app");t.component("publisherEdit",{bindings:{id:"<",resolve:"<",close:"&",dismiss:"&",modalInstance:"<"},templateUrl:"app/publishers/publisher-edit.component.html",controller:["Publisher","toastr","$http",n]})}();
!function(){function t(t){var e=this;e.dateOptions={dateDisabled:!1,formatYear:"yy"},e.dateFormat="MM/DD/YYYY",e.$onInit=function(){e.title="New Product",e.resolve&&(e.id=e.resolve.id),e.id&&t.getProduct(e.id).then(function(t){e.product=t,e.title=t.title,e.product.receiptDate=new Date(t.receiptDate)})},e.cancel=function(){e.dismiss()},e.save=function(){return t.save(e.product).then(function(t){angular.extend(e.product,t),e.modalInstance.close(e.product)}).catch(function(t){console.log("Error saving product",t.message)}).finally(function(){})},e.publisherChanged=function(){console.log("publisher changed")}}var e=angular.module("app");e.component("productEdit",{templateUrl:"app/product/product-edit.component.html",bindings:{id:"<",resolve:"<",close:"&",dismiss:"&",modalInstance:"<"},controller:["Product",t]})}();
!function(){"use strict";function n(n,o,t,e){var i,s=this,d=10;s.searchModel={page:1,pageSize:d,filteredCount:0,totalCount:0,totalPages:0},s.$onInit=function(){console.log("product list init"),s.title="Media Library",s.loading=!0},s.search=function(n){s.loading=!0,i=n,e.getAllProducts(s.searchModel).then(function(n){s.products=n.results,s.searchModel=n,delete s.searchModel.results,s.loading=!1}).catch(function(n){s.loading=!1}).finally(function(){})},s.paged=function(){s.search(i)},s.create=function(){n.open({component:"productEdit",bindings:{modalInstance:"<"},size:"md"}).result.then(function(n){s.products.unshift(n),t.info("Created "+n.title)},function(n){console.info("I was dimissed, so do what I need to do myContent's controller now.  Reason was->"+n)})},s.edit=function(o){n.open({component:"productEdit",bindings:{modalInstance:"<"},resolve:{id:o.id},size:"md"}).result.then(function(n){angular.extend(o,n),t.info("Saved "+n.title)},function(n){console.log("reason",n)})},s.delete=function(n){o({title:"Delete",content:"Are you sure you want to delete <br /><strong>"+n.title+"</strong>?",type:"red",buttons:{yes:{keys:["y"],action:function(o,i){e.remove(n.id).then(function(o){var e=s.products.indexOf(n);s.products.splice(e,1),t.warning("Deleted "+n.title)})}},no:{keys:["N"],action:function(n,o){}}}})},s.showDetails=function(o){n.open({component:"productSummary",bindings:{modalInstance:"<"},resolve:{id:o.id,asModal:!0},size:"md"}).result.then(function(n){console.info("I was closed, so do what I need to do myContent's controller now.  Result was->"),angular.extend(o,n)},function(n){console.info("I was dimissed, so do what I need to do myContent's controller now.  Reason was->"+n)})}}var o=angular.module("app");o.component("productList",{templateUrl:"app/product/product-list.component.html",controller:["$uibModal","$ngConfirm","toastr","Product",n]})}();
!function(){function o(o,n){var t=this;t.$onInit=function(){t.loading=!0,t.resolve&&(t.id=t.resolve.id,t.asModal=t.resolve.asModal,t.addStaffVisible=!1),n.getProduct(t.id).then(function(o){t.product=o,t.loading=!1})},t.edit=function(){o.open({component:"productEdit",bindings:{modalInstance:"<"},resolve:{id:t.product.id},size:"md"}).result.then(function(o){angular.extend(t.product,o)},function(o){})},t.showNewStaff=function(){o.open({component:"staffEdit",bindings:{modalInstance:"<"},resolve:{productId:t.id},size:"md"}).result.then(function(o){console.info("I was closed, so do what I need to do myContent's controller now.  Result was->"),t.product.staff.unshift(o)},function(o){console.info("I was dimissed, so do what I need to do myContent's controller now.  Reason was->"+o)})},t.cancel=function(){t.modalInstance.close(t.product)}}var n=angular.module("app");n.component("productSummary",{bindings:{id:"<",asModal:"<",resolve:"<",close:"&",dismiss:"&",modalInstance:"<"},templateUrl:"app/product/product-summary.component.html",controller:["$uibModal","Product",o]})}();
!function(){"use strict";function t(t){function n(n){return t.get("api/product/"+n).then(function(t){return t.data}).catch(function(t){console.log(t.message)})}function e(n){return t.get("api/product",{params:n}).then(function(t){return t.data}).catch(function(t){console.log(t.message)})}function u(n){return t.delete("api/product/"+n).then(function(t){return t.data}).catch(function(t){console.log(t.message)})}function c(n){return n.id?t.put("api/product",n).then(function(t){return t.data}).catch(function(t){return t.message}):t.post("api/product",n).then(function(t){return t.data}).catch(function(t){return t.message})}return{getProduct:n,getAllProducts:e,remove:u,save:c}}var n=angular.module("app");n.factory("Product",["$http",t])}();
!function(){"use strict";function t(t,n){function e(e){return t.get("api/publisher/"+e).then(function(t){return t.data}).catch(function(t){console.log("Oops. Something happened getting publisher"),n.error("Oops. Somthing happened getting publisher: "+t.data.message)})}function o(){return t.get("api/publisher").then(function(t){return t.data}).catch(function(t){console.log(t.message)})}function r(n){return t.delete("api/publisher/"+n).then(function(t){return t.data}).catch(function(t){console.log(t.message)})}function u(n){return n.id?t.put("api/publisher",n).then(function(t){return t.data},function(t){return t}):(console.log("posting"),t.post("api/product",n).then(i,a))}function i(t){return console.log("success",t),t.data}function a(t){return console.log("error",t),t.data}return{get:e,getAllPublishers:o,remove:r,save:u}}var n=angular.module("app");n.factory("Publisher",["$http","toastr",t])}();
!function(){function t(t){var a=this;a.$onInit=function(){console.log("staff edit init"),a.title="New Staff",a.resolve&&(a.productId=a.resolve.productId),a.resolve.staff&&(a.staff=a.resolve.staff,a.title=a.staff.firstname+" "+a.staff.lastname)},a.cancel=function(){a.dismiss()},a.save=function(){a.productId?t.post("api/staff/"+a.productId,a.staff).then(function(t){angular.extend(a.staff,t.data),a.modalInstance.close(t.data)}).catch(function(t){console.log("something went wrong",t.message)}):t.post("api/staff",a.staff).then(function(t){angular.extend(a.staff,t.data),a.modalInstance.close(t.data)}).catch(function(t){console.log("something went wrong",t.message)})}}var a=angular.module("app");a.component("staffEdit",{bindings:{resolve:"<",close:"&",dismiss:"&",staff:"<",productId:"<",modalInstance:"<"},templateUrl:"app/staff/staff-edit.component.html",controller:["$http",t]})}();
!function(){function t(t,n,o){var e=this;e.$onInit=function(){console.log("staff list init")},e.edit=function(t){n.open({component:"staffEdit",bindings:{modalInstance:"<",staff:t},resolve:{staff:t},size:"md"}).result.then(function(t){console.info("I was closed, so do what I need to do myContent's controller now.  Result was->")},function(t){console.info("I was dimissed, so do what I need to do myContent's controller now.  Reason was->"+t)})},e.delete=function(n){o({title:"Delete",content:"Are you sure you want to delete <br /><strong>"+n.firstname+n.lastname+"</strong>?",type:"red",buttons:{yes:{keys:["y"],action:function(o,s){t.delete("api/staff/"+n.id).then(function(t){var o=e.staff.indexOf(n);e.staff.splice(o,1)}).catch(function(t){console.log("error",t.message)})}},no:{keys:["N"],action:function(t,n){}}}})}}var n=angular.module("app");n.component("staffList",{bindings:{staff:"<"},templateUrl:"app/staff/staff-list.component.html",controller:["$http","$uibModal","$ngConfirm",t]})}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5tb2R1bGUuanMiLCJjb21tb24vY29tcG9uZW50cy5tb2R1bGUuanMiLCJjb21tb24vY29uZnJtYXRpb24tbW9kYWwuY29tcG9uZW50LmpzIiwiY29tbW9uL3B1Ymxpc2hlci1zZWxlY3QuY29tcG9uZW50LmpzIiwiZGlyZWN0aXZlcy9kaXJlY3RpdmVzLm1vZHVsZXMuanMiLCJkaXJlY3RpdmVzL3N0VGFibGUuZGlyZWN0aXZlLmpzIiwicHVibGlzaGVycy9wdWJsaXNoZXItZWRpdC5jb21wb25lbnQuanMiLCJwcm9kdWN0L3Byb2R1Y3QtZWRpdC5jb21wb25lbnQuanMiLCJwcm9kdWN0L3Byb2R1Y3QtbGlzdC5jb21wb25lbnQuanMiLCJwcm9kdWN0L3Byb2R1Y3Qtc3VtbWFyeS5jb21wb25lbnQuanMiLCJzZXJ2aWNlcy9wcm9kdWN0LnNlcnZpY2UuanMiLCJzZXJ2aWNlcy9wdWJsaXNoZXIuc2VydmljZS5qcyIsInN0YWZmL3N0YWZmLWVkaXQuY29tcG9uZW50LmpzIiwic3RhZmYvc3RhZmYtbGlzdC5jb21wb25lbnQuanMiXSwibmFtZXMiOlsibW9kdWxlIiwiYW5ndWxhciIsImNvbmZpZyIsInRvYXN0ckNvbmZpZyIsImV4dGVuZCIsInBvc2l0aW9uQ2xhc3MiLCJuZXdlc3RPblRvcCIsImFsbG93SHRtbCIsImNsb3NlQnV0dG9uIiwiY2xvc2VIdG1sIiwiZXh0ZW5kZWRUaW1lT3V0IiwiaWNvbkNsYXNzZXMiLCJlcnJvciIsImluZm8iLCJzdWNjZXNzIiwid2FybmluZyIsIm1lc3NhZ2VDbGFzcyIsIm9uSGlkZGVuIiwib25TaG93biIsIm9uVGFwIiwicHJvZ3Jlc3NCYXIiLCJ0YXBUb0Rpc21pc3MiLCJ0ZW1wbGF0ZXMiLCJ0b2FzdCIsInByb2dyZXNzYmFyIiwidGltZU91dCIsInRpdGxlQ2xhc3MiLCJ0b2FzdENsYXNzIiwiY29udHJvbGxlciIsIiRjdHJsIiwidGhpcyIsIiRvbkluaXQiLCJjb25zb2xlIiwibG9nIiwiY29tcG9uZW50IiwiYmluZGluZ3MiLCJ0ZW1wbGF0ZSIsIiRodHRwIiwiJHVpYk1vZGFsIiwiZ2V0IiwidGhlbiIsInIiLCJwdWJsaXNoZXJzIiwiZGF0YSIsImNhdGNoIiwiZXJyIiwibWVzc2FnZSIsImNyZWF0ZSIsIm9wZW4iLCJtb2RhbEluc3RhbmNlIiwic2l6ZSIsInJlc3VsdCIsInVuc2hpZnQiLCJpZCIsInJlYXNvbiIsImVkaXQiLCJyZXNvbHZlIiwiZm9yRWFjaCIsIml0ZW0iLCJ0ZW1wbGF0ZVVybCIsImRpcmVjdGl2ZSIsInN0Q29uZmlnIiwiJHRpbWVvdXQiLCIkcGFyc2UiLCJyZXF1aXJlIiwibGluayIsInNjb3BlIiwiZWxlbWVudCIsImF0dHIiLCJjdHJsIiwiYmluZCIsInRhYmxlQ3RybCIsInBpcGUiLCJyZXN0cmljdCIsImVsIiwiYXR0cnMiLCJvbiIsImV2ZW50Iiwid2hpY2giLCIkc2V0Vmlld1ZhbHVlIiwiJHJlbmRlciIsIiRhcHBseSIsImN0cmxzIiwibW9kZWwiLCIkdmlld1ZhbHVlIiwidmFsdWUiLCJrZXkiLCJ0b0xvd2VyQ2FzZSIsIkFycmF5IiwiaXNBcnJheSIsIl8iLCJpbmNsdWRlcyIsInRhYmxlU3RhdGUiLCJzZWFyY2giLCJwcmVkaWNhdGVPYmplY3QiLCJwYWdpbmF0aW9uIiwic3RhcnQiLCJuZ01vZGVsIiwidW5kZWZpbmVkIiwiY29udGV4dCIsImF0dHJpYnV0ZXMiLCJmaWVsZE5hbWUiLCJwYXJzZUVycm9ycyIsInJlc3BvbnNlIiwiZXJyb3JzIiwibW9kZWxTdGF0ZSIsImhhc093blByb3BlcnR5IiwiaSIsImxlbmd0aCIsInB1c2giLCJzZXJ2aWNlIiwidG9hc3RyIiwidGl0bGUiLCJwdWJsaXNoZXIiLCJuYW1lIiwiY2FuY2VsIiwiZGlzbWlzcyIsInNhdmUiLCJwdXQiLCJjbG9zZSIsInBvc3QiLCJkYXRlT3B0aW9ucyIsImRhdGVEaXNhYmxlZCIsImZvcm1hdFllYXIiLCJkYXRlRm9ybWF0IiwiZ2V0UHJvZHVjdCIsInByb2R1Y3QiLCJyZWNlaXB0RGF0ZSIsIkRhdGUiLCJmaW5hbGx5IiwicHVibGlzaGVyQ2hhbmdlZCIsIiRtb2RhbCIsIiRuZ0NvbmZpcm0iLCJ0YWJsZVN0YXRlUmVmIiwicGFnZVNpemVEZWZhdWx0Iiwic2VhcmNoTW9kZWwiLCJwYWdlIiwicGFnZVNpemUiLCJmaWx0ZXJlZENvdW50IiwidG90YWxDb3VudCIsInRvdGFsUGFnZXMiLCJsb2FkaW5nIiwiZ2V0QWxsUHJvZHVjdHMiLCJwcm9kdWN0cyIsInJlc3VsdHMiLCJwYWdlZCIsImRlbGV0ZSIsImNvbnRlbnQiLCJ0eXBlIiwiYnV0dG9ucyIsInllcyIsImtleXMiLCJhY3Rpb24iLCJidXR0b24iLCJyZW1vdmUiLCJpZHgiLCJpbmRleE9mIiwic3BsaWNlIiwibm8iLCJzaG93RGV0YWlscyIsImFzTW9kYWwiLCJhZGRTdGFmZlZpc2libGUiLCJzaG93TmV3U3RhZmYiLCJwcm9kdWN0SWQiLCJzdGFmZiIsInNlcnZpY2VDb250cm9sbGVyIiwicGFyYW1zIiwiZmFjdG9yeSIsImdldEFsbFB1Ymxpc2hlcnMiLCJfc3VjY2VzcyIsIl9mYWlsdXJlIiwiZmlyc3RuYW1lIiwibGFzdG5hbWUiLCJtZW1iZXIiXSwibWFwcGluZ3MiOiJDQUNBLFdBQ0ksWUFFQSxJQUFJQSxHQUFTQyxRQUFRRCxPQUFPLE9BRXhCLFlBQ0EsaUJBQ0Esb0JBQ0EsZUFDQSxjQUNBLGVBQ0EsMkJBQ0EsVUFHSkEsR0FBT0UsUUFBUSxlQUFnQixTQUFVQyxHQUNyQ0YsUUFBUUcsT0FBT0QsR0FDWEUsY0FBZSxxQkFDZkMsYUFBYSxFQUNiQyxXQUFXLEVBQ1hDLGFBQWEsRUFDYkMsVUFBVywyQkFDWEMsZ0JBQWlCLElBQ2pCQyxhQUNJQyxNQUFPLGNBQ1BDLEtBQU0sYUFDTkMsUUFBUyxnQkFDVEMsUUFBUyxpQkFFYkMsYUFBYyxnQkFDZEMsU0FBVSxLQUNWQyxRQUFTLEtBQ1RDLE1BQU8sS0FDUEMsYUFBYSxFQUNiQyxjQUFjLEVBQ2RDLFdBQ0lDLE1BQU8sOEJBQ1BDLFlBQWEsMkNBRWpCQyxRQUFTLElBQ1RDLFdB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QUN6Qi9HLE1BQU0sU0FBVUMsR0FDZmIsUUFBUUMsSUFBSSxRQUFTWSxFQUFJQyxhQUlyQ2dILElBQ0lQLE1BQU8sS0FDUEMsT0FBUSxTQUFVdEYsRUFBT3VGLFVBL0M3QyxHQUFJekosR0FBU0MsUUFBUUQsT0FBTyxNQXlENUJBLEdBQU9rQyxVQUFVLGFBRVRDLFVBQ0lpSSxNQUFPLEtBRVh6RyxZQUFhLHNDQUNiL0IsWUFBYSxRQUFTLFlBQWEsYUFBY0EiLCJmaWxlIjoiYXBwLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vYXBwLm1vZHVsZS5qc1xyXG4oZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIHZhciBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnYXBwJyxcclxuICAgIFtcclxuICAgICAgICAnbmdTdG9yYWdlJyxcclxuICAgICAgICAnYXBwLmRpcmVjdGl2ZXMnLFxyXG4gICAgICAgICdzaGFyZWQuY29tcG9uZW50cycsXHJcbiAgICAgICAgJ3VpLmJvb3RzdHJhcCcsXHJcbiAgICAgICAgJ3NtYXJ0LXRhYmxlJyxcclxuICAgICAgICAnY3AubmdDb25maXJtJywgXHJcbiAgICAgICAgJ3RyZWFzdXJlLW92ZXJsYXktc3Bpbm5lcicsIFxyXG4gICAgICAgICd0b2FzdHInXHJcbiAgICAgICAgXSk7XHJcblxyXG4gICAgbW9kdWxlLmNvbmZpZyhbJ3RvYXN0ckNvbmZpZycsIGZ1bmN0aW9uICh0b2FzdHJDb25maWcpIHtcclxuICAgICAgICBhbmd1bGFyLmV4dGVuZCh0b2FzdHJDb25maWcsIHtcclxuICAgICAgICAgICAgcG9zaXRpb25DbGFzczogJ3RvYXN0LWJvdHRvbS1yaWdodCcsXHJcbiAgICAgICAgICAgIG5ld2VzdE9uVG9wOiB0cnVlLFxyXG4gICAgICAgICAgICBhbGxvd0h0bWw6IGZhbHNlLFxyXG4gICAgICAgICAgICBjbG9zZUJ1dHRvbjogZmFsc2UsXHJcbiAgICAgICAgICAgIGNsb3NlSHRtbDogJzxidXR0b24+JnRpbWVzOzwvYnV0dG9uPicsXHJcbiAgICAgICAgICAgIGV4dGVuZGVkVGltZU91dDogMTAwMCxcclxuICAgICAgICAgICAgaWNvbkNsYXNzZXM6IHtcclxuICAgICAgICAgICAgICAgIGVycm9yOiAndG9hc3QtZXJyb3InLFxyXG4gICAgICAgICAgICAgICAgaW5mbzogJ3RvYXN0LWluZm8nLFxyXG4gICAgICAgICAgICAgICAgc3VjY2VzczogJ3RvYXN0LXN1Y2Nlc3MnLFxyXG4gICAgICAgICAgICAgICAgd2FybmluZzogJ3RvYXN0LXdhcm5pbmcnXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG1lc3NhZ2VDbGFzczogJ3RvYXN0LW1lc3NhZ2UnLFxyXG4gICAgICAgICAgICBvbkhpZGRlbjogbnVsbCxcclxuICAgICAgICAgICAgb25TaG93bjogbnVsbCxcclxuICAgICAgICAgICAgb25UYXA6IG51bGwsXHJcbiAgICAgICAgICAgIHByb2dyZXNzQmFyOiBmYWxzZSxcclxuICAgICAgICAgICAgdGFwVG9EaXNtaXNzOiB0cnVlLFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZXM6IHtcclxuICAgICAgICAgICAgICAgIHRvYXN0OiAnZGlyZWN0aXZlcy90b2FzdC90b2FzdC5odG1sJyxcclxuICAgICAgICAgICAgICAgIHByb2dyZXNzYmFyOiAnZGlyZWN0aXZlcy9wcm9ncmVzc2Jhci9wcm9ncmVzc2Jhci5odG1sJ1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB0aW1lT3V0OiA1MDAwLFxyXG4gICAgICAgICAgICB0aXRsZUNsYXNzOiAndG9hc3QtdGl0bGUnLFxyXG4gICAgICAgICAgICB0b2FzdENsYXNzOiAndG9hc3QnXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XSk7XHJcbn0pKCk7IiwiLy9zaGFyZWQtY29tcG9uZW50cy5tb2R1bGUuanNcclxuKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnc2hhcmVkLmNvbXBvbmVudHMnLCBbXSk7XHJcbiAgICB9XHJcbikoKTsiLCIvL2NvbmZybWF0aW9uLW1vZGFsLmNvbXBvbmVudC5qc1xyXG4oZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdhcHAnKTtcclxuXHJcbiAgICBmdW5jdGlvbiBjb250cm9sbGVyKCkge1xyXG4gICAgICAgIHZhciAkY3RybCA9IHRoaXM7IFxyXG5cclxuICAgICAgICAkY3RybC4kb25Jbml0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdtb2RhbCcsICRjdHJsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgIG1vZHVsZS5jb21wb25lbnQoJ2NvbmZpcm1hdGlvbk1vZGFsJyxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGJpbmRpbmdzOiB7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHRlbXBsYXRlOiAneWVzIG9yIG5vJyxcclxuICAgICAgICAgICAgY29udHJvbGxlcjogW2NvbnRyb2xsZXJdXHJcbiAgICAgICAgfSk7XHJcbn1cclxuKSgpOyIsIi8vcHVibGlzaGVyLWxpc3QuY29tcG9uZW50LmpzXHJcbihmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgdmFyIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdzaGFyZWQuY29tcG9uZW50cycpO1xyXG5cclxuICAgIGZ1bmN0aW9uIGNvbnRyb2xsZXIoJGh0dHAsICR1aWJNb2RhbCkge1xyXG4gICAgICAgIHZhciAkY3RybCA9IHRoaXM7XHJcblxyXG4gICAgICAgICRjdHJsLiRvbkluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICRodHRwLmdldCgnYXBpL3B1Ymxpc2hlcicpLnRoZW4oZnVuY3Rpb24gKHIpIHtcclxuICAgICAgICAgICAgICAgICRjdHJsLnB1Ymxpc2hlcnMgPSByLmRhdGE7XHJcbiAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVyci5tZXNzYWdlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkY3RybC5jcmVhdGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICR1aWJNb2RhbC5vcGVuKHtcclxuICAgICAgICAgICAgICAgIGNvbXBvbmVudDogJ3B1Ymxpc2hlckVkaXQnLFxyXG4gICAgICAgICAgICAgICAgYmluZGluZ3M6IHtcclxuICAgICAgICAgICAgICAgICAgICBtb2RhbEluc3RhbmNlOiBcIjxcIlxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHNpemU6ICdsZydcclxuICAgICAgICAgICAgfSkucmVzdWx0LnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5pbmZvKFwiSSB3YXMgY2xvc2VkLCBzbyBkbyB3aGF0IEkgbmVlZCB0byBkbyBteUNvbnRlbnQncyBjb250cm9sbGVyIG5vdy4gIFJlc3VsdCB3YXMtPlwiKTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuaW5mbygncmV0dXJuaW5nIHJlc3VsdCcsIHJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICAkY3RybC5wdWJsaXNoZXJzLnVuc2hpZnQocmVzdWx0KTtcclxuICAgICAgICAgICAgICAgICRjdHJsLmlkID0gcmVzdWx0LmlkO1xyXG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmluZm8oXCJJIHdhcyBkaW1pc3NlZCwgc28gZG8gd2hhdCBJIG5lZWQgdG8gZG8gbXlDb250ZW50J3MgY29udHJvbGxlciBub3cuICBSZWFzb24gd2FzLT5cIiArIHJlYXNvbik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJGN0cmwuZWRpdCA9IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgICR1aWJNb2RhbC5vcGVuKHtcclxuICAgICAgICAgICAgICAgIGNvbXBvbmVudDogJ3B1Ymxpc2hlckVkaXQnLFxyXG4gICAgICAgICAgICAgICAgYmluZGluZ3M6IHtcclxuICAgICAgICAgICAgICAgICAgICBtb2RhbEluc3RhbmNlOiBcIjxcIlxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHJlc29sdmU6IHtcclxuICAgICAgICAgICAgICAgICAgICBpZDogJGN0cmwuaWRcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBzaXplOiAnbGcnXHJcbiAgICAgICAgICAgIH0pLnJlc3VsdC50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaCgkY3RybC5wdWJsaXNoZXJzLCBmdW5jdGlvbiAoaXRlbSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpdGVtLmlkID09PSAkY3RybC5pZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbmd1bGFyLmV4dGVuZChpdGVtLCByZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkY3RybC5pZCA9IGl0ZW0uaWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmluZm8oXCJJIHdhcyBkaW1pc3NlZCwgc28gZG8gd2hhdCBJIG5lZWQgdG8gZG8gbXlDb250ZW50J3MgY29udHJvbGxlciBub3cuICBSZWFzb24gd2FzLT5cIiArIHJlYXNvbik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBtb2R1bGUuY29tcG9uZW50KCdwdWJsaXNoZXJTZWxlY3QnLFxyXG4gICAge1xyXG4gICAgICAgIGJpbmRpbmdzOiB7XHJcbiAgICAgICAgICAgIGlkOiAnPSdcclxuICAgICAgICB9LFxyXG4gICAgICAgIHRlbXBsYXRlVXJsOiAnYXBwL2NvbW1vbi9wdWJsaXNoZXItc2VsZWN0LmNvbXBvbmVudC5odG1sJyxcclxuICAgICAgICBjb250cm9sbGVyOiBbJyRodHRwJywgJyR1aWJNb2RhbCcsIGNvbnRyb2xsZXJdXHJcbiAgICB9KTtcclxuXHJcblxyXG59XHJcbikoKTsiLCIvL2RpcmVjdGl2ZXMubW9kdWxlcy5qc1xyXG4oZnVuY3Rpb24oKSB7XHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwLmRpcmVjdGl2ZXMnLCBbXSk7IFxyXG59KSgpOyIsIi8vc3RUYWJsZS5kaXJlY3RpdmUuanNcclxuKGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICB2YXIgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ2FwcC5kaXJlY3RpdmVzJyk7XHJcblxyXG4gICAgbW9kdWxlLmRpcmVjdGl2ZSgnc3RTdWJtaXRTZWFyY2gnLCBbJ3N0Q29uZmlnJywgJyR0aW1lb3V0JywgJyRwYXJzZScsIGZ1bmN0aW9uIChzdENvbmZpZywgJHRpbWVvdXQsICRwYXJzZSkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHJlcXVpcmU6ICdec3RUYWJsZScsXHJcbiAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWxlbWVudCwgYXR0ciwgY3RybCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQuYmluZCgnY2xpY2snLFxyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhYmxlQ3RybCA9IGN0cmw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlQ3RybC5waXBlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH1dKTtcclxuXHJcbiAgICBtb2R1bGUuZGlyZWN0aXZlKFwiY2xlYXJLZXlcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnRUEnLFxyXG4gICAgICAgICAgICByZXF1aXJlOiAnbmdNb2RlbCcsXHJcbiAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWwsIGF0dHJzLCBjdHJsKSB7XHJcbiAgICAgICAgICAgICAgICBlbC5vbigna2V5ZG93bicsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChldmVudC53aGljaCAhPT0gMjcpIHsgcmV0dXJuOyB9IC8vIGNoZWNrIGtleSBob3cgeW91IHdhbnRcclxuICAgICAgICAgICAgICAgICAgICBjdHJsLiRzZXRWaWV3VmFsdWUobnVsbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY3RybC4kcmVuZGVyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUuJGFwcGx5KCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9KTtcclxuXHJcblxyXG4gICAgbW9kdWxlLmRpcmVjdGl2ZShcInN0UmVzZXRTZWFyY2hcIixcclxuICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICByZXN0cmljdDogJ0VBJyxcclxuICAgICAgICAgICAgICAgICAgICByZXF1aXJlOiBbJ15zdFRhYmxlJywgJ15uZ01vZGVsJ10sXHJcbiAgICAgICAgICAgICAgICAgICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50LCBhdHRycywgY3RybHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQuYmluZCgnY2xpY2snLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtb2RlbCA9IGN0cmxzWzFdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdHJsID0gY3RybHNbMF07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzY29wZS4kYXBwbHkoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmd1bGFyLmZvckVhY2gobW9kZWwuJHZpZXdWYWx1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICh2YWx1ZSwga2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGtleS50b0xvd2VyQ2FzZSgpID09PSAncGFnZScpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kZWwuJHZpZXdWYWx1ZVtrZXldID0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpIHx8IF8uaW5jbHVkZXMoa2V5LnRvTG93ZXJDYXNlKCksICdwYWdlJykpIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2RlbC4kdmlld1ZhbHVlW2tleV0gPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YWJsZVN0YXRlID0gY3RybC50YWJsZVN0YXRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlU3RhdGUuc2VhcmNoLnByZWRpY2F0ZU9iamVjdCA9IHt9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJsZVN0YXRlLnBhZ2luYXRpb24uc3RhcnQgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3RybC5waXBlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICBtb2R1bGUuZGlyZWN0aXZlKFwic3RDbGVhcktleVwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgcmVzdHJpY3Q6ICdFQScsXHJcbiAgICAgICAgICAgIHJlcXVpcmU6IFsnXnN0VGFibGUnLCAnXm5nTW9kZWwnXSxcclxuICAgICAgICAgICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50LCBhdHRycywgY3RybHMpIHtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQub24oJ2tleWRvd24nLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbmdNb2RlbCA9IGN0cmxzWzFdO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjdHJsID0gY3RybHNbMF07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChldmVudC53aGljaCA9PT0gMTMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGN0cmwucGlwZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQud2hpY2ggPT09IDI3KSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC5jb250ZXh0LmF0dHJpYnV0ZXNbJ3N0LXNlYXJjaCddICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzY29wZS4kYXBwbHkoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmaWVsZE5hbWUgPSBlbGVtZW50LmNvbnRleHQuYXR0cmlidXRlc1snc3Qtc2VhcmNoJ10udmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhYmxlU3RhdGUgPSBjdHJsLnRhYmxlU3RhdGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJsZVN0YXRlLnNlYXJjaC5wcmVkaWNhdGVPYmplY3RbZmllbGROYW1lXSA9ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjdHJsLnBpcGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzY29wZS4kYXBwbHkoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5nTW9kZWwuJHNldFZpZXdWYWx1ZShudWxsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZ01vZGVsLiRyZW5kZXIoKTsgLy8gd2lsbCB1cGRhdGUgdGhlIGlucHV0IHZhbHVlIGFzIHdlbGxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH0pO1xyXG5cclxufVxyXG4pKCk7IiwiLy9wdWJsaXNoZXItZWRpdC5jb21wb25lbnQuanNcclxuKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnYXBwJyk7XHJcblxyXG4gICAgZnVuY3Rpb24gcGFyc2VFcnJvcnMocmVzcG9uc2UpIHtcclxuICAgICAgICB2YXIgZXJyb3JzID0gW107XHJcbiAgICAgICAgdmFyIGtleTtcclxuXHJcbiAgICAgICAgZm9yIChrZXkgaW4gcmVzcG9uc2UubW9kZWxTdGF0ZSkge1xyXG4gICAgICAgICAgICBpZiAocmVzcG9uc2UubW9kZWxTdGF0ZS5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlc3BvbnNlLm1vZGVsU3RhdGVba2V5XS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGVycm9ycy5wdXNoKHJlc3BvbnNlLm1vZGVsU3RhdGVba2V5XVtpXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGVycm9ycztcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBjb250cm9sbGVyKHNlcnZpY2UsIHRvYXN0ciwgJGh0dHApIHtcclxuICAgICAgICB2YXIgJGN0cmwgPSB0aGlzO1xyXG5cclxuICAgICAgICAkY3RybC4kb25Jbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygncHVibGlzaGVyIGVkaXQgaW5pdCcsICRjdHJsKTtcclxuICAgICAgICAgICAgJGN0cmwudGl0bGUgPSAnTmV3IFB1Ymxpc2hlcic7XHJcbiAgICAgICAgICAgICRjdHJsLnB1Ymxpc2hlciA9IHt9O1xyXG5cclxuICAgICAgICAgICAgaWYgKCRjdHJsLnJlc29sdmUpIHtcclxuICAgICAgICAgICAgICAgICRjdHJsLmlkID0gJGN0cmwucmVzb2x2ZS5pZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoJGN0cmwuaWQpIHtcclxuICAgICAgICAgICAgICAgIHNlcnZpY2UuZ2V0KCRjdHJsLmlkKS50aGVuKGZ1bmN0aW9uIChyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJGN0cmwucHVibGlzaGVyID0gcjtcclxuICAgICAgICAgICAgICAgICAgICAkY3RybC50aXRsZSA9IHIubmFtZTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkY3RybC5jYW5jZWwgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICRjdHJsLmRpc21pc3MoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICRjdHJsLnNhdmUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAoJGN0cmwucHVibGlzaGVyLmlkKSB7XHJcbiAgICAgICAgICAgICAgICAkaHR0cC5wdXQoJ2FwaS9wdWJsaXNoZXInLCAkY3RybC5wdWJsaXNoZXIpLnRoZW4oZnVuY3Rpb24gKHIpIHtcclxuICAgICAgICAgICAgICAgICAgICBhbmd1bGFyLmV4dGVuZCgkY3RybC5wdWJsaXNoZXIsIHIuZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9hc3RyLnN1Y2Nlc3MoJ1NhdmVkIFB1Ymxpc2hlciAnLCAkY3RybC5wdWJsaXNoZXIubmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgJGN0cmwubW9kYWxJbnN0YW5jZS5jbG9zZSgkY3RybC5wdWJsaXNoZXIpO1xyXG4gICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdPb3BzLiBTb21ldGhpbmcgd2VudCB3cm9uZycsIGVycik7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9hc3RyLmVycm9yKCdPb3BzLiBTb21ldGhpbmcgaGFwcGVuZWQ6ICcgKyBlcnIuZGF0YS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICAkY3RybC5lcnJvcnMgPSBwYXJzZUVycm9ycyhlcnIuZGF0YSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICRodHRwLnBvc3QoJ2FwaS9wdWJsaXNoZXInLCAkY3RybC5wdWJsaXNoZXIpLnRoZW4oZnVuY3Rpb24gKHIpIHtcclxuICAgICAgICAgICAgICAgICAgICBhbmd1bGFyLmV4dGVuZCgkY3RybC5wdWJsaXNoZXIsIHIuZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9hc3RyLnN1Y2Nlc3MoJ1NhdmVkICcsICRjdHJsLnB1Ymxpc2hlci5uYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICAkY3RybC5tb2RhbEluc3RhbmNlLmNsb3NlKCRjdHJsLnB1Ymxpc2hlcik7XHJcbiAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ09vcHMuIFNvbWV0aGluZyB3ZW50IHdyb25nJywgZXJyKTtcclxuICAgICAgICAgICAgICAgICAgICB0b2FzdHIuZXJyb3IoJ09vcHMuIFNvbWV0aGluZyBoYXBwZW5lZDogJyArIGVyci5kYXRhLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICRjdHJsLmVycm9ycyA9IHBhcnNlRXJyb3JzKGVyci5kYXRhKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICB9O1xyXG5cclxuICAgIG1vZHVsZS5jb21wb25lbnQoJ3B1Ymxpc2hlckVkaXQnLFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYmluZGluZ3M6IHtcclxuICAgICAgICAgICAgICAgIGlkOiAnPCcsXHJcbiAgICAgICAgICAgICAgICByZXNvbHZlOiAnPCcsXHJcbiAgICAgICAgICAgICAgICBjbG9zZTogJyYnLFxyXG4gICAgICAgICAgICAgICAgZGlzbWlzczogJyYnLFxyXG4gICAgICAgICAgICAgICAgbW9kYWxJbnN0YW5jZTogJzwnXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnYXBwL3B1Ymxpc2hlcnMvcHVibGlzaGVyLWVkaXQuY29tcG9uZW50Lmh0bWwnLFxyXG4gICAgICAgICAgICBjb250cm9sbGVyOiBbJ1B1Ymxpc2hlcicsICd0b2FzdHInLCAnJGh0dHAnLCBjb250cm9sbGVyXVxyXG4gICAgICAgIH0pO1xyXG5cclxufVxyXG4pKCk7IiwiLy9wcm9kdWN0LWVkaXQuY29tcG9uZW50LmpzXHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ2FwcCcpO1xyXG5cclxuICAgIGZ1bmN0aW9uIGNvbnRyb2xsZXIoc2VydmljZSkge1xyXG4gICAgICAgIHZhciAkY3RybCA9IHRoaXM7XHJcblxyXG4gICAgICAgICRjdHJsLmRhdGVPcHRpb25zID0ge1xyXG4gICAgICAgICAgICBkYXRlRGlzYWJsZWQ6IGZhbHNlLFxyXG4gICAgICAgICAgICBmb3JtYXRZZWFyOiAneXknXHJcbiAgICAgICAgfTtcclxuICAgICAgICAkY3RybC5kYXRlRm9ybWF0ID0gXCJNTS9ERC9ZWVlZXCI7XHJcblxyXG4gICAgICAgICRjdHJsLiRvbkluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICRjdHJsLnRpdGxlID0gJ05ldyBQcm9kdWN0JztcclxuICAgICAgICAgICAgaWYgKCRjdHJsLnJlc29sdmUpIHtcclxuICAgICAgICAgICAgICAgICRjdHJsLmlkID0gJGN0cmwucmVzb2x2ZS5pZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoJGN0cmwuaWQpIHtcclxuICAgICAgICAgICAgICAgIHNlcnZpY2UuZ2V0UHJvZHVjdCgkY3RybC5pZCkudGhlbihmdW5jdGlvbiAocikge1xyXG4gICAgICAgICAgICAgICAgICAgICRjdHJsLnByb2R1Y3QgPSByO1xyXG4gICAgICAgICAgICAgICAgICAgICRjdHJsLnRpdGxlID0gci50aXRsZTtcclxuICAgICAgICAgICAgICAgICAgICAkY3RybC5wcm9kdWN0LnJlY2VpcHREYXRlID0gbmV3IERhdGUoci5yZWNlaXB0RGF0ZSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJGN0cmwuY2FuY2VsID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkY3RybC5kaXNtaXNzKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkY3RybC5zYXZlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gc2VydmljZS5zYXZlKCRjdHJsLnByb2R1Y3QpLnRoZW4oZnVuY3Rpb24gKHIpIHtcclxuICAgICAgICAgICAgICAgIGFuZ3VsYXIuZXh0ZW5kKCRjdHJsLnByb2R1Y3QsIHIpO1xyXG4gICAgICAgICAgICAgICAgJGN0cmwubW9kYWxJbnN0YW5jZS5jbG9zZSgkY3RybC5wcm9kdWN0KTtcclxuICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0Vycm9yIHNhdmluZyBwcm9kdWN0JywgZXJyLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICB9KS5maW5hbGx5KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkY3RybC5wdWJsaXNoZXJDaGFuZ2VkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygncHVibGlzaGVyIGNoYW5nZWQnKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbW9kdWxlLmNvbXBvbmVudCgncHJvZHVjdEVkaXQnLFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdhcHAvcHJvZHVjdC9wcm9kdWN0LWVkaXQuY29tcG9uZW50Lmh0bWwnLFxyXG4gICAgICAgICAgICBiaW5kaW5nczoge1xyXG4gICAgICAgICAgICAgICAgaWQ6ICc8JyxcclxuICAgICAgICAgICAgICAgIHJlc29sdmU6ICc8JyxcclxuICAgICAgICAgICAgICAgIGNsb3NlOiAnJicsXHJcbiAgICAgICAgICAgICAgICBkaXNtaXNzOiAnJicsXHJcbiAgICAgICAgICAgICAgICBtb2RhbEluc3RhbmNlOiAnPCdcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgY29udHJvbGxlcjogWydQcm9kdWN0JywgY29udHJvbGxlcl1cclxuICAgICAgICB9KTtcclxufSkoKTtcclxuIiwiLy9wcm9kdWN0LWxpc3QuY29tcG9uZW50LmpzXHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgdmFyIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdhcHAnKTtcclxuXHJcbiAgICBmdW5jdGlvbiBjb250cm9sbGVyKCRtb2RhbCwgJG5nQ29uZmlybSwgdG9hc3RyLCBwcm9kdWN0KSB7XHJcbiAgICAgICAgdmFyICRjdHJsID0gdGhpcztcclxuICAgICAgICB2YXIgcGFnZVNpemVEZWZhdWx0ID0gMTA7XHJcbiAgICAgICAgdmFyIHRhYmxlU3RhdGVSZWY7XHJcblxyXG4gICAgICAgICRjdHJsLnNlYXJjaE1vZGVsID0ge1xyXG4gICAgICAgICAgICBwYWdlOiAxLFxyXG4gICAgICAgICAgICBwYWdlU2l6ZTogcGFnZVNpemVEZWZhdWx0LCBcclxuICAgICAgICAgICAgZmlsdGVyZWRDb3VudDogMCwgXHJcbiAgICAgICAgICAgIHRvdGFsQ291bnQ6IDAsIFxyXG4gICAgICAgICAgICB0b3RhbFBhZ2VzOiAwXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJGN0cmwuJG9uSW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ3Byb2R1Y3QgbGlzdCBpbml0Jyk7XHJcbiAgICAgICAgICAgICRjdHJsLnRpdGxlID0gJ01lZGlhIExpYnJhcnknO1xyXG4gICAgICAgICAgICAkY3RybC5sb2FkaW5nID0gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICRjdHJsLnNlYXJjaCA9IGZ1bmN0aW9uICh0YWJsZVN0YXRlKSB7XHJcbiAgICAgICAgICAgICRjdHJsLmxvYWRpbmcgPSB0cnVlO1xyXG4gICAgICAgICAgICB0YWJsZVN0YXRlUmVmID0gdGFibGVTdGF0ZTtcclxuICAgICAgICAgICAgcHJvZHVjdC5nZXRBbGxQcm9kdWN0cygkY3RybC5zZWFyY2hNb2RlbCkudGhlbihmdW5jdGlvbiAocikge1xyXG4gICAgICAgICAgICAgICAgJGN0cmwucHJvZHVjdHMgPSByLnJlc3VsdHM7XHJcbiAgICAgICAgICAgICAgICAkY3RybC5zZWFyY2hNb2RlbCA9IHI7XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgJGN0cmwuc2VhcmNoTW9kZWwucmVzdWx0cztcclxuICAgICAgICAgICAgICAgICRjdHJsLmxvYWRpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikge1xyXG4gICAgICAgICAgICAgICAgJGN0cmwubG9hZGluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9KS5maW5hbGx5KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkY3RybC5wYWdlZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJGN0cmwuc2VhcmNoKHRhYmxlU3RhdGVSZWYpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJGN0cmwuY3JlYXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkbW9kYWwub3Blbih7XHJcbiAgICAgICAgICAgICAgICBjb21wb25lbnQ6ICdwcm9kdWN0RWRpdCcsXHJcbiAgICAgICAgICAgICAgICBiaW5kaW5nczoge1xyXG4gICAgICAgICAgICAgICAgICAgIG1vZGFsSW5zdGFuY2U6IFwiPFwiXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgc2l6ZTogJ21kJ1xyXG4gICAgICAgICAgICB9KS5yZXN1bHQudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAkY3RybC5wcm9kdWN0cy51bnNoaWZ0KHJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICB0b2FzdHIuaW5mbygnQ3JlYXRlZCAnICsgcmVzdWx0LnRpdGxlKTtcclxuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5pbmZvKFwiSSB3YXMgZGltaXNzZWQsIHNvIGRvIHdoYXQgSSBuZWVkIHRvIGRvIG15Q29udGVudCdzIGNvbnRyb2xsZXIgbm93LiAgUmVhc29uIHdhcy0+XCIgKyByZWFzb24pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICRjdHJsLmVkaXQgPSBmdW5jdGlvbiAoaXRlbSkge1xyXG4gICAgICAgICAgICAkbW9kYWwub3Blbih7XHJcbiAgICAgICAgICAgICAgICBjb21wb25lbnQ6ICdwcm9kdWN0RWRpdCcsXHJcbiAgICAgICAgICAgICAgICBiaW5kaW5nczoge1xyXG4gICAgICAgICAgICAgICAgICAgIG1vZGFsSW5zdGFuY2U6IFwiPFwiXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZToge1xyXG4gICAgICAgICAgICAgICAgICAgIGlkOiBpdGVtLmlkXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgc2l6ZTogJ21kJ1xyXG4gICAgICAgICAgICB9KS5yZXN1bHQudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBhbmd1bGFyLmV4dGVuZChpdGVtLCByZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgdG9hc3RyLmluZm8oJ1NhdmVkICcgKyByZXN1bHQudGl0bGUpO1xyXG4gICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdyZWFzb24nLCByZWFzb24pO1xyXG5cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkY3RybC5kZWxldGUgPSBmdW5jdGlvbiAoaXRlbSkge1xyXG4gICAgICAgICAgICAkbmdDb25maXJtKHtcclxuICAgICAgICAgICAgICAgIHRpdGxlOiAnRGVsZXRlJyxcclxuICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICdBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZGVsZXRlIDxiciAvPjxzdHJvbmc+JyArIGl0ZW0udGl0bGUgKyAnPC9zdHJvbmc+PycsXHJcbiAgICAgICAgICAgICAgICB0eXBlOiAncmVkJyxcclxuICAgICAgICAgICAgICAgIGJ1dHRvbnM6IHtcclxuICAgICAgICAgICAgICAgICAgICB5ZXM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAga2V5czogWyd5J10sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbjogZnVuY3Rpb24gKHNjb3BlLCBidXR0b24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2R1Y3QucmVtb3ZlKGl0ZW0uaWQpLnRoZW4oZnVuY3Rpb24gKHIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaWR4ID0gJGN0cmwucHJvZHVjdHMuaW5kZXhPZihpdGVtKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkY3RybC5wcm9kdWN0cy5zcGxpY2UoaWR4LCAxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2FzdHIud2FybmluZygnRGVsZXRlZCAnICsgaXRlbS50aXRsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgbm86IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAga2V5czogWydOJ10sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbjogZnVuY3Rpb24gKHNjb3BlLCBidXR0b24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkY3RybC5zaG93RGV0YWlscyA9IGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgICAgICAgICAgICRtb2RhbC5vcGVuKHtcclxuICAgICAgICAgICAgICAgIGNvbXBvbmVudDogJ3Byb2R1Y3RTdW1tYXJ5JyxcclxuICAgICAgICAgICAgICAgIGJpbmRpbmdzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbW9kYWxJbnN0YW5jZTogXCI8XCJcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICByZXNvbHZlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWQ6IGl0ZW0uaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgYXNNb2RhbDogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHNpemU6ICdtZCdcclxuICAgICAgICAgICAgfSkucmVzdWx0LnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5pbmZvKFwiSSB3YXMgY2xvc2VkLCBzbyBkbyB3aGF0IEkgbmVlZCB0byBkbyBteUNvbnRlbnQncyBjb250cm9sbGVyIG5vdy4gIFJlc3VsdCB3YXMtPlwiKTtcclxuICAgICAgICAgICAgICAgIGFuZ3VsYXIuZXh0ZW5kKGl0ZW0sIHJlc3VsdCk7XHJcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuaW5mbyhcIkkgd2FzIGRpbWlzc2VkLCBzbyBkbyB3aGF0IEkgbmVlZCB0byBkbyBteUNvbnRlbnQncyBjb250cm9sbGVyIG5vdy4gIFJlYXNvbiB3YXMtPlwiICsgcmVhc29uKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG1vZHVsZS5jb21wb25lbnQoJ3Byb2R1Y3RMaXN0JyxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnYXBwL3Byb2R1Y3QvcHJvZHVjdC1saXN0LmNvbXBvbmVudC5odG1sJyxcclxuICAgICAgICAgICAgY29udHJvbGxlcjogWyckdWliTW9kYWwnLCAnJG5nQ29uZmlybScsICd0b2FzdHInLCAnUHJvZHVjdCcsIGNvbnRyb2xsZXJdXHJcbiAgICAgICAgfSk7XHJcblxyXG59XHJcbikoKTsiLCIvL3Byb2R1Y3Qtc3VtbWFyeS5jb21wb25lbnQuanNcclxuKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnYXBwJyk7XHJcblxyXG4gICAgZnVuY3Rpb24gY29udHJvbGxlcigkbW9kYWwsIHNlcnZpY2UpIHtcclxuICAgICAgICB2YXIgJGN0cmwgPSB0aGlzO1xyXG5cclxuICAgICAgICAkY3RybC4kb25Jbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkY3RybC5sb2FkaW5nID0gdHJ1ZTsgXHJcbiAgICAgICAgICAgIGlmICgkY3RybC5yZXNvbHZlKSB7XHJcbiAgICAgICAgICAgICAgICAkY3RybC5pZCA9ICRjdHJsLnJlc29sdmUuaWQ7XHJcbiAgICAgICAgICAgICAgICAkY3RybC5hc01vZGFsID0gJGN0cmwucmVzb2x2ZS5hc01vZGFsO1xyXG4gICAgICAgICAgICAgICAgJGN0cmwuYWRkU3RhZmZWaXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHNlcnZpY2UuZ2V0UHJvZHVjdCgkY3RybC5pZCkudGhlbihmdW5jdGlvbiAocikge1xyXG4gICAgICAgICAgICAgICAgJGN0cmwucHJvZHVjdCA9IHI7XHJcbiAgICAgICAgICAgICAgICAkY3RybC5sb2FkaW5nID0gZmFsc2U7IFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICRjdHJsLmVkaXQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgJG1vZGFsLm9wZW4oe1xyXG4gICAgICAgICAgICAgICAgY29tcG9uZW50OiAncHJvZHVjdEVkaXQnLFxyXG4gICAgICAgICAgICAgICAgYmluZGluZ3M6IHtcclxuICAgICAgICAgICAgICAgICAgICBtb2RhbEluc3RhbmNlOiBcIjxcIlxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHJlc29sdmU6IHtcclxuICAgICAgICAgICAgICAgICAgICBpZDogJGN0cmwucHJvZHVjdC5pZFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHNpemU6ICdtZCdcclxuICAgICAgICAgICAgfSkucmVzdWx0LnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgYW5ndWxhci5leHRlbmQoJGN0cmwucHJvZHVjdCwgcmVzdWx0KTtcclxuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICRjdHJsLnNob3dOZXdTdGFmZiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAkbW9kYWwub3Blbih7XHJcbiAgICAgICAgICAgICAgICBjb21wb25lbnQ6ICdzdGFmZkVkaXQnLFxyXG4gICAgICAgICAgICAgICAgYmluZGluZ3M6IHtcclxuICAgICAgICAgICAgICAgICAgICBtb2RhbEluc3RhbmNlOiBcIjxcIlxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHJlc29sdmU6IHtcclxuICAgICAgICAgICAgICAgICAgICBwcm9kdWN0SWQ6ICRjdHJsLmlkXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgc2l6ZTogJ21kJ1xyXG4gICAgICAgICAgICB9KS5yZXN1bHQudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmluZm8oXCJJIHdhcyBjbG9zZWQsIHNvIGRvIHdoYXQgSSBuZWVkIHRvIGRvIG15Q29udGVudCdzIGNvbnRyb2xsZXIgbm93LiAgUmVzdWx0IHdhcy0+XCIpO1xyXG4gICAgICAgICAgICAgICAgJGN0cmwucHJvZHVjdC5zdGFmZi51bnNoaWZ0KHJlc3VsdCk7XHJcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuaW5mbyhcIkkgd2FzIGRpbWlzc2VkLCBzbyBkbyB3aGF0IEkgbmVlZCB0byBkbyBteUNvbnRlbnQncyBjb250cm9sbGVyIG5vdy4gIFJlYXNvbiB3YXMtPlwiICsgcmVhc29uKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkY3RybC5jYW5jZWwgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICRjdHJsLm1vZGFsSW5zdGFuY2UuY2xvc2UoJGN0cmwucHJvZHVjdCk7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBtb2R1bGUuY29tcG9uZW50KCdwcm9kdWN0U3VtbWFyeScsXHJcbiAgICB7XHJcbiAgICAgICAgYmluZGluZ3M6IHtcclxuICAgICAgICAgICAgaWQ6ICc8JyxcclxuICAgICAgICAgICAgYXNNb2RhbDogJzwnLFxyXG4gICAgICAgICAgICByZXNvbHZlOiAnPCcsXHJcbiAgICAgICAgICAgIGNsb3NlOiAnJicsXHJcbiAgICAgICAgICAgIGRpc21pc3M6ICcmJywgXHJcbiAgICAgICAgICAgIG1vZGFsSW5zdGFuY2U6ICc8J1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdGVtcGxhdGVVcmw6ICdhcHAvcHJvZHVjdC9wcm9kdWN0LXN1bW1hcnkuY29tcG9uZW50Lmh0bWwnLFxyXG4gICAgICAgIGNvbnRyb2xsZXI6IFsnJHVpYk1vZGFsJywgJ1Byb2R1Y3QnLCBjb250cm9sbGVyXVxyXG4gICAgfSk7XHJcblxyXG59XHJcbikoKTsiLCIvL3Byb2R1Y3Quc2VydmljZS5qc1xyXG4oZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG4gICAgdmFyIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdhcHAnKTsgXHJcbiAgICBcclxuICAgIG1vZHVsZS5mYWN0b3J5KCdQcm9kdWN0JywgWyckaHR0cCcsIHNlcnZpY2VDb250cm9sbGVyXSk7XHJcblxyXG4gICAgZnVuY3Rpb24gc2VydmljZUNvbnRyb2xsZXIoJGh0dHApIHtcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgZ2V0UHJvZHVjdDogZ2V0UHJvZHVjdCxcclxuICAgICAgICAgICAgZ2V0QWxsUHJvZHVjdHM6IGdldEFsbFByb2R1Y3RzLFxyXG4gICAgICAgICAgICByZW1vdmU6IHJlbW92ZSwgXHJcbiAgICAgICAgICAgIHNhdmU6IHNhdmVcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBnZXRQcm9kdWN0KGlkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5nZXQoJ2FwaS9wcm9kdWN0LycgKyBpZCkudGhlbihmdW5jdGlvbiAocikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHIuZGF0YTtcclxuICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGdldEFsbFByb2R1Y3RzKHNlYXJjaE1vZGVsKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5nZXQoJ2FwaS9wcm9kdWN0JywgeyBwYXJhbXM6IHNlYXJjaE1vZGVsIH0pLnRoZW4oZnVuY3Rpb24gKHIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByLmRhdGE7XHJcbiAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVyci5tZXNzYWdlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiByZW1vdmUoaWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRodHRwLmRlbGV0ZSgnYXBpL3Byb2R1Y3QvJyArIGlkKS50aGVuKGZ1bmN0aW9uKHIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByLmRhdGE7XHJcbiAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uKGVycikge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICB9KTsgXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBzYXZlKHByb2R1Y3QpIHtcclxuICAgICAgICAgICAgaWYgKHByb2R1Y3QuaWQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAkaHR0cC5wdXQoJ2FwaS9wcm9kdWN0JywgcHJvZHVjdCkudGhlbihmdW5jdGlvbihyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIuZGF0YTtcclxuICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uKGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBlcnIubWVzc2FnZTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICRodHRwLnBvc3QoJ2FwaS9wcm9kdWN0JywgcHJvZHVjdCkudGhlbihmdW5jdGlvbiAocikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByLmRhdGE7XHJcbiAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVyci5tZXNzYWdlO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxufVxyXG4pKCk7IiwiLy9wcm9kdWN0LnNlcnZpY2UuanNcclxuKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuICAgIHZhciBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnYXBwJyk7IFxyXG4gICAgXHJcbiAgICBtb2R1bGUuZmFjdG9yeSgnUHVibGlzaGVyJywgWyckaHR0cCcsICd0b2FzdHInLCBzZXJ2aWNlQ29udHJvbGxlcl0pO1xyXG5cclxuICAgIGZ1bmN0aW9uIHNlcnZpY2VDb250cm9sbGVyKCRodHRwLCBsb2cpIHtcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgZ2V0OiBnZXQsXHJcbiAgICAgICAgICAgIGdldEFsbFB1Ymxpc2hlcnM6IGdldEFsbFB1Ymxpc2hlcnMsXHJcbiAgICAgICAgICAgIHJlbW92ZTogcmVtb3ZlLCBcclxuICAgICAgICAgICAgc2F2ZTogc2F2ZVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGdldChpZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KCdhcGkvcHVibGlzaGVyLycgKyBpZCkudGhlbihmdW5jdGlvbiAocikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHIuZGF0YTtcclxuICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ09vcHMuIFNvbWV0aGluZyBoYXBwZW5lZCBnZXR0aW5nIHB1Ymxpc2hlcicpO1xyXG4gICAgICAgICAgICAgICAgbG9nLmVycm9yKCdPb3BzLiBTb210aGluZyBoYXBwZW5lZCBnZXR0aW5nIHB1Ymxpc2hlcjogJyArIGVyci5kYXRhLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGdldEFsbFB1Ymxpc2hlcnMoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5nZXQoJ2FwaS9wdWJsaXNoZXInKS50aGVuKGZ1bmN0aW9uIChyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gci5kYXRhO1xyXG4gICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIubWVzc2FnZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gcmVtb3ZlKGlkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5kZWxldGUoJ2FwaS9wdWJsaXNoZXIvJyArIGlkKS50aGVuKGZ1bmN0aW9uKHIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByLmRhdGE7XHJcbiAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uKGVycikge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICB9KTsgXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBzYXZlKHByb2R1Y3QpIHtcclxuICAgICAgICAgICAgaWYgKHByb2R1Y3QuaWQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAkaHR0cC5wdXQoJ2FwaS9wdWJsaXNoZXInLCBwcm9kdWN0KS50aGVuKGZ1bmN0aW9uKHIpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gci5kYXRhO1xyXG4gICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBlcnI7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdwb3N0aW5nJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJGh0dHAucG9zdCgnYXBpL3Byb2R1Y3QnLCBwcm9kdWN0KS50aGVuKF9zdWNjZXNzLCBfZmFpbHVyZSk7XHJcbiAgICAgICAgICAgICAgICAvL3JldHVybiAkaHR0cC5wb3N0KCdhcGkvcHJvZHVjdCcsIHByb2R1Y3QpLnRoZW4oZnVuY3Rpb24gKHIpIHtcclxuICAgICAgICAgICAgICAgIC8vICAgIGNvbnNvbGUubG9nKCdzdWNjZXNzJywgcik7XHJcbiAgICAgICAgICAgICAgICAvLyAgICByZXR1cm4gci5kYXRhO1xyXG4gICAgICAgICAgICAgICAgLy99LCBmdW5jdGlvbiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAvLyAgICBjb25zb2xlLmxvZygnZXJyb3InLCBlcnIpO1xyXG4gICAgICAgICAgICAgICAgLy8gICAgcmV0dXJuIGVycjtcclxuICAgICAgICAgICAgICAgIC8vfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBmdW5jdGlvbiBfc3VjY2VzcyhyZXN1bHQpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ3N1Y2Nlc3MnLCByZXN1bHQpO1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0LmRhdGE7IFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gX2ZhaWx1cmUoZXJyKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdlcnJvcicsIGVycik7XHJcbiAgICAgICAgICAgIHJldHVybiBlcnIuZGF0YTsgXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxufVxyXG4pKCk7IiwiLy9zdGFmZi1lZGl0LmNvbXBvbmVudC5qc1xyXG4oZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdhcHAnKTtcclxuXHJcbiAgICBmdW5jdGlvbiBjb250cm9sbGVyKCRodHRwKSB7XHJcbiAgICAgICAgdmFyICRjdHJsID0gdGhpcztcclxuXHJcbiAgICAgICAgJGN0cmwuJG9uSW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ3N0YWZmIGVkaXQgaW5pdCcpO1xyXG4gICAgICAgICAgICAkY3RybC50aXRsZSA9ICdOZXcgU3RhZmYnO1xyXG5cclxuICAgICAgICAgICAgaWYgKCRjdHJsLnJlc29sdmUpICRjdHJsLnByb2R1Y3RJZCA9ICRjdHJsLnJlc29sdmUucHJvZHVjdElkO1xyXG5cclxuICAgICAgICAgICAgaWYgKCRjdHJsLnJlc29sdmUuc3RhZmYpIHtcclxuICAgICAgICAgICAgICAgICRjdHJsLnN0YWZmID0gJGN0cmwucmVzb2x2ZS5zdGFmZjtcclxuICAgICAgICAgICAgICAgICRjdHJsLnRpdGxlID0gJGN0cmwuc3RhZmYuZmlyc3RuYW1lICsgJyAnICsgJGN0cmwuc3RhZmYubGFzdG5hbWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICRjdHJsLmNhbmNlbCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJGN0cmwuZGlzbWlzcygpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRjdHJsLnNhdmUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICgkY3RybC5wcm9kdWN0SWQpIHtcclxuICAgICAgICAgICAgICAgICRodHRwLnBvc3QoJ2FwaS9zdGFmZi8nICsgJGN0cmwucHJvZHVjdElkLCAkY3RybC5zdGFmZikudGhlbihmdW5jdGlvbiAocikge1xyXG4gICAgICAgICAgICAgICAgICAgIGFuZ3VsYXIuZXh0ZW5kKCRjdHJsLnN0YWZmLCByLmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICRjdHJsLm1vZGFsSW5zdGFuY2UuY2xvc2Uoci5kYXRhKTtcclxuICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnc29tZXRoaW5nIHdlbnQgd3JvbmcnLCBlcnIubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICRodHRwLnBvc3QoJ2FwaS9zdGFmZicsICRjdHJsLnN0YWZmKS50aGVuKGZ1bmN0aW9uIChyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYW5ndWxhci5leHRlbmQoJGN0cmwuc3RhZmYsIHIuZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgJGN0cmwubW9kYWxJbnN0YW5jZS5jbG9zZShyLmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdzb21ldGhpbmcgd2VudCB3cm9uZycsIGVyci5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICBtb2R1bGUuY29tcG9uZW50KCdzdGFmZkVkaXQnLFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYmluZGluZ3M6IHtcclxuICAgICAgICAgICAgICAgIHJlc29sdmU6ICc8JyxcclxuICAgICAgICAgICAgICAgIGNsb3NlOiAnJicsXHJcbiAgICAgICAgICAgICAgICBkaXNtaXNzOiAnJicsXHJcbiAgICAgICAgICAgICAgICBzdGFmZjogJzwnLFxyXG4gICAgICAgICAgICAgICAgcHJvZHVjdElkOiAnPCcsXHJcbiAgICAgICAgICAgICAgICBtb2RhbEluc3RhbmNlOiAnPCdcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdhcHAvc3RhZmYvc3RhZmYtZWRpdC5jb21wb25lbnQuaHRtbCcsXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6IFsnJGh0dHAnLCBjb250cm9sbGVyXVxyXG4gICAgICAgIH0pO1xyXG59XHJcbikoKTsiLCIvL3N0YWZmLWxpc3QuY29tcG9uZW50LmpzXHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ2FwcCcpO1xyXG5cclxuICAgIGZ1bmN0aW9uIGNvbnRyb2xsZXIoJGh0dHAsICRtb2RhbCwgJG5nQ29uZmlybSkge1xyXG4gICAgICAgIHZhciAkY3RybCA9IHRoaXM7XHJcblxyXG4gICAgICAgICRjdHJsLiRvbkluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdzdGFmZiBsaXN0IGluaXQnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICRjdHJsLmVkaXQgPSBmdW5jdGlvbiAobWVtYmVyKSB7XHJcbiAgICAgICAgICAgICRtb2RhbC5vcGVuKHtcclxuICAgICAgICAgICAgICAgIGNvbXBvbmVudDogJ3N0YWZmRWRpdCcsXHJcbiAgICAgICAgICAgICAgICBiaW5kaW5nczoge1xyXG4gICAgICAgICAgICAgICAgICAgIG1vZGFsSW5zdGFuY2U6IFwiPFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0YWZmOiBtZW1iZXJcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICByZXNvbHZlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RhZmY6IG1lbWJlclxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHNpemU6ICdtZCdcclxuICAgICAgICAgICAgfSkucmVzdWx0LnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5pbmZvKFwiSSB3YXMgY2xvc2VkLCBzbyBkbyB3aGF0IEkgbmVlZCB0byBkbyBteUNvbnRlbnQncyBjb250cm9sbGVyIG5vdy4gIFJlc3VsdCB3YXMtPlwiKTtcclxuXHJcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuaW5mbyhcIkkgd2FzIGRpbWlzc2VkLCBzbyBkbyB3aGF0IEkgbmVlZCB0byBkbyBteUNvbnRlbnQncyBjb250cm9sbGVyIG5vdy4gIFJlYXNvbiB3YXMtPlwiICsgcmVhc29uKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkY3RybC5kZWxldGUgPSBmdW5jdGlvbiAobWVtYmVyKSB7XHJcbiAgICAgICAgICAgICRuZ0NvbmZpcm0oe1xyXG4gICAgICAgICAgICAgICAgdGl0bGU6ICdEZWxldGUnLFxyXG4gICAgICAgICAgICAgICAgY29udGVudDogJ0FyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgPGJyIC8+PHN0cm9uZz4nICsgbWVtYmVyLmZpcnN0bmFtZSArIG1lbWJlci5sYXN0bmFtZSArICc8L3N0cm9uZz4/JyxcclxuICAgICAgICAgICAgICAgIHR5cGU6ICdyZWQnLFxyXG4gICAgICAgICAgICAgICAgYnV0dG9uczoge1xyXG4gICAgICAgICAgICAgICAgICAgIHllczoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXlzOiBbJ3knXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiBmdW5jdGlvbiAoc2NvcGUsIGJ1dHRvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJGh0dHAuZGVsZXRlKCdhcGkvc3RhZmYvJyArIG1lbWJlci5pZCkudGhlbihmdW5jdGlvbiAocikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpZHggPSAkY3RybC5zdGFmZi5pbmRleE9mKG1lbWJlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGN0cmwuc3RhZmYuc3BsaWNlKGlkeCwgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2Vycm9yJywgZXJyLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIG5vOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleXM6IFsnTiddLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb246IGZ1bmN0aW9uIChzY29wZSwgYnV0dG9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG1vZHVsZS5jb21wb25lbnQoJ3N0YWZmTGlzdCcsXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBiaW5kaW5nczoge1xyXG4gICAgICAgICAgICAgICAgc3RhZmY6ICc8J1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2FwcC9zdGFmZi9zdGFmZi1saXN0LmNvbXBvbmVudC5odG1sJyxcclxuICAgICAgICAgICAgY29udHJvbGxlcjogWyckaHR0cCcsICckdWliTW9kYWwnLCAnJG5nQ29uZmlybScsIGNvbnRyb2xsZXJdXHJcbiAgICAgICAgfSk7XHJcbn1cclxuKSgpOyJdfQ==
