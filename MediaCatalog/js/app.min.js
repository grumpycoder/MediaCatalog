!function(){"use strict";var r=angular.module("app",["ngStorage","app.directives","shared.components","ui.bootstrap","smart-table"]).config(["$localStorageProvider","$httpProvider",function(r,e){r.setKeyPrefix("mc-"),e.interceptors.push("AuthenticationInterceptor")}]);r.factory("AuthenticationInterceptor",["$localStorage","$window",function(r,e){var t=this;return t.request=function(e){return e.headers=e.headers||{},r.currentUser&&(e.headers.Authorization="Bearer "+r.currentUser.token),e},t.responseError=function(r){return console.log("response error",r),401!==r.status&&403!==r.status||(e.location="/account/login"),$q.reject(r)},t}])}();
!function(){angular.module("shared.components",[])}();
!function(){function n(n,o){var e=this;e.$onInit=function(){n.get("api/publisher").then(function(n){e.publishers=n.data}).catch(function(n){console.log(n.message)})},e.create=function(){o.open({component:"publisherEdit",bindings:{modalInstance:"<"},size:"lg"}).result.then(function(n){console.info("I was closed, so do what I need to do myContent's controller now.  Result was->"),console.info("returning result",n),e.publishers.unshift(n),e.id=n.id},function(n){console.info("I was dimissed, so do what I need to do myContent's controller now.  Reason was->"+n)})},e.edit=function(){o.open({component:"publisherEdit",bindings:{modalInstance:"<"},resolve:{id:e.id},size:"lg"}).result.then(function(n){angular.forEach(e.publishers,function(o){o.id===e.id&&(angular.extend(o,n),e.id=o.id)})},function(n){console.info("I was dimissed, so do what I need to do myContent's controller now.  Reason was->"+n)})}}var o=angular.module("shared.components");o.component("publisherSelect",{bindings:{id:"="},templateUrl:"app/common/publisher-select.component.html",controller:["$http","$uibModal",n]})}();
!function(){angular.module("app.directives",[])}();
!function(){var e=angular.module("app.directives");e.directive("stSubmitSearch",["stConfig","$timeout","$parse",function(e,t,r){return{require:"^stTable",link:function(e,t,r,n){return t.bind("click",function(){var e=n;e.pipe()})}}}]),e.directive("clearKey",function(){return{restrict:"EA",require:"ngModel",link:function(e,t,r,n){t.on("keydown",function(t){27===t.which&&(n.$setViewValue(null),n.$render(),e.$apply())})}}}),e.directive("stResetSearch",function(){return{restrict:"EA",require:["^stTable","^ngModel"],link:function(e,t,r,n){return t.bind("click",function(){var t=n[1],r=n[0];return e.$apply(function(){angular.forEach(t.$viewValue,function(e,r){"page"===r.toLowerCase()&&(t.$viewValue[r]=1),Array.isArray(e)||_.includes(r.toLowerCase(),"page")||(t.$viewValue[r]=null)});var e=r.tableState();return e.search.predicateObject={},e.pagination.start=0,r.pipe()})})}}}),e.directive("stClearKey",function(){return{restrict:"EA",require:["^stTable","^ngModel"],link:function(e,t,r,n){t.on("keydown",function(r){var i=n[1],a=n[0];return 13===r.which?a.pipe():27===r.which?void 0!==t.context.attributes["st-search"]?e.$apply(function(){var e=t.context.attributes["st-search"].value,r=a.tableState();return r.search.predicateObject[e]="",a.pipe()}):e.$apply(function(){i.$setViewValue(null),i.$render()}):void 0})}}})}();
!function(){function t(t){var n=this;n.$onInit=function(){n.title="New Product",n.resolve&&(n.id=n.resolve.id),n.id&&t.getProduct(n.id).then(function(t){n.product=t,n.title=t.title})},n.cancel=function(){n.dismiss()},n.save=function(){return t.save(n.product).then(function(t){angular.extend(n.product,t)}).catch(function(t){console.log("Error saving product",t.message)}).finally(function(){n.modalInstance.close(n.product)})}}var n=angular.module("app");n.component("productEdit",{templateUrl:"app/product/product-edit.component.html",bindings:{id:"<",resolve:"<",close:"&",dismiss:"&",modalInstance:"<"},controller:["Product",t]})}();
!function(){"use strict";function o(o,n,e){var t,s=this,c=10;s.searchModel={page:1,pageSize:c},s.$onInit=function(){console.log("product list init"),s.title="Product List",e.getToken()},s.search=function(o){t=o,console.log("search"),n.getAllProducts(s.searchModel).then(function(o){s.products=o.results,s.searchModel=o,delete s.searchModel.results})},s.paged=function(){s.search(t)},s.create=function(){o.open({component:"productEdit",bindings:{modalInstance:"<"},size:"md"}).result.then(function(o){s.products.unshift(o)},function(o){console.info("I was dimissed, so do what I need to do myContent's controller now.  Reason was->"+o)})},s.edit=function(n){o.open({component:"productEdit",bindings:{modalInstance:"<"},resolve:{id:n.id},size:"md"}).result.then(function(o){angular.extend(n,o)},function(o){})},s.delete=function(o){console.log("delete",o),n.remove(o.id).then(function(n){var e=s.products.indexOf(o);s.products.splice(e,1)})},s.showDetails=function(n){o.open({component:"productSummary",bindings:{modalInstance:"<"},resolve:{id:n,asModal:!0},size:"md"}).result.then(function(o){console.info("I was closed, so do what I need to do myContent's controller now.  Result was->"),console.info(o)},function(o){console.info("I was dimissed, so do what I need to do myContent's controller now.  Reason was->"+o)})}}var n=angular.module("app");n.component("productList",{templateUrl:"app/product/product-list.component.html",controller:["$uibModal","Product","User",o]})}();
!function(){function o(o,n){var t=this;t.$onInit=function(){t.resolve&&(t.id=t.resolve.id,t.asModal=t.resolve.asModal,t.addStaffVisible=!1),n.getProduct(t.id).then(function(o){t.product=o})},t.showNewStaff=function(){o.open({component:"staffEdit",bindings:{modalInstance:"<"},resolve:{productId:t.id},size:"md"}).result.then(function(o){console.info("I was closed, so do what I need to do myContent's controller now.  Result was->"),t.product.staff.unshift(o)},function(o){console.info("I was dimissed, so do what I need to do myContent's controller now.  Reason was->"+o)})},t.cancel=function(){t.dismiss()}}var n=angular.module("app");n.component("productSummary",{bindings:{id:"<",asModal:"<",resolve:"<",close:"&",dismiss:"&"},templateUrl:"app/product/product-summary.component.html",controller:["$uibModal","Product",o]})}();
!function(){function t(t,r){function e(){if(r.currentUser){var e=r.currentUser;t.post("api/auth/authenticate?user="+e.user+"&password="+e.password).then(function(t){e.token=t.data,r.currentUser=e}).catch(function(t){})}}return{getToken:e}}var r=angular.module("app");r.service("User",["$http","$localStorage",t])}();
!function(){"use strict";function t(t){function n(n){return t.get("api/product/"+n).then(function(t){return t.data}).catch(function(t){console.log(t.message)})}function e(n){return t.get("api/product",{params:n}).then(function(t){return t.data}).catch(function(t){console.log(t.message)})}function u(n){return t.delete("api/product/"+n).then(function(t){return t.data}).catch(function(t){console.log(t.message)})}function c(n){return n.id?t.put("api/product",n).then(function(t){return t.data}).catch(function(t){return t.message}):t.post("api/product",n).then(function(t){return t.data}).catch(function(t){return t.message})}return{getProduct:n,getAllProducts:e,remove:u,save:c}}var n=angular.module("app");n.factory("Product",["$http",t])}();
!function(){function t(t){var a=this;a.$onInit=function(){console.log("staff edit init"),a.title="New Staff",a.resolve&&(a.productId=a.resolve.productId),a.resolve.staff&&(a.staff=a.resolve.staff,a.title=a.staff.firstname+" "+a.staff.lastname)},a.cancel=function(){a.dismiss()},a.save=function(){a.productId?t.post("api/staff/"+a.productId,a.staff).then(function(t){angular.extend(a.staff,t.data),a.modalInstance.close(t.data)}).catch(function(t){console.log("something went wrong",t.message)}):t.post("api/staff",a.staff).then(function(t){angular.extend(a.staff,t.data),a.modalInstance.close(t.data)}).catch(function(t){console.log("something went wrong",t.message)})}}var a=angular.module("app");a.component("staffEdit",{bindings:{resolve:"<",close:"&",dismiss:"&",staff:"<",productId:"<",modalInstance:"<"},templateUrl:"app/staff/staff-edit.component.html",controller:["$http",t]})}();
!function(){function n(n,t){var o=this;o.$onInit=function(){console.log("staff list init")},o.edit=function(n){t.open({component:"staffEdit",bindings:{modalInstance:"<",staff:n},resolve:{staff:n},size:"md"}).result.then(function(n){console.info("I was closed, so do what I need to do myContent's controller now.  Result was->")},function(n){console.info("I was dimissed, so do what I need to do myContent's controller now.  Reason was->"+n)})},o.delete=function(t){n.delete("api/staff/"+t.id).then(function(n){var e=o.staff.indexOf(t);o.staff.splice(e,1)}).catch(function(n){console.log("error",n.message)})}}var t=angular.module("app");t.component("staffList",{bindings:{staff:"<"},templateUrl:"app/staff/staff-list.component.html",controller:["$http","$uibModal",n]})}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5tb2R1bGUuanMiLCJjb21tb24vY29tcG9uZW50cy5tb2R1bGUuanMiLCJjb21tb24vcHVibGlzaGVyLXNlbGVjdC5jb21wb25lbnQuanMiLCJkaXJlY3RpdmVzL2RpcmVjdGl2ZXMubW9kdWxlcy5qcyIsImRpcmVjdGl2ZXMvc3RUYWJsZS5kaXJlY3RpdmUuanMiLCJwcm9kdWN0L3Byb2R1Y3QtZWRpdC5jb21wb25lbnQuanMiLCJwcm9kdWN0L3Byb2R1Y3QtbGlzdC5jb21wb25lbnQuanMiLCJwcm9kdWN0L3Byb2R1Y3Qtc3VtbWFyeS5jb21wb25lbnQuanMiLCJzZXJ2aWNlcy9hdXRoLnNlcnZpY2UuanMiLCJzZXJ2aWNlcy9wcm9kdWN0LnNlcnZpY2UuanMiLCJzdGFmZi9zdGFmZi1lZGl0LmNvbXBvbmVudC5qcyIsInN0YWZmL3N0YWZmLWxpc3QuY29tcG9uZW50LmpzIl0sIm5hbWVzIjpbIm1vZHVsZSIsImFuZ3VsYXIiLCJjb25maWciLCIkbG9jYWxTdG9yYWdlUHJvdmlkZXIiLCIkaHR0cFByb3ZpZGVyIiwic2V0S2V5UHJlZml4IiwiaW50ZXJjZXB0b3JzIiwicHVzaCIsImZhY3RvcnkiLCIkbG9jYWxTdG9yYWdlIiwiJHdpbmRvdyIsInNlcnZpY2UiLCJ0aGlzIiwicmVxdWVzdCIsImhlYWRlcnMiLCJjdXJyZW50VXNlciIsIkF1dGhvcml6YXRpb24iLCJ0b2tlbiIsInJlc3BvbnNlRXJyb3IiLCJyZXNwb25zZSIsImNvbnNvbGUiLCJsb2ciLCJzdGF0dXMiLCJsb2NhdGlvbiIsIiRxIiwicmVqZWN0IiwiY29udHJvbGxlciIsIiRodHRwIiwiJHVpYk1vZGFsIiwiJGN0cmwiLCIkb25Jbml0IiwiZ2V0IiwidGhlbiIsInIiLCJwdWJsaXNoZXJzIiwiZGF0YSIsImNhdGNoIiwiZXJyIiwibWVzc2FnZSIsImNyZWF0ZSIsIm9wZW4iLCJjb21wb25lbnQiLCJiaW5kaW5ncyIsIm1vZGFsSW5zdGFuY2UiLCJzaXplIiwicmVzdWx0IiwiaW5mbyIsInVuc2hpZnQiLCJpZCIsInJlYXNvbiIsImVkaXQiLCJyZXNvbHZlIiwiZm9yRWFjaCIsIml0ZW0iLCJleHRlbmQiLCJ0ZW1wbGF0ZVVybCIsImRpcmVjdGl2ZSIsInN0Q29uZmlnIiwiJHRpbWVvdXQiLCIkcGFyc2UiLCJyZXF1aXJlIiwibGluayIsInNjb3BlIiwiZWxlbWVudCIsImF0dHIiLCJjdHJsIiwiYmluZCIsInRhYmxlQ3RybCIsInBpcGUiLCJyZXN0cmljdCIsImVsIiwiYXR0cnMiLCJvbiIsImV2ZW50Iiwid2hpY2giLCIkc2V0Vmlld1ZhbHVlIiwiJHJlbmRlciIsIiRhcHBseSIsImN0cmxzIiwibW9kZWwiLCIkdmlld1ZhbHVlIiwidmFsdWUiLCJrZXkiLCJ0b0xvd2VyQ2FzZSIsIkFycmF5IiwiaXNBcnJheSIsIl8iLCJpbmNsdWRlcyIsInRhYmxlU3RhdGUiLCJzZWFyY2giLCJwcmVkaWNhdGVPYmplY3QiLCJwYWdpbmF0aW9uIiwic3RhcnQiLCJuZ01vZGVsIiwidW5kZWZpbmVkIiwiY29udGV4dCIsImF0dHJpYnV0ZXMiLCJmaWVsZE5hbWUiLCJ0aXRsZSIsImdldFByb2R1Y3QiLCJwcm9kdWN0IiwiY2FuY2VsIiwiZGlzbWlzcyIsInNhdmUiLCJmaW5hbGx5IiwiY2xvc2UiLCIkbW9kYWwiLCJ1c2VyIiwidGFibGVTdGF0ZVJlZiIsInBhZ2VTaXplRGVmYXVsdCIsInNlYXJjaE1vZGVsIiwicGFnZSIsInBhZ2VTaXplIiwiZ2V0VG9rZW4iLCJnZXRBbGxQcm9kdWN0cyIsInByb2R1Y3RzIiwicmVzdWx0cyIsInBhZ2VkIiwiZGVsZXRlIiwicmVtb3ZlIiwiaWR4IiwiaW5kZXhPZiIsInNwbGljZSIsInNob3dEZXRhaWxzIiwiYXNNb2RhbCIsImFkZFN0YWZmVmlzaWJsZSIsInNob3dOZXdTdGFmZiIsInByb2R1Y3RJZCIsInN0YWZmIiwicG9zdCIsInBhc3N3b3JkIiwic2VydmljZUNvbnRyb2xsZXIiLCJwYXJhbXMiLCJwdXQiLCJmaXJzdG5hbWUiLCJsYXN0bmFtZSIs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WHJGLFNBQ0k2RSxNQUFPUSxHQUVYNUYsS0FBTSxPQUNQQyxPQUFPYixLQUFLLFNBQVVhLEdBQ3JCekIsUUFBUTBCLEtBQUssb0ZBRWQsU0FBVUcsR0FDVDdCLFFBQVEwQixLQUFLLG9GQUFzRkcsTUFJM0dwQixFQUFNeUYsT0FBUyxTQUFTa0IsR0FDcEI3RyxFQUFNMkYsT0FBTyxhQUFla0IsRUFBT3hGLElBQUloQixLQUFLLFNBQVNDLEdBQ2pELEdBQUl1RixHQUFNM0YsRUFBTW1HLE1BQU1QLFFBQVFlLEVBQzlCM0csR0FBTW1HLE1BQU1OLE9BQU9GLEVBQUssS0FDekJwRixNQUFNLFNBQVNDLEdBQ2RqQixRQUFRQyxJQUFJLFFBQVNnQixFQUFJQyxZQWpDckMsR0FBSXRDLEdBQVNDLFFBQVFELE9BQU8sTUF1QzVCQSxHQUFPeUMsVUFBVSxhQUVUQyxVQUNJc0YsTUFBTyxLQUVYekUsWUFBYSxzQ0FDYjdCLFlBQWEsUUFBUyxZQUFhQSIsImZpbGUiOiJhcHAubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy9hcHAubW9kdWxlLmpzXHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgdmFyIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdhcHAnLFxyXG4gICAgICAgIFtcclxuICAgICAgICAgICAgJ25nU3RvcmFnZScsXHJcbiAgICAgICAgICAgICdhcHAuZGlyZWN0aXZlcycsXHJcbiAgICAgICAgICAgICdzaGFyZWQuY29tcG9uZW50cycsXHJcbiAgICAgICAgICAgICd1aS5ib290c3RyYXAnLFxyXG4gICAgICAgICAgICAnc21hcnQtdGFibGUnXHJcbiAgICAgICAgXSkuY29uZmlnKFsnJGxvY2FsU3RvcmFnZVByb3ZpZGVyJywgJyRodHRwUHJvdmlkZXInLFxyXG4gICAgICAgICAgICBmdW5jdGlvbiAoJGxvY2FsU3RvcmFnZVByb3ZpZGVyLCAkaHR0cFByb3ZpZGVyKSB7XHJcbiAgICAgICAgICAgICAgICAkbG9jYWxTdG9yYWdlUHJvdmlkZXIuc2V0S2V5UHJlZml4KCdtYy0nKTtcclxuICAgICAgICAgICAgICAgICRodHRwUHJvdmlkZXIuaW50ZXJjZXB0b3JzLnB1c2goJ0F1dGhlbnRpY2F0aW9uSW50ZXJjZXB0b3InKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIF0pO1xyXG5cclxuXHJcbiAgICBtb2R1bGUuZmFjdG9yeSgnQXV0aGVudGljYXRpb25JbnRlcmNlcHRvcicsXHJcbiAgICAgICAgWyckbG9jYWxTdG9yYWdlJywgJyR3aW5kb3cnLCBmdW5jdGlvbiAoJGxvY2FsU3RvcmFnZSwgJHdpbmRvdykge1xyXG4gICAgICAgICAgICB2YXIgc2VydmljZSA9IHRoaXM7XHJcbiAgICAgICAgICAgIHNlcnZpY2UucmVxdWVzdCA9IGZ1bmN0aW9uIChjb25maWcpIHtcclxuICAgICAgICAgICAgICAgIGNvbmZpZy5oZWFkZXJzID0gY29uZmlnLmhlYWRlcnMgfHwge307XHJcbiAgICAgICAgICAgICAgICBpZiAoJGxvY2FsU3RvcmFnZS5jdXJyZW50VXNlcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZy5oZWFkZXJzLkF1dGhvcml6YXRpb24gPSAnQmVhcmVyICcgKyAkbG9jYWxTdG9yYWdlLmN1cnJlbnRVc2VyLnRva2VuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbmZpZztcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHNlcnZpY2UucmVzcG9uc2VFcnJvciA9IGZ1bmN0aW9uIChyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3Jlc3BvbnNlIGVycm9yJywgcmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDAxIHx8IHJlc3BvbnNlLnN0YXR1cyA9PT0gNDAzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHdpbmRvdy5sb2NhdGlvbiA9ICcvYWNjb3VudC9sb2dpbic7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJHEucmVqZWN0KHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBzZXJ2aWNlO1xyXG4gICAgICAgIH1dKTtcclxuXHJcbn0pKCk7IiwiLy9zaGFyZWQtY29tcG9uZW50cy5tb2R1bGUuanNcclxuKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnc2hhcmVkLmNvbXBvbmVudHMnLCBbXSk7XHJcbiAgICB9XHJcbikoKTsiLCIvL3B1Ymxpc2hlci1saXN0LmNvbXBvbmVudC5qc1xyXG4oZnVuY3Rpb24gKCkge1xyXG5cclxuICAgIHZhciBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnc2hhcmVkLmNvbXBvbmVudHMnKTtcclxuXHJcbiAgICBmdW5jdGlvbiBjb250cm9sbGVyKCRodHRwLCAkdWliTW9kYWwpIHtcclxuICAgICAgICB2YXIgJGN0cmwgPSB0aGlzO1xyXG5cclxuICAgICAgICAkY3RybC4kb25Jbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkaHR0cC5nZXQoJ2FwaS9wdWJsaXNoZXInKS50aGVuKGZ1bmN0aW9uIChyKSB7XHJcbiAgICAgICAgICAgICAgICAkY3RybC5wdWJsaXNoZXJzID0gci5kYXRhO1xyXG4gICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIubWVzc2FnZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJGN0cmwuY3JlYXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkdWliTW9kYWwub3Blbih7XHJcbiAgICAgICAgICAgICAgICBjb21wb25lbnQ6ICdwdWJsaXNoZXJFZGl0JyxcclxuICAgICAgICAgICAgICAgIGJpbmRpbmdzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbW9kYWxJbnN0YW5jZTogXCI8XCJcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBzaXplOiAnbGcnXHJcbiAgICAgICAgICAgIH0pLnJlc3VsdC50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuaW5mbyhcIkkgd2FzIGNsb3NlZCwgc28gZG8gd2hhdCBJIG5lZWQgdG8gZG8gbXlDb250ZW50J3MgY29udHJvbGxlciBub3cuICBSZXN1bHQgd2FzLT5cIik7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmluZm8oJ3JldHVybmluZyByZXN1bHQnLCByZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgJGN0cmwucHVibGlzaGVycy51bnNoaWZ0KHJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICAkY3RybC5pZCA9IHJlc3VsdC5pZDtcclxuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5pbmZvKFwiSSB3YXMgZGltaXNzZWQsIHNvIGRvIHdoYXQgSSBuZWVkIHRvIGRvIG15Q29udGVudCdzIGNvbnRyb2xsZXIgbm93LiAgUmVhc29uIHdhcy0+XCIgKyByZWFzb24pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICRjdHJsLmVkaXQgPSBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICAkdWliTW9kYWwub3Blbih7XHJcbiAgICAgICAgICAgICAgICBjb21wb25lbnQ6ICdwdWJsaXNoZXJFZGl0JyxcclxuICAgICAgICAgICAgICAgIGJpbmRpbmdzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbW9kYWxJbnN0YW5jZTogXCI8XCJcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICByZXNvbHZlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWQ6ICRjdHJsLmlkXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgc2l6ZTogJ2xnJ1xyXG4gICAgICAgICAgICB9KS5yZXN1bHQudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBhbmd1bGFyLmZvckVhY2goJGN0cmwucHVibGlzaGVycywgZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbS5pZCA9PT0gJGN0cmwuaWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYW5ndWxhci5leHRlbmQoaXRlbSwgcmVzdWx0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJGN0cmwuaWQgPSBpdGVtLmlkO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5pbmZvKFwiSSB3YXMgZGltaXNzZWQsIHNvIGRvIHdoYXQgSSBuZWVkIHRvIGRvIG15Q29udGVudCdzIGNvbnRyb2xsZXIgbm93LiAgUmVhc29uIHdhcy0+XCIgKyByZWFzb24pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbW9kdWxlLmNvbXBvbmVudCgncHVibGlzaGVyU2VsZWN0JyxcclxuICAgIHtcclxuICAgICAgICBiaW5kaW5nczoge1xyXG4gICAgICAgICAgICBpZDogJz0nXHJcbiAgICAgICAgfSxcclxuICAgICAgICB0ZW1wbGF0ZVVybDogJ2FwcC9jb21tb24vcHVibGlzaGVyLXNlbGVjdC5jb21wb25lbnQuaHRtbCcsXHJcbiAgICAgICAgY29udHJvbGxlcjogWyckaHR0cCcsICckdWliTW9kYWwnLCBjb250cm9sbGVyXVxyXG4gICAgfSk7XHJcblxyXG5cclxufVxyXG4pKCk7IiwiLy9kaXJlY3RpdmVzLm1vZHVsZXMuanNcclxuKGZ1bmN0aW9uKCkge1xyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC5kaXJlY3RpdmVzJywgW10pOyBcclxufSkoKTsiLCIvL3N0VGFibGUuZGlyZWN0aXZlLmpzXHJcbihmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgdmFyIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdhcHAuZGlyZWN0aXZlcycpO1xyXG5cclxuICAgIG1vZHVsZS5kaXJlY3RpdmUoJ3N0U3VibWl0U2VhcmNoJywgWydzdENvbmZpZycsICckdGltZW91dCcsICckcGFyc2UnLCBmdW5jdGlvbiAoc3RDb25maWcsICR0aW1lb3V0LCAkcGFyc2UpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICByZXF1aXJlOiAnXnN0VGFibGUnLFxyXG4gICAgICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsZW1lbnQsIGF0dHIsIGN0cmwpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlbGVtZW50LmJpbmQoJ2NsaWNrJyxcclxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YWJsZUN0cmwgPSBjdHJsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWJsZUN0cmwucGlwZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9XSk7XHJcblxyXG4gICAgbW9kdWxlLmRpcmVjdGl2ZShcImNsZWFyS2V5XCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICByZXN0cmljdDogJ0VBJyxcclxuICAgICAgICAgICAgcmVxdWlyZTogJ25nTW9kZWwnLFxyXG4gICAgICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsLCBhdHRycywgY3RybCkge1xyXG4gICAgICAgICAgICAgICAgZWwub24oJ2tleWRvd24nLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQud2hpY2ggIT09IDI3KSB7IHJldHVybjsgfSAvLyBjaGVjayBrZXkgaG93IHlvdSB3YW50XHJcbiAgICAgICAgICAgICAgICAgICAgY3RybC4kc2V0Vmlld1ZhbHVlKG51bGwpO1xyXG4gICAgICAgICAgICAgICAgICAgIGN0cmwuJHJlbmRlcigpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLiRhcHBseSgpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfSk7XHJcblxyXG5cclxuICAgIG1vZHVsZS5kaXJlY3RpdmUoXCJzdFJlc2V0U2VhcmNoXCIsXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdHJpY3Q6ICdFQScsXHJcbiAgICAgICAgICAgICAgICAgICAgcmVxdWlyZTogWydec3RUYWJsZScsICdebmdNb2RlbCddLFxyXG4gICAgICAgICAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWxlbWVudCwgYXR0cnMsIGN0cmxzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlbGVtZW50LmJpbmQoJ2NsaWNrJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbW9kZWwgPSBjdHJsc1sxXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3RybCA9IGN0cmxzWzBdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2NvcGUuJGFwcGx5KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKG1vZGVsLiR2aWV3VmFsdWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAodmFsdWUsIGtleSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChrZXkudG9Mb3dlckNhc2UoKSA9PT0gJ3BhZ2UnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVsLiR2aWV3VmFsdWVba2V5XSA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSB8fCBfLmluY2x1ZGVzKGtleS50b0xvd2VyQ2FzZSgpLCAncGFnZScpKSByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kZWwuJHZpZXdWYWx1ZVtrZXldID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFibGVTdGF0ZSA9IGN0cmwudGFibGVTdGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJsZVN0YXRlLnNlYXJjaC5wcmVkaWNhdGVPYmplY3QgPSB7fTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGVTdGF0ZS5wYWdpbmF0aW9uLnN0YXJ0ID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGN0cmwucGlwZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgbW9kdWxlLmRpcmVjdGl2ZShcInN0Q2xlYXJLZXlcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnRUEnLFxyXG4gICAgICAgICAgICByZXF1aXJlOiBbJ15zdFRhYmxlJywgJ15uZ01vZGVsJ10sXHJcbiAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWxlbWVudCwgYXR0cnMsIGN0cmxzKSB7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50Lm9uKCdrZXlkb3duJywgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5nTW9kZWwgPSBjdHJsc1sxXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY3RybCA9IGN0cmxzWzBdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQud2hpY2ggPT09IDEzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjdHJsLnBpcGUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50LndoaWNoID09PSAyNykge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQuY29udGV4dC5hdHRyaWJ1dGVzWydzdC1zZWFyY2gnXSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2NvcGUuJGFwcGx5KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZmllbGROYW1lID0gZWxlbWVudC5jb250ZXh0LmF0dHJpYnV0ZXNbJ3N0LXNlYXJjaCddLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YWJsZVN0YXRlID0gY3RybC50YWJsZVN0YXRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGVTdGF0ZS5zZWFyY2gucHJlZGljYXRlT2JqZWN0W2ZpZWxkTmFtZV0gPSAnJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3RybC5waXBlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2NvcGUuJGFwcGx5KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZ01vZGVsLiRzZXRWaWV3VmFsdWUobnVsbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmdNb2RlbC4kcmVuZGVyKCk7IC8vIHdpbGwgdXBkYXRlIHRoZSBpbnB1dCB2YWx1ZSBhcyB3ZWxsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9KTtcclxuXHJcbn1cclxuKSgpOyIsIi8vcHJvZHVjdC1lZGl0LmNvbXBvbmVudC5qc1xyXG4oZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdhcHAnKTtcclxuXHJcbiAgICBmdW5jdGlvbiBjb250cm9sbGVyKHNlcnZpY2UpIHtcclxuICAgICAgICB2YXIgJGN0cmwgPSB0aGlzO1xyXG5cclxuICAgICAgICAkY3RybC4kb25Jbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkY3RybC50aXRsZSA9ICdOZXcgUHJvZHVjdCc7IFxyXG4gICAgICAgICAgICBpZiAoJGN0cmwucmVzb2x2ZSkge1xyXG4gICAgICAgICAgICAgICAgJGN0cmwuaWQgPSAkY3RybC5yZXNvbHZlLmlkO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICgkY3RybC5pZCkge1xyXG4gICAgICAgICAgICAgICAgc2VydmljZS5nZXRQcm9kdWN0KCRjdHJsLmlkKS50aGVuKGZ1bmN0aW9uIChyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJGN0cmwucHJvZHVjdCA9IHI7XHJcbiAgICAgICAgICAgICAgICAgICAgJGN0cmwudGl0bGUgPSByLnRpdGxlOyBcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJGN0cmwuY2FuY2VsID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkY3RybC5kaXNtaXNzKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkY3RybC5zYXZlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gc2VydmljZS5zYXZlKCRjdHJsLnByb2R1Y3QpLnRoZW4oZnVuY3Rpb24gKHIpIHtcclxuICAgICAgICAgICAgICAgIGFuZ3VsYXIuZXh0ZW5kKCRjdHJsLnByb2R1Y3QsIHIpO1xyXG4gICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnRXJyb3Igc2F2aW5nIHByb2R1Y3QnLCBlcnIubWVzc2FnZSk7XHJcbiAgICAgICAgICAgIH0pLmZpbmFsbHkoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJGN0cmwubW9kYWxJbnN0YW5jZS5jbG9zZSgkY3RybC5wcm9kdWN0KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICBtb2R1bGUuY29tcG9uZW50KCdwcm9kdWN0RWRpdCcsXHJcbiAgICB7XHJcbiAgICAgICAgdGVtcGxhdGVVcmw6ICdhcHAvcHJvZHVjdC9wcm9kdWN0LWVkaXQuY29tcG9uZW50Lmh0bWwnLFxyXG4gICAgICAgIGJpbmRpbmdzOiB7XHJcbiAgICAgICAgICAgIGlkOiAnPCcsXHJcbiAgICAgICAgICAgIHJlc29sdmU6ICc8JyxcclxuICAgICAgICAgICAgY2xvc2U6ICcmJyxcclxuICAgICAgICAgICAgZGlzbWlzczogJyYnLFxyXG4gICAgICAgICAgICBtb2RhbEluc3RhbmNlOiAnPCdcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNvbnRyb2xsZXI6IFsnUHJvZHVjdCcsIGNvbnRyb2xsZXJdXHJcbiAgICB9KTtcclxufSkoKTtcclxuICAgICIsIi8vcHJvZHVjdC1saXN0LmNvbXBvbmVudC5qc1xyXG4oZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIHZhciBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnYXBwJyk7XHJcblxyXG4gICAgZnVuY3Rpb24gY29udHJvbGxlcigkbW9kYWwsIHByb2R1Y3QsIHVzZXIpIHtcclxuICAgICAgICB2YXIgJGN0cmwgPSB0aGlzO1xyXG4gICAgICAgIHZhciBwYWdlU2l6ZURlZmF1bHQgPSAxMDtcclxuICAgICAgICB2YXIgdGFibGVTdGF0ZVJlZjtcclxuXHJcbiAgICAgICAgJGN0cmwuc2VhcmNoTW9kZWwgPSB7XHJcbiAgICAgICAgICAgIHBhZ2U6IDEsXHJcbiAgICAgICAgICAgIHBhZ2VTaXplOiBwYWdlU2l6ZURlZmF1bHRcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkY3RybC4kb25Jbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygncHJvZHVjdCBsaXN0IGluaXQnKTtcclxuICAgICAgICAgICAgJGN0cmwudGl0bGUgPSAnUHJvZHVjdCBMaXN0JztcclxuICAgICAgICAgICAgdXNlci5nZXRUb2tlbigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJGN0cmwuc2VhcmNoID0gZnVuY3Rpb24gKHRhYmxlU3RhdGUpIHtcclxuICAgICAgICAgICAgdGFibGVTdGF0ZVJlZiA9IHRhYmxlU3RhdGU7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdzZWFyY2gnKTtcclxuICAgICAgICAgICAgcHJvZHVjdC5nZXRBbGxQcm9kdWN0cygkY3RybC5zZWFyY2hNb2RlbCkudGhlbihmdW5jdGlvbiAocikge1xyXG4gICAgICAgICAgICAgICAgJGN0cmwucHJvZHVjdHMgPSByLnJlc3VsdHM7XHJcbiAgICAgICAgICAgICAgICAkY3RybC5zZWFyY2hNb2RlbCA9IHI7XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgJGN0cmwuc2VhcmNoTW9kZWwucmVzdWx0cztcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkY3RybC5wYWdlZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJGN0cmwuc2VhcmNoKHRhYmxlU3RhdGVSZWYpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJGN0cmwuY3JlYXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkbW9kYWwub3Blbih7XHJcbiAgICAgICAgICAgICAgICBjb21wb25lbnQ6ICdwcm9kdWN0RWRpdCcsXHJcbiAgICAgICAgICAgICAgICBiaW5kaW5nczoge1xyXG4gICAgICAgICAgICAgICAgICAgIG1vZGFsSW5zdGFuY2U6IFwiPFwiXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgc2l6ZTogJ21kJ1xyXG4gICAgICAgICAgICB9KS5yZXN1bHQudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAkY3RybC5wcm9kdWN0cy51bnNoaWZ0KHJlc3VsdCk7XHJcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuaW5mbyhcIkkgd2FzIGRpbWlzc2VkLCBzbyBkbyB3aGF0IEkgbmVlZCB0byBkbyBteUNvbnRlbnQncyBjb250cm9sbGVyIG5vdy4gIFJlYXNvbiB3YXMtPlwiICsgcmVhc29uKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkY3RybC5lZGl0ID0gZnVuY3Rpb24oaXRlbSkge1xyXG4gICAgICAgICAgICAkbW9kYWwub3Blbih7XHJcbiAgICAgICAgICAgICAgICBjb21wb25lbnQ6ICdwcm9kdWN0RWRpdCcsXHJcbiAgICAgICAgICAgICAgICBiaW5kaW5nczoge1xyXG4gICAgICAgICAgICAgICAgICAgIG1vZGFsSW5zdGFuY2U6IFwiPFwiXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZToge1xyXG4gICAgICAgICAgICAgICAgICAgIGlkOiBpdGVtLmlkXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgc2l6ZTogJ21kJ1xyXG4gICAgICAgICAgICB9KS5yZXN1bHQudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBhbmd1bGFyLmV4dGVuZChpdGVtLCByZXN1bHQpO1xyXG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJGN0cmwuZGVsZXRlID0gZnVuY3Rpb24gKGl0ZW0pIHtcclxuXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdkZWxldGUnLCBpdGVtKTtcclxuICAgICAgICAgICAgcHJvZHVjdC5yZW1vdmUoaXRlbS5pZCkudGhlbihmdW5jdGlvbihyKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaWR4ID0gJGN0cmwucHJvZHVjdHMuaW5kZXhPZihpdGVtKTtcclxuICAgICAgICAgICAgICAgICRjdHJsLnByb2R1Y3RzLnNwbGljZShpZHgsIDEpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9ICAgXHJcbiAgICAgICAgXHJcbiAgICAgICAgJGN0cmwuc2hvd0RldGFpbHMgPSBmdW5jdGlvbiAoaWQpIHtcclxuICAgICAgICAgICAgJG1vZGFsLm9wZW4oe1xyXG4gICAgICAgICAgICAgICAgY29tcG9uZW50OiAncHJvZHVjdFN1bW1hcnknLFxyXG4gICAgICAgICAgICAgICAgYmluZGluZ3M6IHtcclxuICAgICAgICAgICAgICAgICAgICBtb2RhbEluc3RhbmNlOiBcIjxcIlxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHJlc29sdmU6IHtcclxuICAgICAgICAgICAgICAgICAgICBpZDogaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgYXNNb2RhbDogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHNpemU6ICdtZCdcclxuICAgICAgICAgICAgfSkucmVzdWx0LnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5pbmZvKFwiSSB3YXMgY2xvc2VkLCBzbyBkbyB3aGF0IEkgbmVlZCB0byBkbyBteUNvbnRlbnQncyBjb250cm9sbGVyIG5vdy4gIFJlc3VsdCB3YXMtPlwiKTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuaW5mbyhyZXN1bHQpO1xyXG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmluZm8oXCJJIHdhcyBkaW1pc3NlZCwgc28gZG8gd2hhdCBJIG5lZWQgdG8gZG8gbXlDb250ZW50J3MgY29udHJvbGxlciBub3cuICBSZWFzb24gd2FzLT5cIiArIHJlYXNvbik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBtb2R1bGUuY29tcG9uZW50KCdwcm9kdWN0TGlzdCcsXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2FwcC9wcm9kdWN0L3Byb2R1Y3QtbGlzdC5jb21wb25lbnQuaHRtbCcsXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6IFsnJHVpYk1vZGFsJywgJ1Byb2R1Y3QnLCAnVXNlcicsIGNvbnRyb2xsZXJdXHJcbiAgICAgICAgfSk7XHJcblxyXG59XHJcbikoKTsiLCIvL3Byb2R1Y3Qtc3VtbWFyeS5jb21wb25lbnQuanNcclxuKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnYXBwJyk7XHJcblxyXG4gICAgZnVuY3Rpb24gY29udHJvbGxlcigkbW9kYWwsIHNlcnZpY2UpIHtcclxuICAgICAgICB2YXIgJGN0cmwgPSB0aGlzO1xyXG5cclxuICAgICAgICAkY3RybC4kb25Jbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoJGN0cmwucmVzb2x2ZSkge1xyXG4gICAgICAgICAgICAgICAgJGN0cmwuaWQgPSAkY3RybC5yZXNvbHZlLmlkO1xyXG4gICAgICAgICAgICAgICAgJGN0cmwuYXNNb2RhbCA9ICRjdHJsLnJlc29sdmUuYXNNb2RhbDtcclxuICAgICAgICAgICAgICAgICRjdHJsLmFkZFN0YWZmVmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBzZXJ2aWNlLmdldFByb2R1Y3QoJGN0cmwuaWQpLnRoZW4oZnVuY3Rpb24gKHIpIHtcclxuICAgICAgICAgICAgICAgICRjdHJsLnByb2R1Y3QgPSByO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICRjdHJsLnNob3dOZXdTdGFmZiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAkbW9kYWwub3Blbih7XHJcbiAgICAgICAgICAgICAgICBjb21wb25lbnQ6ICdzdGFmZkVkaXQnLFxyXG4gICAgICAgICAgICAgICAgYmluZGluZ3M6IHtcclxuICAgICAgICAgICAgICAgICAgICBtb2RhbEluc3RhbmNlOiBcIjxcIlxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHJlc29sdmU6IHtcclxuICAgICAgICAgICAgICAgICAgICBwcm9kdWN0SWQ6ICRjdHJsLmlkXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgc2l6ZTogJ21kJ1xyXG4gICAgICAgICAgICB9KS5yZXN1bHQudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmluZm8oXCJJIHdhcyBjbG9zZWQsIHNvIGRvIHdoYXQgSSBuZWVkIHRvIGRvIG15Q29udGVudCdzIGNvbnRyb2xsZXIgbm93LiAgUmVzdWx0IHdhcy0+XCIpO1xyXG4gICAgICAgICAgICAgICAgJGN0cmwucHJvZHVjdC5zdGFmZi51bnNoaWZ0KHJlc3VsdCk7XHJcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuaW5mbyhcIkkgd2FzIGRpbWlzc2VkLCBzbyBkbyB3aGF0IEkgbmVlZCB0byBkbyBteUNvbnRlbnQncyBjb250cm9sbGVyIG5vdy4gIFJlYXNvbiB3YXMtPlwiICsgcmVhc29uKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkY3RybC5jYW5jZWwgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICRjdHJsLmRpc21pc3MoKTtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIG1vZHVsZS5jb21wb25lbnQoJ3Byb2R1Y3RTdW1tYXJ5JyxcclxuICAgIHtcclxuICAgICAgICBiaW5kaW5nczoge1xyXG4gICAgICAgICAgICBpZDogJzwnLFxyXG4gICAgICAgICAgICBhc01vZGFsOiAnPCcsXHJcbiAgICAgICAgICAgIHJlc29sdmU6ICc8JyxcclxuICAgICAgICAgICAgY2xvc2U6ICcmJyxcclxuICAgICAgICAgICAgZGlzbWlzczogJyYnXHJcbiAgICAgICAgfSxcclxuICAgICAgICB0ZW1wbGF0ZVVybDogJ2FwcC9wcm9kdWN0L3Byb2R1Y3Qtc3VtbWFyeS5jb21wb25lbnQuaHRtbCcsXHJcbiAgICAgICAgY29udHJvbGxlcjogWyckdWliTW9kYWwnLCAnUHJvZHVjdCcsIGNvbnRyb2xsZXJdXHJcbiAgICB9KTtcclxuXHJcbn1cclxuKSgpOyIsIi8vYXV0aC5zZXJ2aWNlLmpzXHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ2FwcCcpO1xyXG5cclxuICAgIGZ1bmN0aW9uIHNlcnZpY2UoJGh0dHAsICRsb2NhbFN0b3JhZ2UpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBnZXRUb2tlbjogZ2V0VG9rZW5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGdldFRva2VuKCkge1xyXG4gICAgICAgICAgICBpZiAoJGxvY2FsU3RvcmFnZS5jdXJyZW50VXNlcikge1xyXG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRVc2VyID0gJGxvY2FsU3RvcmFnZS5jdXJyZW50VXNlcjtcclxuICAgICAgICAgICAgICAgICRodHRwLnBvc3QoJ2FwaS9hdXRoL2F1dGhlbnRpY2F0ZT91c2VyPScgK1xyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRVc2VyLnVzZXIgK1xyXG4gICAgICAgICAgICAgICAgICAgICcmcGFzc3dvcmQ9JyArXHJcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFVzZXIucGFzc3dvcmQpLnRoZW4oZnVuY3Rpb24gKHIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFVzZXIudG9rZW4gPSByLmRhdGE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRsb2NhbFN0b3JhZ2UuY3VycmVudFVzZXIgPSBjdXJyZW50VXNlcjtcclxuICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbW9kdWxlLnNlcnZpY2UoJ1VzZXInLCBbJyRodHRwJywgJyRsb2NhbFN0b3JhZ2UnLCBzZXJ2aWNlXSk7XHJcbn1cclxuKSgpOyIsIi8vcHJvZHVjdC5zZXJ2aWNlLmpzXHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcbiAgICB2YXIgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ2FwcCcpOyBcclxuICAgIFxyXG4gICAgbW9kdWxlLmZhY3RvcnkoJ1Byb2R1Y3QnLCBbJyRodHRwJywgc2VydmljZUNvbnRyb2xsZXJdKTtcclxuXHJcbiAgICBmdW5jdGlvbiBzZXJ2aWNlQ29udHJvbGxlcigkaHR0cCkge1xyXG5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBnZXRQcm9kdWN0OiBnZXRQcm9kdWN0LFxyXG4gICAgICAgICAgICBnZXRBbGxQcm9kdWN0czogZ2V0QWxsUHJvZHVjdHMsXHJcbiAgICAgICAgICAgIHJlbW92ZTogcmVtb3ZlLCBcclxuICAgICAgICAgICAgc2F2ZTogc2F2ZVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGdldFByb2R1Y3QoaWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCgnYXBpL3Byb2R1Y3QvJyArIGlkKS50aGVuKGZ1bmN0aW9uIChyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gci5kYXRhO1xyXG4gICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIubWVzc2FnZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0QWxsUHJvZHVjdHMoc2VhcmNoTW9kZWwpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCgnYXBpL3Byb2R1Y3QnLCB7IHBhcmFtczogc2VhcmNoTW9kZWwgfSkudGhlbihmdW5jdGlvbiAocikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHIuZGF0YTtcclxuICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHJlbW92ZShpZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZGVsZXRlKCdhcGkvcHJvZHVjdC8nICsgaWQpLnRoZW4oZnVuY3Rpb24ocikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHIuZGF0YTtcclxuICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24oZXJyKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIubWVzc2FnZSk7XHJcbiAgICAgICAgICAgIH0pOyBcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHNhdmUocHJvZHVjdCkge1xyXG4gICAgICAgICAgICBpZiAocHJvZHVjdC5pZCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICRodHRwLnB1dCgnYXBpL3Byb2R1Y3QnLCBwcm9kdWN0KS50aGVuKGZ1bmN0aW9uKHIpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gci5kYXRhO1xyXG4gICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24oZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVyci5tZXNzYWdlO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJGh0dHAucG9zdCgnYXBpL3Byb2R1Y3QnLCBwcm9kdWN0KS50aGVuKGZ1bmN0aW9uIChyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHIuZGF0YTtcclxuICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZXJyLm1lc3NhZ2U7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcblxyXG59XHJcbikoKTsiLCIvL3N0YWZmLWVkaXQuY29tcG9uZW50LmpzXHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ2FwcCcpO1xyXG5cclxuICAgIGZ1bmN0aW9uIGNvbnRyb2xsZXIoJGh0dHApIHtcclxuICAgICAgICB2YXIgJGN0cmwgPSB0aGlzO1xyXG5cclxuICAgICAgICAkY3RybC4kb25Jbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnc3RhZmYgZWRpdCBpbml0Jyk7XHJcbiAgICAgICAgICAgICRjdHJsLnRpdGxlID0gJ05ldyBTdGFmZic7XHJcblxyXG4gICAgICAgICAgICBpZiAoJGN0cmwucmVzb2x2ZSkgJGN0cmwucHJvZHVjdElkID0gJGN0cmwucmVzb2x2ZS5wcm9kdWN0SWQ7XHJcblxyXG4gICAgICAgICAgICBpZiAoJGN0cmwucmVzb2x2ZS5zdGFmZikge1xyXG4gICAgICAgICAgICAgICAgJGN0cmwuc3RhZmYgPSAkY3RybC5yZXNvbHZlLnN0YWZmO1xyXG4gICAgICAgICAgICAgICAgJGN0cmwudGl0bGUgPSAkY3RybC5zdGFmZi5maXJzdG5hbWUgKyAnICcgKyAkY3RybC5zdGFmZi5sYXN0bmFtZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJGN0cmwuY2FuY2VsID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkY3RybC5kaXNtaXNzKCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJGN0cmwuc2F2ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKCRjdHJsLnByb2R1Y3RJZCkge1xyXG4gICAgICAgICAgICAgICAgJGh0dHAucG9zdCgnYXBpL3N0YWZmLycgKyAkY3RybC5wcm9kdWN0SWQsICRjdHJsLnN0YWZmKS50aGVuKGZ1bmN0aW9uIChyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYW5ndWxhci5leHRlbmQoJGN0cmwuc3RhZmYsIHIuZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgJGN0cmwubW9kYWxJbnN0YW5jZS5jbG9zZShyLmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdzb21ldGhpbmcgd2VudCB3cm9uZycsIGVyci5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJGh0dHAucG9zdCgnYXBpL3N0YWZmJywgJGN0cmwuc3RhZmYpLnRoZW4oZnVuY3Rpb24gKHIpIHtcclxuICAgICAgICAgICAgICAgICAgICBhbmd1bGFyLmV4dGVuZCgkY3RybC5zdGFmZiwgci5kYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAkY3RybC5tb2RhbEluc3RhbmNlLmNsb3NlKHIuZGF0YSk7XHJcbiAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3NvbWV0aGluZyB3ZW50IHdyb25nJywgZXJyLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIG1vZHVsZS5jb21wb25lbnQoJ3N0YWZmRWRpdCcsXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBiaW5kaW5nczoge1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZTogJzwnLFxyXG4gICAgICAgICAgICAgICAgY2xvc2U6ICcmJyxcclxuICAgICAgICAgICAgICAgIGRpc21pc3M6ICcmJyxcclxuICAgICAgICAgICAgICAgIHN0YWZmOiAnPCcsXHJcbiAgICAgICAgICAgICAgICBwcm9kdWN0SWQ6ICc8JyxcclxuICAgICAgICAgICAgICAgIG1vZGFsSW5zdGFuY2U6ICc8J1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2FwcC9zdGFmZi9zdGFmZi1lZGl0LmNvbXBvbmVudC5odG1sJyxcclxuICAgICAgICAgICAgY29udHJvbGxlcjogWyckaHR0cCcsIGNvbnRyb2xsZXJdXHJcbiAgICAgICAgfSk7XHJcbn1cclxuKSgpOyIsIi8vc3RhZmYtbGlzdC5jb21wb25lbnQuanNcclxuKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnYXBwJyk7XHJcblxyXG4gICAgZnVuY3Rpb24gY29udHJvbGxlcigkaHR0cCwgJG1vZGFsKSB7XHJcbiAgICAgICAgdmFyICRjdHJsID0gdGhpcztcclxuXHJcbiAgICAgICAgJGN0cmwuJG9uSW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ3N0YWZmIGxpc3QgaW5pdCcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJGN0cmwuZWRpdCA9IGZ1bmN0aW9uKG1lbWJlcikge1xyXG4gICAgICAgICAgICAkbW9kYWwub3Blbih7XHJcbiAgICAgICAgICAgICAgICBjb21wb25lbnQ6ICdzdGFmZkVkaXQnLFxyXG4gICAgICAgICAgICAgICAgYmluZGluZ3M6IHtcclxuICAgICAgICAgICAgICAgICAgICBtb2RhbEluc3RhbmNlOiBcIjxcIiwgXHJcbiAgICAgICAgICAgICAgICAgICAgc3RhZmY6IG1lbWJlclxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHJlc29sdmU6IHtcclxuICAgICAgICAgICAgICAgICAgICBzdGFmZjogbWVtYmVyXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgc2l6ZTogJ21kJ1xyXG4gICAgICAgICAgICB9KS5yZXN1bHQudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmluZm8oXCJJIHdhcyBjbG9zZWQsIHNvIGRvIHdoYXQgSSBuZWVkIHRvIGRvIG15Q29udGVudCdzIGNvbnRyb2xsZXIgbm93LiAgUmVzdWx0IHdhcy0+XCIpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuaW5mbyhcIkkgd2FzIGRpbWlzc2VkLCBzbyBkbyB3aGF0IEkgbmVlZCB0byBkbyBteUNvbnRlbnQncyBjb250cm9sbGVyIG5vdy4gIFJlYXNvbiB3YXMtPlwiICsgcmVhc29uKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkY3RybC5kZWxldGUgPSBmdW5jdGlvbihtZW1iZXIpIHtcclxuICAgICAgICAgICAgJGh0dHAuZGVsZXRlKCdhcGkvc3RhZmYvJyArIG1lbWJlci5pZCkudGhlbihmdW5jdGlvbihyKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaWR4ID0gJGN0cmwuc3RhZmYuaW5kZXhPZihtZW1iZXIpO1xyXG4gICAgICAgICAgICAgICAgJGN0cmwuc3RhZmYuc3BsaWNlKGlkeCwgMSk7XHJcbiAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uKGVycikge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2Vycm9yJywgZXJyLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG1vZHVsZS5jb21wb25lbnQoJ3N0YWZmTGlzdCcsXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBiaW5kaW5nczoge1xyXG4gICAgICAgICAgICAgICAgc3RhZmY6ICc8J1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2FwcC9zdGFmZi9zdGFmZi1saXN0LmNvbXBvbmVudC5odG1sJyxcclxuICAgICAgICAgICAgY29udHJvbGxlcjogWyckaHR0cCcsICckdWliTW9kYWwnLCBjb250cm9sbGVyXVxyXG4gICAgICAgIH0pO1xyXG59XHJcbikoKTsiXX0=
